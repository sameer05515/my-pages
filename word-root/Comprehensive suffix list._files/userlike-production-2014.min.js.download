(function(){function r(a,u,l){function o(i,e){if(!u[i]){if(!a[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(c)return c(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var s=u[i]={exports:{}};a[i][0].call(s.exports,function(e){var t=a[i][1][e];return o(t||e)},s,s.exports,r,a,u,l)}return u[i].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)o(l[e]);return o}return r})()({1:[function(d,m,e){"use strict";(function(e,t){if(typeof define==="function"&&define.amd&&(typeof d!=="function"||typeof d==="function"&&typeof d.specified==="function"&&d.specified("userlike"))){return define("userlike",t())}else{return t()}})(window,function(){var e,t,i,r,n,o,s,a,u,l,c,p,f,h;r=d("./utils/jq.coffee")._jq;l=d("./global.coffee");u=l.get;s=l._ullog;i=l.UL_EMOTICONS;t=u("CONTEXT");l.set("avoid_globals",(f=window.userlike._config.options)!=null?f.avoid_globals:void 0);d("./utils/favicon.coffee");n=d("./popup.coffee");n.assignCallbacks(t);o=d("./public.coffee");o.assignApi(t);p=d("./preview.coffee");p.assignPreview(t);e=d("./public.coffee").App;h=u("userlike");e.get().run(h._config.app_key,h._config.widget_key,h._config.data,h._router);a=u("avoid_globals");for(c in t){if(!a){window[c]=t[c]}h[c]=t[c]}h["preview"]=u("preview");h.getData=l.getData;h.setData=l.setData;m.exports=h;return h})},{"./global.coffee":13,"./popup.coffee":17,"./preview.coffee":19,"./public.coffee":20,"./utils/favicon.coffee":30,"./utils/jq.coffee":31}],2:[function(o,a,e){var u=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,i,r,s,n;i=o("../views/view.coffee").View;n=o("../global.coffee").get;s=o("../global.coffee")._ullog;r=o("../utils/jq.coffee")._jq;t="a#userlike-tab #userlike-button-text{\n    font-family: '{{FONT}}', Sans-Serif;\n}";e=function(e){u(Button,e);Button.has_injected_style=false;Button.prototype.callbacks=[];Button.prototype.element_id="userlike-tab";Button.prototype.posMobile={top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"};Button.prototype.display_state=null;function Button(e){if(e==null){e={}}Button.__super__.constructor.call(this,e)}Button.prototype.slideOut=function(){};Button.prototype.changeToOfflineText=function(){};Button.prototype.changeToOnlineText=function(){};Button.prototype.delayProactive=function(){return 0};Button.prototype.render=function(){};Button.prototype.el=function(){return document.getElementById(this.element_id)};Button.prototype.addCallback=function(e){var t;t=window[e]||window.userlike[e];if(typeof t==="function"){return this.callbacks.push(t)}};Button.prototype.replaceCallbacks=function(e){var t;t=window[e]||window.userlike[e];if(typeof t==="function"){return this.callbacks=[t]}};Button.prototype.triggerCallbacks=function(e){var t,i,r,n,o;n=this.callbacks;o=[];for(i=0,r=n.length;i<r;i++){t=n[i];s("Button:triggerCallbacks: "+t.name+" visible="+e);o.push(t(e))}return o};Button.prototype.registerEvents=function(){var e;return(e=this.el())!=null?e.onclick=function(e){return function(){return e.onButtonClick()}}(this):void 0};Button.prototype.onButtonClick=function(){n("fsm").event("chatButton");return false};Button.prototype.restoreDisplayState=function(){s("Button:restoreDisplayState:");return this.display_state()};Button.prototype.hide=function(){this.display_state=this.hide;this.triggerCallbacks(false);if(this.el()!=null){return r(this.el()).hide()}};Button.prototype.show=function(e){this.display_state=this.show;return this.triggerCallbacks(true)};Button.prototype.fadeOutEyecatcher=function(){};Button.prototype.writeCss=function(e){var t;if(Button.has_injected_style){return}t=document.createElement("style");t.type="text/css";if(t.styleSheet){t.styleSheet.cssText=e}else{t.appendChild(document.createTextNode(e))}document.getElementsByTagName("head")[0].appendChild(t);return Button.has_injected_style=true};Button.prototype.update=function(){};Button.prototype.setBadge=function(e){};Button.prototype.clear=function(){clearInterval(this.timer);this.timer=void 0;return s("Button::clear")};Button.prototype.destroy=function(){};return Button}(i);return a.exports={CSS_BUTTON:t,Button:e}})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../views/view.coffee":55}],3:[function(a,u,e){var l=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,i,r,n,o,s;t=a("./button_preset.coffee").ButtonPreset;r=a("../eyecatcher.coffee").Eyecatcher;i=a("./button_base.coffee").CSS_BUTTON;s=a("../global.coffee").get;o=a("../global.coffee")._ullog;n=a("../utils/jq.coffee")._jq;e=function(e){l(ButtonBig,e);function ButtonBig(){return ButtonBig.__super__.constructor.apply(this,arguments)}ButtonBig.prototype.text_el="#userlike-button-text";ButtonBig.prototype["class"]="userlike-button-big";ButtonBig.prototype.fadeOutEyecatcher=function(){var e;return(e=this.eyecatcher)!=null?e.hide():void 0};ButtonBig.prototype.render=function(){var e;e=i.replace("{{FONT}}",s("font").get());this.eyecatcher=new r({config:this.config});e+=this.eyecatcher.render();this.writeCss(e);this.update();return this};ButtonBig.prototype.show=function(e){var t;if(e==null){e=0}this.display_state=this.show;this.update();if(typeof e==="boolean"&&e===true){e=1500}if(this.config.eyecatcher_enabled&&this.state==="online"){if((t=this.eyecatcher)!=null){t.show()}}else{this.fadeOutEyecatcher()}this.slide(e);return this};ButtonBig.prototype.setBadge=function(e){o("ButtonBig:setBadge count="+e);if(e>0){n("#userlike-message-badge-count").text(e);return n("#userlike-message-badge").addClass("userlike-show")}else{return n("#userlike-message-badge").removeClass("userlike-show")}};ButtonBig.prototype.slideOut=function(){var e;ButtonBig.__super__.slideOut.call(this);return(e=this.eyecatcher)!=null?e.hide():void 0};ButtonBig.prototype.setOffset=function(){var e;ButtonBig.__super__.setOffset.call(this);return(e=this.eyecatcher)!=null?e.setOffset():void 0};ButtonBig.prototype.destroy=function(){var e;ButtonBig.__super__.destroy.call(this);return(e=this.eyecatcher)!=null?e.hide():void 0};return ButtonBig}(t);return u.exports.ButtonBig=e})()},{"../eyecatcher.coffee":9,"../global.coffee":13,"../utils/jq.coffee":31,"./button_base.coffee":2,"./button_preset.coffee":7}],4:[function(u,l,e){var c=function(e,t){return function(){return e.apply(t,arguments)}},p=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,i,a,r,n,o,s;a=u("../utils/jq.coffee")._jq;n=u("../global.coffee").get;r=u("../global.coffee")._ullog;s=u("../global.coffee").isMobile();i=u("./button_base.coffee").CSS_BUTTON;t=u("./button_preset.coffee").ButtonPreset;o=function(){return n("preview")};e=function(e){var t;p(ButtonBubble,e);function ButtonBubble(){this.onWindowResize=c(this.onWindowResize,this);return ButtonBubble.__super__.constructor.apply(this,arguments)}ButtonBubble.prototype.text_el="#userlike-button-hover-text";ButtonBubble.prototype["class"]="userlike-button-bubble";t=function(){};ButtonBubble.prototype.registerEvents=function(){var e;ButtonBubble.__super__.registerEvents.call(this);e=this;this.fadeIn=function(){return e.fadeInHoverText()};this.fadeOut=function(){return e.fadeOutHoverText()};if(!s){a(this.el()).on("mouseleave",this.fadeOut);return a(this.el()).on("mouseenter",this.fadeIn)}};ButtonBubble.prototype.unregisterEvents=function(){a(this.el()).off("mouseleave",this.fadeOut);return a(this.el()).off("mouseenter",this.fadeIn)};ButtonBubble.prototype.render=function(){var e;e=i.replace("{{FONT}}",n("font").get());this.writeCss(e);this.update();a.windowOff("resize",this.onWindowResize);a.windowOn("resize",this.onWindowResize);return this};ButtonBubble.prototype.onWindowResize=function(){return this.setHoverTextOffset()};ButtonBubble.prototype.slideOut=function(){ButtonBubble.__super__.slideOut.call(this);return this.fadeOutHoverText()};ButtonBubble.prototype.setClasses=function(){ButtonBubble.__super__.setClasses.call(this);return a("#userlike-hover-text-container").removeClass("userlike-left").removeClass("userlike-right").addClass("userlike-"+this.config.theme.button_orientation)};ButtonBubble.prototype.setOffset=function(){ButtonBubble.__super__.setOffset.call(this);return this.setHoverTextOffset()};ButtonBubble.prototype.setHoverTextOffset=function(){var e,t,i,r,n,o,s;e=a(this.el());i=e.offset().left;r=e.width();s=20;t=a("#userlike-hover-text-container");n=Math.max(t.outerWidth(),t.width());if(this.config.theme.button_orientation==="left"){o=i+r+s}else if(this.config.theme.button_orientation==="right"){o=i-n-s}return t.css("left",o)};ButtonBubble.prototype.setText=function(){var e;ButtonBubble.__super__.setText.call(this);if((e=o())!=null?e.isActive():void 0){return this.fadeInHoverText()}};ButtonBubble.prototype.update=function(){ButtonBubble.__super__.update.call(this);return this.setArrowColor()};ButtonBubble.prototype.setArrowColor=function(){var e;if(this.config.theme.button_orientation==="right"){e="transparent transparent transparent "+this.config.theme.button_bg_color}if(this.config.theme.button_orientation==="left"){e="transparent "+this.config.theme.button_bg_color+" transparent transparent"}return a("#userlike-hover-text-arrow").css("border-color",e)};ButtonBubble.prototype.fadeInHoverText=function(){a("#userlike-hover-text-container").css("display","block");a("#userlike-hover-text-container").addClass("fadeIn");return this.setHoverTextOffset()};ButtonBubble.prototype.fadeOutHoverText=function(){return a("#userlike-hover-text-container").removeClass("fadeIn")};ButtonBubble.prototype.fadeOutEyecatcher=function(){};ButtonBubble.prototype.show=function(e){if(e==null){e=0}this.update();this.display_state=this.show;if(typeof e==="boolean"&&e===true){e=1500}this.slide(e);return this};ButtonBubble.prototype.setBadge=function(e){r("ButtonBubble:setBadge count="+e);if(e>0){a("#userlike-message-badge-count").text(e);return a("#userlike-message-badge").addClass("userlike-show")}else{return a("#userlike-message-badge").removeClass("userlike-show")}};ButtonBubble.prototype.destroy=function(){ButtonBubble.__super__.destroy.call(this);this.unregisterEvents();return this.fadeOutHoverText()};return ButtonBubble}(t);return l.exports.ButtonBubble=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./button_base.coffee":2,"./button_preset.coffee":7}],5:[function(r,n,e){var o=function(e,t){for(var i in t){if(v.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},v={}.hasOwnProperty;(function(){var e,t,k,i,_;e=r("./button_base.coffee").Button;_=r("../global.coffee").isMobile();i=r("../global.coffee")._ullog;k=r("../utils/jq.coffee")._jq;t=function(e){o(ButtonCustom,e);ButtonCustom.prototype.element_id="userlikeCustomTab";function ButtonCustom(e){var t,i,r;if(e==null){e={}}this.addCallback("userlikeButtonHandler");t=(i=this.el().attributes.getNamedItem("data-callback"))!=null?i.value:void 0;this.replaceCallbacks(t);this.callback_badge=(r=this.el().attributes.getNamedItem("data-callback-badge"))!=null?r.value:void 0;ButtonCustom.__super__.constructor.call(this,e)}ButtonCustom.prototype.show=function(){this.display_state=this.show;return this.triggerCallbacks(true)};ButtonCustom.prototype.hide=function(){this.display_state=this.hide;return this.triggerCallbacks(false)};ButtonCustom.prototype.setBadge=function(e){var t;i("ButtonCustom:setBadge count="+e+" callback="+this.callback_badge);t=window[this.callback_badge];if(typeof t==="function"){return t(e)}};ButtonCustom.prototype.popupPosition=function(){var e,t,i,r,n,o,s,a,u,l,c,p,f,h,d,m,g;if(_){return this.posMobile}a=15;i=document.getElementById("userlikeCustomTab");e=k(i);r=e.data();p=(r!=null?r.position:void 0)||"window";l="center";if((r!=null?r.orientation:void 0)!=null){l=r!=null?r.orientation:void 0}else if((r!=null?r.left:void 0)||(r!=null?r.right:void 0)||(r!=null?r.bottom:void 0)||(r!=null?r.top:void 0)){l=null}g=e.outerWidth();n=e.outerHeight();u=e.offset();c={top:"auto",right:"auto",bottom:"auto",left:"auto"};if(p==="window"){c.position="fixed";if(l==="bottomLeft"){s=r.left||"0";t=r.bottom||"0";c.left=s+"px";c.bottom=t+"px"}else if(l==="bottomRight"){f=r.right||"0";t=r.bottom||"0";c.right=f+"px";c.bottom=t+"px"}else if(l==="top"){m=r.top||"0";c.top=m+"px";c.left=Math.max(0,(document.documentElement.clientWidth-k("#userlike-popup").width())/2)+"px"}else if(l==="topRight"){f=r.right||"0";m=r.top||"0";c.right=f+"px";c.top=m+"px"}else if(l==="topLeft"){s=r.left||"0";m=r.top||"0";c.left=s+"px";c.top=m+"px"}else if(l==="bottom"){t=r.bottom||"0";c.left=Math.max(0,(document.documentElement.clientWidth-k("#userlike-popup").width())/2)+"px";c.bottom=t+"px"}else if(l==="left"){s=r.left||"0";c.top=Math.max(0,(document.documentElement.clientHeight-k("#userlike-popup").height())/2)+"px";c.left=s+"px"}else if(l==="right"){f=r.right||"0";c.top=Math.max(0,(document.documentElement.clientHeight-k("#userlike-popup").height())/2)+"px";c.right=f+"px"}else if(l==="center"){c.top=Math.max(0,(document.documentElement.clientHeight-k("#userlike-popup").height())/2)+"px";c.left=Math.max(0,(document.documentElement.clientWidth-k("#userlike-popup").width())/2)+"px"}else{for(o in c){if(!v.call(c,o))continue;if(r[o]){c[o]=r[o]+"px"}}}}if(p==="button"){c.position="absolute";if(e.css("position")==="fixed"){d=document.body.scrollTop;h=document.body.scrollLeft}else{d=0;h=0}if(l==="left"){c.top=u.top-d+"px";c.left=u.left+g+a-h+"px"}else if(l==="right"){c.top=u.top-d+"px";c.left=u.left-k("#userlike-popup").width()-a-h+"px"}else if(l==="topLeft"){c.top=u.top+n+a-d+"px";c.left=u.left-h+"px"}else if(l==="topRight"){c.top=u.top+n+a-d+"px";c.left=u.left-k("#userlike-popup").width()-h+"px"}else if(l==="bottomLeft"){c.left=u.left-h+"px";c.bottom=document.documentElement.clientHeight-u.top+a+d+"px"}else if(l==="bottomRight"){c.left=u.left-k("#userlike-popup").width()+"px";c.bottom=document.documentElement.clientHeight-u.top+a+d+"px"}else if(l==="center"){c.top=Math.max(0,(document.documentElement.clientHeight-k("#userlike-popup").height())/2)+"px";c.left=Math.max(0,(document.documentElement.clientWidth-k("#userlike-popup").width())/2)+"px"}else{c.top=u.top-k("#userlike-popup").height()-a;c.left=u.left}}return c};return ButtonCustom}(e);return n.exports.ButtonCustom=t})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./button_base.coffee":2}],6:[function(o,s,e){var a=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var t,i,r,e,n;n=o("../views/view.coffee").View;r=o("./button_custom.coffee").ButtonCustom;i=o("./button_bubble.coffee").ButtonBubble;t=o("./button_big.coffee").ButtonBig;e=function(e){a(ButtonFactory,e);function ButtonFactory(){return ButtonFactory.__super__.constructor.apply(this,arguments)}ButtonFactory.prototype.makeButton=function(){if(document.getElementById("userlikeCustomTab")){return new r({config:this.config})}else if(this.config.theme.button_style==="bubble"){return new i({config:this.config})}else{return new t({config:this.config})}};return ButtonFactory}(n);return s.exports.ButtonFactory=e})()},{"../views/view.coffee":55,"./button_big.coffee":3,"./button_bubble.coffee":4,"./button_custom.coffee":5}],7:[function(n,o,e){var a=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,s,i,r;e=n("./button_base.coffee").Button;r=n("../global.coffee").isMobile();i=n("../utils/utils.coffee").has_css_animation_support;s=n("../utils/jq.coffee")._jq;t=function(e){a(ButtonPreset,e);ButtonPreset.prototype.text_el=null;ButtonPreset.prototype["class"]="";function ButtonPreset(e){if(e==null){e={}}this.addCallback("userlikeButtonHandler");ButtonPreset.__super__.constructor.call(this,e);if(this.config.state==="offline"){this.changeToOfflineText()}else{this.changeToOnlineText()}}ButtonPreset.prototype.onButtonClick=function(){this.showSpinner();return ButtonPreset.__super__.onButtonClick.call(this)};ButtonPreset.prototype.showSpinner=function(){if(!i){return}s(this.el()).find(".userlike-symbol").css("display","none").importize();return s(this.el()).find(".userlike-button-spinner").css("display","block").importize()};ButtonPreset.prototype.hideSpinner=function(){if(!i){return}s(this.el()).find(".userlike-symbol").css("display","inline-block").importize();return s(this.el()).find(".userlike-button-spinner").css("display","none").importize()};ButtonPreset.prototype.changeToOfflineText=function(){this.state="offline";this.label=this.config.tab_text_offline;this.icon=this.config.theme.button_symbol_offline;this.update();return this.fadeOutEyecatcher()};ButtonPreset.prototype.changeToOnlineText=function(){this.state="online";this.icon=this.config.theme.button_symbol_online;this.label=this.config.tab_text_label;return this.update()};ButtonPreset.prototype.setClasses=function(){return s(this.el()).removeClass("userlike-left").removeClass("userlike-right").addClass("userlike-"+this.config.theme.button_orientation).addClass(this["class"])};ButtonPreset.prototype.setIcon=function(){var e,t;t=function(o){return function(){var e,t,i,r,n;n=[];for(e=t=1;t<=6;e=++t){r="userlike-button-0"+e;i="userlike-button-offline-0"+e;s(o.el()).find("#userlike-button-symbol .userlike-symbol").removeClass(r).removeClass(i);n.push(s(o.el()).removeClass(r).removeClass(i))}return n}}(this);e=function(i){return function(){var e,t;if(i.icon!=null){e=i.icon.replace(/_/g,"-");t="userlike-"+e;s(i.el()).find("#userlike-button-symbol .userlike-symbol").addClass(t);return s(i.el()).addClass(t)}}}(this);t();return e()};ButtonPreset.prototype.setText=function(){this.highlightText(this.text_el,this.label);return s(this.text_el).text(this.label)};ButtonPreset.prototype.update=function(){if(!this.el()){return}this.setClasses();this.setText();this.setIcon();return this.setOffset()};ButtonPreset.prototype.setOffline=function(){this.changeToOfflineText();return this.update()};ButtonPreset.prototype.setOnline=function(){this.changeToOnlineText();return this.update()};ButtonPreset.prototype.setOffset=function(){var e;if(this.config.theme.button_offset_x){e=s(this.el());e.css({left:"auto",right:"auto"});return e.css(this.config.theme.button_orientation,this.config.theme.button_offset_x+"%")}};ButtonPreset.prototype.resetTop=function(){var e;e=s(this.el());return e.css({top:"auto"})};ButtonPreset.prototype.delayProactive=function(){return 3};ButtonPreset.prototype.slide=function(e){if(e==null){e=0}return setTimeout(function(e){return function(){s(e.el()).addClass("userlike-slideup");return e.triggerCallbacks(true)}}(this),e)};ButtonPreset.prototype.slideOut=function(){return s(this.el()).removeClass("userlike-slideup")};ButtonPreset.prototype.popupPosition=function(){var e;if(r){e=this.posMobile}else if(this.config.theme.button_orientation==="left"){e={top:"auto",left:0,right:"auto",bottom:0}}else if(this.config.theme.button_orientation==="right"){e={top:"auto",right:0,left:"auto",bottom:0}}return e};ButtonPreset.prototype.clear=function(){this.hideSpinner();return ButtonPreset.__super__.clear.call(this)};ButtonPreset.prototype.destroy=function(){ButtonPreset.__super__.destroy.call(this);return s(this.el()).removeClass(this["class"])};return ButtonPreset}(e);return o.exports.ButtonPreset=t})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./button_base.coffee":2}],8:[function(r,n,e){var o={}.hasOwnProperty;(function(){var e,t,a,u,l,i,c,p;p=r("./utils/utils.coffee").queryString;i=r("./global.coffee");u=i.get;c=i.isDebugEnabled;a=i._ullog;l=i.getGitVersion();t=i.UserlikeLS;e=function(){function Config(e,t,i){var r,n,o;this.app_key=e;this.widget_key=t;a("Config::ctor: version="+l+" config=%o ",i);this.set(i);if(((o=u("userlike"))!=null?o.config:void 0)!=null){this.set(u("userlike").config)}try{if(c()){n=p();a("Config::ctor: qs=%o ",n);this.set(n)}}catch(s){r=s;a("Config::ctor: could not parse qs ",r)}}Config.prototype.set=function(e){var t,i,r;i=[];for(t in e){if(!o.call(e,t))continue;r=e[t];i.push(this[t]=r)}return i};return Config}();return n.exports.Config=e})()},{"./global.coffee":13,"./utils/utils.coffee":36}],9:[function(n,s,e){var a=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var t,e,i,o,r;i=n("./views/view.coffee").View;r=n("./global.coffee").get;o=n("./utils/jq.coffee")._jq;t="#userlike-eyecatcher-message {\n    font-family: '{{FONT}}', Sans-Serif;\n}";e=function(e){a(Eyecatcher,e);function Eyecatcher(){return Eyecatcher.__super__.constructor.apply(this,arguments)}Eyecatcher.prototype.eyecatcherTimer=null;Eyecatcher.prototype.el=function(){return document.getElementById("userlike-eyecatcher")};Eyecatcher.prototype.elClose=function(){return document.getElementById("userlike-eyecatcher-close")};Eyecatcher.prototype.registerEvents=function(){var e,t;if((e=this.elClose())!=null){e.onclick=function(t){return function(e){e.stopPropagation();t.hide();return false}}(this)}return(t=this.el())!=null?t.onclick=function(e){return function(){e.hide();r("fsm").event("chatButton");return false}}(this):void 0};Eyecatcher.prototype.render=function(){var e;this.registerEvents();this.setClasses();this.setText();this.setPicture();e=t;e=e.replace("{{FONT}}",r("font").get());return e};Eyecatcher.prototype.setClasses=function(){var e;return e=o("#userlike-eyecatcher").removeClass("left").removeClass("right").removeClass("eyecatcher-01").removeClass("eyecatcher-02").removeClass("eyecatcher-03").addClass(this.config.theme.button_orientation).addClass(this.config.eyecatcher_type)};Eyecatcher.prototype.setText=function(){this.highlightText("#userlike-eyecatcher-message",this.config.eyecatcher_message);return o("#userlike-eyecatcher-message").css("font-family",r("font").get()+", Sans-Serif;").text(this.config.eyecatcher_message)};Eyecatcher.prototype.setOffset=function(){var e;e=o(this.el());e.css({left:"auto",right:"auto"});return e.css(this.config.theme.button_orientation,this.config.theme.button_offset_x+"%")};Eyecatcher.prototype.setPicture=function(){return o("#userlike-eyecatcher-picture").css("background-image","url(//"+this.config.eyecatcher_picture_url+")")};Eyecatcher.prototype.setWidth=function(){var e;e=o("#userlike-tab").outerWidth();o("#userlike-eyecatcher").width(e);return o("#userlike-eyecatcher-box").width(e)};Eyecatcher.prototype.show=function(i){var r,n;if(i==null){i=3e3}clearTimeout(this.eyecatcherTimer);this.setText();n=100;r=function(t){return function(){var e;e=t.el();if(e){return t.eyecatcherTimer=setTimeout(function(){t.setWidth();o(e).css("display","block");return o(e).addClass("fadeIn")},i)}else if(n--){return t.eyecatcherTimer=setTimeout(r,100)}}}(this);return r()};Eyecatcher.prototype.hide=function(){var e;clearTimeout(this.eyecatcherTimer);e=this.el();o(e).removeClass("fadeIn");return setTimeout(function(){return o(e).css("display","none")},200)};return Eyecatcher}(i);return s.exports={CSS_EYECATCHER:t,Eyecatcher:e}})()},{"./global.coffee":13,"./utils/jq.coffee":31,"./views/view.coffee":55}],10:[function(t,i,e){(function(){var e,a,u,l;l=t("./global.coffee").get;u=t("./global.coffee")._ullog;a=t("./utils/jq.coffee")._jq;e=function(){function FeedbackAndRating(e,t){this.rating_view=e;this.feedback_view=t}FeedbackAndRating.prototype.send=function(e,t){var i,r,n,o,s;i=l("config");n=l("session");o=l("tracking_event");if(this.rating_view.isValid()){o.trigger("rating_submit")}if(this.feedback_view.isValid()){o.trigger("feedback_submit")}s="https://api.userlike.com/api/client/feedback/";u("FeedbackAndRating::send "+s);r={operator_id:n.get("operator_id"),customer_id:i.customer_id,chat_meta_id:n.get("chat_meta_id"),session_id:n.get("id")};if(this.feedback_view.isValid()){r.feedback_message=this.feedback_view.getFeedback()}if(this.rating_view.isValid()){r.rating=this.rating_view.getRating()}return a.ajaxJsonp({url:s,data:r,error:function(e){return u("FeedbackAndRating::sendError "+e)},success:function(e){return u("FeedbackAndRating::sendSuccess "+e)}})};return FeedbackAndRating}();return i.exports.FeedbackAndRating=e})()},{"./global.coffee":13,"./utils/jq.coffee":31}],11:[function(i,r,e){(function(){var a,e,u,l,c,t;t=i("./global.coffee");c=t.get;l=t._ullog;a="https://dq4irj27fs462.cloudfront.net/javascripts/webfontloader-production-2014.min.js";u="https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";return r.exports.Font=e=function(){function Font(e){var t,i;e=c("config");if(((t=e.theme.font_custom)!=null?t.length:void 0)>0){this.is_custom=true;this.needs_loading=false;this.font=e.theme.font_custom.split(":")[0]}else{this.is_custom=false;this.needs_loading=true;this.font=e.theme.font.split(":")[0];if((i=this.font)==="sans-serif"||i==="serif"){this.needs_loading=false}}l("Font:ctor font="+this.font+" is_custom="+this.is_custom+" needs_loading="+this.needs_loading)}Font.prototype.load=function(e){var t,i,r,n,o;if(this.needs_loading){n={google:{families:[this.font]}};try{l("Font::load font="+this.font+", loader=DOM");i=c("is_amd_loader")?a:u;window.WebFontConfig=n;o=document.createElement("script");o.src=i;o.type="text/javascript";o.async="true";r=document.getElementsByTagName("script")[0];return r.parentNode.insertBefore(o,r)}catch(s){t=s;return l("Font::load Error loading font="+this.font,t)}}};Font.prototype.get=function(){return this.font};return Font}()})()},{"./global.coffee":13}],12:[function(Ji,Qi,e){var Ki=function(e,t){for(var i in t){if(Yi.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},Yi={}.hasOwnProperty,Xi=function(e,t){return function(){return e.apply(t,arguments)}},$i=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++){if(t in this&&this[t]===e)return t}return-1};(function(){var t,i,r,n,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,e,b,y,w,x,C,S,P,B,A,T,O,M,E,j,R,F,I,V,q,D,z,U,L,N,W,H,G,J,Q,K,Y,X,$,Z,ee,te,ie,re,ne,oe,se,ae,ue,le,ce,pe,fe,he,de,me,ge,ke,_e,ve,be,ye,we,xe,Ce,Se,Pe,Be,Ae,Te,Oe,Me,Ee,je,Re,Fe,Ie,Ve,qe,De,ze,Ue,Le,Ne,We,He,Ge,Je,Qe,Ke,Ye,Xe,$e,Ze,et,tt,it,rt,nt,ot,st,at,ut,lt,ct,pt,ft,ht,dt,mt,gt,kt,_t,vt,bt,yt,wt,xt,Ct,St,Pt,Bt,At,Tt,Ot,Mt,Et,jt,Rt,Ft,It,Vt,qt,Dt,zt,Ut,Lt,Nt,Wt,Ht,Gt,Jt,Qt,Kt,Yt,Xt,$t,Zt,ei,ti,ii,ri,ni,oi,si,ai,ui,li,ci,pi,fi,hi,di,mi,gi,ki,_i,vi,bi,yi,wi,xi,Ci,Si,Pi,Bi,Ai,Ti,Oi,Mi,Ei,ji,Ri,Fi,Ii,Vi,qi,Di,zi,Ui,Li,Ni,Wi,Hi,Gi;Fi=function(){return Ji("./global.coffee").get("CONTEXT")};re=Ji("./config.coffee").Config;_e=Ji("./font.coffee").Font;ji=Ji("./session.coffee").cookieCleanup;Ii=Ji("./session.coffee").getCookieSupport;Di=Ji("./session.coffee").getStorageSupport;qi=Ji("./session.coffee").getStateData;Ui=Ji("./utils/utils.coffee").hasIconFontSupport;Hi=Ji("./utils/utils.coffee").setIconClassByColor;Gi=Ji("./utils/utils.coffee").stripTag;Wi=Ji("./utils/utils.coffee").mergeObjects;Mi=Ji("./utils/jq.coffee")._jq;zi=Ji("./global.coffee");Ri=zi.get;Ei=zi._ullog;Ni=zi.isMobile();Li=zi.is_amd_loader;Vi=function(){return Ri("preview")};Ae=Ji("./utils/loader.coffee").Loader;Te=Ji("./utils/message_parser.coffee").MessageParser;Pi=Ji("./utils/validator.coffee").Validator;Qt=Ji("./session.coffee").SessionFactory;s=Ji("./buttons/button_factory.coffee").ButtonFactory;pi=Ji("./utils/sound.coffee").SoundFactory;vi=Ji("./tracking.coffee").TrackingFactory;_i=Ji("./tracking.coffee").TrackingEvent;Ai=Ji("./goal.coffee").WidgetGoal;Lt=Ji("./router.coffee").Router;Zt=Ji("./slot.coffee").Slot;Xe=Ji("./popup.coffee").Popup;di=Ji("./survey.coffee").Survey;vt=Ji("./push.coffee").Push;me=Ji("./feedback_and_rating.coffee").FeedbackAndRating;_t=Ji("./views/progress.coffee").ProgressView;Ce=Ji("./views/idle.coffee").IdleView;Oe=Ji("./views/message.coffee").MessageView;ue=Ji("./views/disclaimer.coffee").DisclaimerView;Le=Ji("./views/offline_message.coffee").OfflineMessageView;Pt=Ji("./views/register.coffee").RegisterView;we=Ji("./views/group_select.coffee").GroupSelectView;z=Ji("./views/chat.coffee").ChatView;wi=Ji("./views/transcript.coffee").TranscriptView;mi=Ji("./views/survey.coffee").SurveyView;bt=Ji("./views/rating.coffee").RatingView;ke=Ji("./views/feedback.coffee").FeedbackView;ge=Ji("./views/feedback_rating_composite.coffee").FeedbackRatingCompositeView;li=Ji("./views/social_composite.coffee").SocialCompositeView;Ci=Ji("./views/twitter.coffee").TwitterView;de=Ji("./views/facebook.coffee").FacebookView;Wt=Ji("./screenshot.coffee").Screenshot;zi.setJsonpCallback("userlikeCallbackAvailableCheck",function(e){Ei("message="+(e!=null?e.message:void 0));Ri("slot").setCache(e);if(e.message==="GROUP_ONLINE"){return Ri("fsm").event("groupAvailable",e)}else{return Ri("fsm").event("groupUnavailable")}});zi.setJsonpCallback("userlikeCallbackButtonCheck",function(e){Ei("message="+(e!=null?e.message:void 0));Ri("slot").setCache(e);if(e.message==="GROUP_ONLINE"){return Ri("fsm").event("groupAvailable")}else{Ri("session").set("in_service_time",e.in_service_time?1:0);if(e.in_service_time&&Ri("config").offline_mode==="chatbutler"&&!Ri("config").hide_button){return Ri("fsm").event("groupAvailable")}else{return Ri("fsm").event("groupUnavailable")}}});zi.setJsonpCallback("userlikeCallbackProactiveSlotCheck",function(e){if(e.operator!=null){return Ri("fsm").event("slotAvailable",e)}else{return Ri("fsm").event("slotUnavailable",e)}});zi.setJsonpCallback("userlikeCallbackPassiveConnectSlotCheck",function(e){if(e.operator!=null){return Ri("fsm").event("slotAvailable",e)}else{return Ri("fsm").event("slotUnavailable",e)}});fe=function(){function FSM(){this.state=new Se;this.freeze=false;this.event_queue=[]}FSM.prototype.start=function(e){return this.next(fi,e)};FSM.prototype.next=function(t,i){this.freeze=true;return this.state.leave(function(e){return function(){e.state.persist();return e.state.transitionOut(function(){Ei("FSM::next:  "+e.state.getName()+" -> "+t.getName());delete e.state;e.state=new t;e.state.persist();return e.state.transitionIn(function(){e.freeze=false;return e.state.enter(i)})})}}(this))};FSM.prototype.event=function(e,t){if(this.state[e]!=null&&typeof this.state[e]==="function"){if(this.freeze){if(t){Ei("FSM::event: Frozen "+this.state.getName()+":"+e+" data=",JSON.stringify(t))}else{Ei("FSM::event: Frozen "+this.state.getName()+":"+e)}return this.queue(e,t)}else{if(e!=="persist"){if(t){Ei("FSM::event: Event "+this.state.getName()+":"+e+" data=",JSON.stringify(t))}else{Ei("FSM::event: Event "+this.state.getName()+":"+e)}}return this.state[e](t)}}else{return Ei("FSM::event: Unhandled "+this.state.getName()+":"+e)}};FSM.prototype.signal=function(t,i){if(this.state[t]!=null&&typeof this.state[t]==="function"){if(!this.freeze){Ei("FSM::signal: Signal "+this.state.getName()+":"+t);return this.state[t](i)}else{return setTimeout(function(e){return function(){Ei("FSM::signal: Frozen "+e.state.getName()+":"+t);return e.signal(t,i)}}(this),200)}}else{return Ei("FSM::event: Unhandled "+this.state.getName()+":"+t)}};FSM.prototype.queue=function(e,t){Ei("FSM::queue: Event "+this.state.getName()+":"+e);return this.event_queue.push([e,t])};FSM.prototype.unshift=function(e,t){Ei("FSM::unshift: Event "+this.state.getName()+":"+e);return this.event_queue.unshift([e,t])};FSM.prototype.poll=function(){var e,t,i,r;r=[];while(this.event_queue.length){t=this.event_queue.shift();i=t[0];e=t[1];if(this.state[i]!=null&&typeof this.state[i]==="function"){Ei("FSM::poll: Event "+this.state.getName()+":"+i);this.state[i](e)}else{Ei("FSM::poll: Unhandled "+this.state.getName()+":"+i);r.push(t)}}return this.event_queue=r};FSM.prototype.reset=function(){Ei("FSM::reset: remove "+this.event_queue.length+" events");return this.event_queue=[]};return FSM}();hi=function(){State.timeout=4e3;State.timeout_load_script=2e3;State.timeout_connect=1e4;State.timeout_slot_create=3e4;State.timeout_offsite=1e5;State.timeout_persist=5e3;State.timeout_screenshot=3e4;State.timeout_disconnected=3e4;State.timeout_hibernate=8e4;function State(){}State.prototype.leave=function(e){clearTimeout(this.timer);return e()};State.prototype.enter=function(){};State.prototype.persist=function(){};State.prototype.transitionIn=function(e){return e()};State.prototype.transitionOut=function(e){return e()};State.prototype.getName=function(){var e;e=/function ([^(]+)/.exec(this.constructor.toString());if((e!=null?e.length:void 0)>1){return e[1]}else{return""}};State.getName=function(){var e;e=/function ([^(]+)/.exec(this.toString());if((e!=null?e.length:void 0)>1){return e[1]}else{return""}};return State}();Se=function(e){Ki(Init,e);function Init(){return Init.__super__.constructor.apply(this,arguments)}return Init}(hi);fi=function(e){Ki(Start,e);function Start(){return Start.__super__.constructor.apply(this,arguments)}Start.prototype.enter=function(e){return Ri("fsm").next(N,e)};return Start}(hi);N=function(e){Ki(CheckExtenalLibrarys,e);function CheckExtenalLibrarys(){return CheckExtenalLibrarys.__super__.constructor.apply(this,arguments)}CheckExtenalLibrarys.prototype.enter=function(i){var e,t,r,n,o,s,a;a=typeof Turbolinks!=="undefined"&&Turbolinks!==null?Turbolinks.supported:void 0;if(a){Ei("####################################################################");Ei("# INFO: found Turbolinks ");Ei("####################################################################");s="turbolinks:load";n=function(e){return Ri("fsm").next(Z,i)};o=function(){return document.removeEventListener(s,n)};e=function(){return document.addEventListener(s,n)};o();e()}r=new RegExp(/iPhone|iPad/).test(navigator.userAgent);if(r){t=function(){var e,t;e=!document.hidden;if(e){Ei("Restoring state after document gets visible for iOS devices ");return Ri("fsm").next(zt,i)}else{Ei("Disconnecting on iOS devices because tab is invisible");return(t=Ri("slot"))!=null?t.disconnect():void 0}};Ei("Registering visibilitychange handler on iOS devices");document.addEventListener("visibilitychange",t,false)}return Ri("fsm").next(Z,i)};return CheckExtenalLibrarys}(hi);Z=function(e){Ki(CheckScriptPosition,e);function CheckScriptPosition(){return CheckScriptPosition.__super__.constructor.apply(this,arguments)}CheckScriptPosition.prototype.enter=function(e){var t,i,r,n,o,s;s=document.getElementsByTagName("script");try{for(i in s){if(!Yi.call(s,i))continue;o=s[i];if(!Li){if((typeof o.getAttribute==="function"?(r=o.getAttribute("src"))!=null?r.indexOf("userlike-cdn-widgets"):void 0:void 0)>-1){if(((n=o.parentElement)!=null?n.nodeName:void 0)==="HEAD"){Ei("####################################################################");Ei("# WARNING: The Userlike script should not be included in the header");Ei("####################################################################")}}}}}catch(a){t=a;Ei("Error checking script postion")}return Ri("fsm").next(Nt,e)};return CheckScriptPosition}(hi);Nt=function(e){Ki(RouterConfigSetup,e);function RouterConfigSetup(){return RouterConfigSetup.__super__.constructor.apply(this,arguments)}RouterConfigSetup.prototype.enter=function(e){var t,i;if((t=e.config)!=null?t.is_router:void 0){Ei("Routing mode enabled");i=new Lt(e.config);return i.resolve()}else{if(e.router!=null){Ei("Merging router config");Wi(e.config,e.router)}return Ri("fsm").next(ne,e)}};return RouterConfigSetup}(hi);ne=function(e){Ki(ConfigSetup,e);function ConfigSetup(){return ConfigSetup.__super__.constructor.apply(this,arguments)}ConfigSetup.prototype.enter=function(e){var t;t=new re(e.app_key,e.widget_key,e.config);zi.set("config",t);if(t.locale!=null){Te.setLocale(t.locale)}ji();return Ri("fsm").next(ve)};return ConfigSetup}(hi);ve=function(e){Ki(FontLoader,e);function FontLoader(){return FontLoader.__super__.constructor.apply(this,arguments)}FontLoader.prototype.enter=function(){var e;e=new _e(Ri("config"));zi.set("font",e);e.load();return Ri("fsm").next(Kt)};return FontLoader}(hi);Kt=function(e){Ki(SessionSetup,e);function SessionSetup(){return SessionSetup.__super__.constructor.apply(this,arguments)}SessionSetup.prototype.enter=function(){var e;zi.set("slot",new Zt);e=(new Qt).get();zi.set("session",e);return Ri("fsm").next(Pe)};return SessionSetup}(hi);Pe=function(e){Ki(InjectDebugConfig,e);function InjectDebugConfig(){return InjectDebugConfig.__super__.constructor.apply(this,arguments)}InjectDebugConfig.prototype.enter=function(){var e;e=Ri("session").get("inject");if(e){return Ri("fsm").event("inject",JSON.parse(e))}else{return Ri("fsm").next(je)}};InjectDebugConfig.prototype.inject=function(e){var t;t=new re(e.app_key,e.widget_key,e);return Ri("fsm").next(je)};return InjectDebugConfig}(hi);je=function(e){Ki(NoStateCheck,e);function NoStateCheck(){return NoStateCheck.__super__.constructor.apply(this,arguments)}NoStateCheck.prototype.enter=function(){var e;e=Ri("userlike");if((e!=null?e.nostate:void 0)!=null&&e.nostate){Ei("###################################################################");Ei("WARNING: Widget in nostate mode. Sessions don't persist on page change");Ei("###################################################################");return Ri("fsm").next(Tt)}else{return Ri("fsm").next(Oi)}};return NoStateCheck}(hi);Tt=function(e){Ki(ResetState,e);function ResetState(){return ResetState.__super__.constructor.apply(this,arguments)}ResetState.prototype.enter=function(){Ri("session").reset();return Ri("fsm").next(Oi)};return ResetState}(hi);Oi=function(e){Ki(WidgetVerify,e);function WidgetVerify(){return WidgetVerify.__super__.constructor.apply(this,arguments)}WidgetVerify.prototype.enter=function(){var e,t,i,r;r=Ri("session");e=Ri("config");if(r.isActive()){t=r.getConfig();Ei("WidgetVerify current="+e.widget_key+" stored="+(t!=null?t.widget_key:void 0));if(t&&t.widget_key!==e.widget_key&&t.config&&t.app_key){try{Ei("###################################################################");Ei("INFO: Using presisted config");Ei("###################################################################");Ri("fsm").next(ne,t);return}catch(n){i=n;Ei("Error getting original config")}}}return Ri("fsm").next(Yt)};return WidgetVerify}(hi);Yt=function(e){Ki(Setup,e);function Setup(){return Setup.__super__.constructor.apply(this,arguments)}Setup.prototype.enter=function(){zi.set("button",(new s).makeButton());zi.set("goal",new Ai);zi.set("popup",new Xe);zi.set("progress_view",new _t);zi.set("idle_view",new Ce);zi.set("message_view",new Oe);zi.set("disclaimer_view",new ue);zi.set("offline_message_view",new Le);zi.set("register_view",new Pt);zi.set("group_select_view",new we);zi.set("chat_view",new z);zi.set("transcript_view",new wi);zi.set("survey_view",new mi);zi.set("rating_view",new bt);zi.set("feedback_view",new ke);zi.set("feedback_rating_composite_view",new ge);zi.set("social_composite_view",new li);zi.set("twitter_view",new Ci);zi.set("facebook_view",new de);zi.set("tracking",(new vi).get());zi.set("tracking_event",new _i);zi.set("sound",(new pi).get());return Ri("fsm").next(oe)};return Setup}(hi);oe=function(e){Ki(CustomCSS,e);function CustomCSS(){return CustomCSS.__super__.constructor.apply(this,arguments)}CustomCSS.prototype.enter=function(){var e,t;e=Ri("config");if(e.custom_css!=null&&e.custom_css.length>0){t=document.createElement("style");t.type="text/css";if(t.styleSheet){t.styleSheet.cssText=e.custom_css}else{t.appendChild(document.createTextNode(e.custom_css))}document.getElementsByTagName("head")[0].appendChild(t)}return Ri("fsm").next(i)};return CustomCSS}(hi);i=function(e){Ki(BlockedCheck,e);function BlockedCheck(){return BlockedCheck.__super__.constructor.apply(this,arguments)}BlockedCheck.prototype.enter=function(){if(Ri("session").get("blocked")){return Ri("fsm").next(t)}else{return Ri("fsm").next(W)}};return BlockedCheck}(hi);W=function(e){Ki(CheckMobileDevice,e);function CheckMobileDevice(){return CheckMobileDevice.__super__.constructor.apply(this,arguments)}CheckMobileDevice.prototype.enter=function(){if(Ni&&Ri("config").mobile_mode==="disabled"){Ri("button").hide();return Ei("Disabled on mobile devices")}else{return Ri("fsm").next(Be)}};return CheckMobileDevice}(hi);Be=function(e){Ki(LoadLib,e);function LoadLib(){return LoadLib.__super__.constructor.apply(this,arguments)}LoadLib.prototype.enter=function(){return Ae.loadLib(function(){return Ri("fsm").next(At)})};return LoadLib}(hi);At=function(e){Ki(RemoteControlCheck,e);function RemoteControlCheck(){return RemoteControlCheck.__super__.constructor.apply(this,arguments)}RemoteControlCheck.prototype.enter=function(){var e;e=Ri("session").getState();if(e==="Chat"||e==="ChatMinimized"||(e!=null?e.match(/^ChatButler/):void 0)){return Ri("fsm").next(Ti)}else if(Ri("config").mode_remote){return Ri("fsm").next(Bt)}else{return Ri("fsm").next(n)}};return RemoteControlCheck}(hi);Bt=function(e){Ki(RemoteApiMode,e);function RemoteApiMode(){return RemoteApiMode.__super__.constructor.apply(this,arguments)}RemoteApiMode.prototype.enter=function(){var e;e=Ri("userlikeRemoteReady");if(typeof e==="function"){return e()}};RemoteApiMode.prototype.reset=function(){return Ri("session").reset()};RemoteApiMode.prototype.normal=function(){return Ri("fsm").next(n)};RemoteApiMode.prototype.register=function(){var e;e=Ri("config");e.mode_registration=true;e.mode_proactive=false;e.mode_proactive_registration=false;return Ri("fsm").next(n)};RemoteApiMode.prototype.proactive_passive=function(e){var t;t=Ri("config");t.mode_proactive_registration=false;t.mode_registration=false;t.mode_proactive=true;t.proactive_passive_connect=true;if(e.message){t.proactive_message=e.message}if(e.timeout){t.proactive_timeout=e.timeout}return Ri("fsm").next(n)};RemoteApiMode.prototype.proactive_passive_register=function(e){var t;t=Ri("config");t.mode_proactive=false;t.mode_registration=false;t.mode_proactive_registration=true;t.proactive_passive_connect=true;if(e.message){t.proactive_message=e.message}if(e.timeout){t.proactive_timeout=e.timeout}return Ri("fsm").next(n)};return RemoteApiMode}(hi);t=function(e){Ki(Blocked,e);function Blocked(){return Blocked.__super__.constructor.apply(this,arguments)}return Blocked}(hi);n=function(e){Ki(ButtonCheck,e);function ButtonCheck(){return ButtonCheck.__super__.constructor.apply(this,arguments)}ButtonCheck.prototype.enter=function(){return Ri("slot").checkButton("userlikeCallbackButtonCheck")};ButtonCheck.prototype.groupAvailable=function(){return Ri("fsm").next(c)};ButtonCheck.prototype.groupUnavailable=function(){if(Ri("config").hide_button||Ri("config").hide_button_offhours&&!Ri("session").isInServiceTime()){return Ri("fsm").next(a)}else{return Ri("fsm").next(r)}};return ButtonCheck}(hi);r=function(e){Ki(ButtonChange,e);function ButtonChange(){return ButtonChange.__super__.constructor.apply(this,arguments)}ButtonChange.prototype.enter=function(){Ri("button").changeToOfflineText();return Ri("fsm").next(Ti)};return ButtonChange}(hi);c=function(e){Ki(ButtonShow,e);function ButtonShow(){return ButtonShow.__super__.constructor.apply(this,arguments)}ButtonShow.prototype.enter=function(){return Ri("fsm").next(Ti)};return ButtonShow}(hi);a=function(e){Ki(ButtonHidden,e);function ButtonHidden(){return ButtonHidden.__super__.constructor.apply(this,arguments)}ButtonHidden.prototype.enter=function(){Ri("tracking_event").trigger("button_hidden");Ri("button").hide();return Ri("fsm").next(u)};return ButtonHidden}(hi);Ti=function(e){Ki(WidgetInsert,e);function WidgetInsert(){return WidgetInsert.__super__.constructor.apply(this,arguments)}WidgetInsert.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout);return Ae.injectMarkup(function(e){if(e){return Ri("fsm").event("injectFailed")}else{return Ri("fsm").event("injectDone")}})};WidgetInsert.prototype.injectFailed=function(){return Ri("fsm").next(Xt)};WidgetInsert.prototype.injectDone=function(){return Ri("fsm").next($t)};WidgetInsert.prototype.timerFired=function(){return Ri("fsm").next(Xt)};WidgetInsert.prototype.leave=function(e){clearTimeout(this.timer);return e()};return WidgetInsert}(hi);u=function(e){Ki(ButtonHiddenWidgetInsert,e);function ButtonHiddenWidgetInsert(){return ButtonHiddenWidgetInsert.__super__.constructor.apply(this,arguments)}ButtonHiddenWidgetInsert.prototype.injectDone=function(){return Ri("fsm").next(o)};return ButtonHiddenWidgetInsert}(Ti);$t=function(e){Ki(SetupTheme,e);function SetupTheme(){return SetupTheme.__super__.constructor.apply(this,arguments)}SetupTheme.prototype.enter=function(){Ri("popup").setupTheme();return Ri("fsm").next(l)};return SetupTheme}(hi);l=function(e){Ki(ButtonInsert,e);function ButtonInsert(){return ButtonInsert.__super__.constructor.apply(this,arguments)}ButtonInsert.prototype.enter=function(){var e,t,i,r;Ri("button").render();e=!Ri("session").isActive();Ri("button").show(e);Ri("tracking_event").trigger("button_displayed");r=Mi("#userlike");if(Ni){r.addClass("userlike-mobile")}if(!Ui()){r.addClass("userlike-symbol-fallback");Hi(r,(t=Mi("#userlike-tab"))!=null?t.css("background-color"):void 0);Hi(Mi("#userlike-view-container"),(i=Mi("#userlike-popup"))!=null?i.css("background-color"):void 0)}if(window.Shopify!=null&&typeof window.doShift==="function"){zi.set("shopifyDoShift",window.doShift);window.doShift=function(){Ri("shopifyDoShift")();return Ri("button").resetTop()}}return Ri("fsm").next(o)};return ButtonInsert}(hi);o=function(e){Ki(ButtonEventSetup,e);function ButtonEventSetup(){return ButtonEventSetup.__super__.constructor.apply(this,arguments)}ButtonEventSetup.prototype.enter=function(){Ri("button").registerEvents();return Ri("fsm").next(Si)};return ButtonEventSetup}(hi);Xt=function(e){Ki(SetupError,e);function SetupError(){return SetupError.__super__.constructor.apply(this,arguments)}return SetupError}(hi);Si=function(e){Ki(UserlikeReady,e);function UserlikeReady(){return UserlikeReady.__super__.constructor.apply(this,arguments)}UserlikeReady.prototype.enter=function(){var e,t,i,r;i=typeof document.createEvent==="function"?document.createEvent("Event"):void 0;if(i!=null){i.initEvent("userlike-ready",true,true)}if(typeof document.dispatchEvent==="function"){document.dispatchEvent(i)}t=Ri("userlikeReady");if(typeof t==="function"){t()}e=Ri("config");r=e.transfer_tld_enabled;if(r){return Ri("fsm").next(Ut)}else{return Ri("fsm").next(zt)}};return UserlikeReady}(hi);Ut=function(e){Ki(RestoreStateCrossDomain,e);function RestoreStateCrossDomain(){this.getSession=Xi(this.getSession,this);return RestoreStateCrossDomain.__super__.constructor.apply(this,arguments)}RestoreStateCrossDomain.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_connect);return Ae.loadPostRobot(function(){var e;e=window.self!==window.top;if(e){return Ri("fsm").event("sendSession")}else{return Ri("fsm").event("getSession")}})};RestoreStateCrossDomain.prototype.chatButton=function(){Ri("fsm").next(xe);return Ri("fsm").event("chatButton")};RestoreStateCrossDomain.prototype.sendSession=function(){Ei("Sending session data to parentFrame");postRobot.sendToParent("getSession",{session:Ri("session").getCrossDomainSessionState()});return Ri("fsm").next(xe)};RestoreStateCrossDomain.prototype.getSession=function(){var e,t,i,r,n,o,s,a,u;e=Ri("config");u=e.transfer_tld_domains.split("\n");u=u.filter(function(e){return e!==window.location.href});t=(o=window.location.href,$i.call(u,o)>=0);if(t){Ri("fsm").next(xe);return}postRobot.on("getSession",function(e){var t,i,r,n;Ei("Recieved data from iFrame from: "+e.sourceDomain+" to: "+e.data);n=qi(e!=null?(t=e.data)!=null?(i=t.session)!=null?i.app_state:void 0:void 0:void 0);if((r=n.state)==="Chat"||r==="ChatMinimized"){clearTimeout(this.timer);Ri("session").setCrossDomainSessionState(e.data);return Ri("fsm").next(zt)}});n=function(e){var t;t=document.createElement("iframe");t.setAttribute("src",e);t.style.width="0";t.style.height="0";return document.body.appendChild(t)};s=[];for(i=0,r=u.length;i<r;i++){a=u[i];s.push(n(a))}return s};RestoreStateCrossDomain.prototype.timerFired=function(){Ei("Timeout in RestoreStateCrossDomain");return Ri("fsm").next(zt)};return RestoreStateCrossDomain}(hi);zt=function(e){Ki(RestoreState,e);function RestoreState(){return RestoreState.__super__.constructor.apply(this,arguments)}RestoreState.prototype.enter=function(){var e,t;e=Ri("config");t=Ri("session");if(t.get("uuid")&&t.get("chat_meta_id")){Ri("goal").check()}if(!Ii()||!Di()){return Ri("fsm").next(Me)}else if(t.isChatbutlerActive()){return Ri("fsm").next(_)}else if(t.isActive()){return Ri("fsm").next(jt)}else if(t.isRject()){return Ri("fsm").next(dt)}else if(t.isOffline()){return Ri("fsm").next(Re)}else if(e.mode_proactive||e.mode_proactive_registration){if(Ni&&e.mobile_mode==="noproactive"){Ei("Proactive is disabled on mobile devices");return Ri("fsm").next(xe)}else{return Ri("fsm").next(kt)}}else{return Ri("fsm").next(xe)}};return RestoreState}(hi);xe=function(e){Ki(Idle,e);function Idle(){return Idle.__super__.constructor.apply(this,arguments)}Idle.prototype.enter=function(){var e;e=Ri("session");e.reset();e.setState("Idle");return Ri("fsm").reset()};Idle.prototype.chatButton=function(){Ri("button").fadeOutEyecatcher();Ri("tracking_event").trigger("chat_requested");Ri("fsm").queue("slotRequest");return Ri("fsm").next(ie)};Idle.prototype.directRequest=function(e){Ri("tracking_event").trigger("chat_requested");Ri("fsm").queue("directRequest",{operator_id:e});return Ri("fsm").next(ie)};Idle.prototype.updateAPI=function(){return Ri("session").updateUserData()};return Idle}(hi);ie=function(e){Ki(CheckUserlikeObject,e);function CheckUserlikeObject(){return CheckUserlikeObject.__super__.constructor.apply(this,arguments)}CheckUserlikeObject.prototype.enter=function(){if(typeof window.userlike!=="object"){window.userlike={}}if(!window.userlike.moment||!window.userlike.userlikeIO){return Ae.loadLib(function(){return Ri("fsm").event("done")})}else{return Ri("fsm").event("done")}};CheckUserlikeObject.prototype.done=function(){return Ri("fsm").next(he)};return CheckUserlikeObject}(hi);Me=function(e){Ki(NoCookies,e);function NoCookies(){return NoCookies.__super__.constructor.apply(this,arguments)}NoCookies.prototype.chatButton=function(){Ri("button").fadeOutEyecatcher();return Ri("fsm").next(Ee)};NoCookies.prototype.directRequest=function(){return Ri("fsm").next(Ee)};return NoCookies}(xe);Ne=function(e){Ki(PageUnloading,e);function PageUnloading(){return PageUnloading.__super__.constructor.apply(this,arguments)}return PageUnloading}(hi);Re=function(e){Ki(Offline,e);function Offline(){return Offline.__super__.constructor.apply(this,arguments)}Offline.prototype.persist=function(){var e;e=Ri("session");e.reset();return e.setState("Offline")};return Offline}(xe);kt=function(e){Ki(ProactiveTimer,e);function ProactiveTimer(){return ProactiveTimer.__super__.constructor.apply(this,arguments)}ProactiveTimer.prototype.chatButton=function(){Ri("button").fadeOutEyecatcher();Ri("fsm").queue("slotRequest");return Ri("fsm").next(ie)};ProactiveTimer.prototype.directRequest=function(e){Ri("fsm").queue("directRequest",{operator_id:e});return Ri("fsm").next(ie)};ProactiveTimer.prototype.timerFired=function(){return Ri("fsm").next(lt)};ProactiveTimer.prototype.enter=function(){var e;e=parseInt(Ri("config").proactive_timeout)+parseInt(Ri("button").delayProactive());Ei("ProactiveTimer::enter delay="+e);return this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},e*1e3)};ProactiveTimer.prototype.leave=function(e){clearTimeout(this.timer);return e()};ProactiveTimer.prototype.updateAPI=function(){return Ri("session").updateUserData()};return ProactiveTimer}(hi);lt=function(e){Ki(ProactiveSlotCheck,e);function ProactiveSlotCheck(){return ProactiveSlotCheck.__super__.constructor.apply(this,arguments)}ProactiveSlotCheck.prototype.enter=function(){Ri("tracking_event").trigger("proactive_timer");this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout);return Ri("slot").checkProactive("userlikeCallbackProactiveSlotCheck")};ProactiveSlotCheck.prototype.slotAvailable=function(e){return Ri("fsm").next(ut,e)};ProactiveSlotCheck.prototype.slotUnavailable=function(e){return Ri("fsm").next(gt)};ProactiveSlotCheck.prototype.timerFired=function(){return Ri("fsm").next(xe)};ProactiveSlotCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ProactiveSlotCheck}(hi);gt=function(e){Ki(ProactiveSlotUnavailable,e);function ProactiveSlotUnavailable(){return ProactiveSlotUnavailable.__super__.constructor.apply(this,arguments)}ProactiveSlotUnavailable.prototype.enter=function(){Ri("tracking_event").trigger("proactive_unavailable");return Ri("fsm").next(xe)};return ProactiveSlotUnavailable}(hi);ut=function(e){Ki(ProactiveSlotAvailable,e);function ProactiveSlotAvailable(){return ProactiveSlotAvailable.__super__.constructor.apply(this,arguments)}ProactiveSlotAvailable.prototype.enter=function(e){return Ri("fsm").next(it,e)};return ProactiveSlotAvailable}(hi);it=function(e){Ki(ProactiveEventSetup,e);function ProactiveEventSetup(){return ProactiveEventSetup.__super__.constructor.apply(this,arguments)}ProactiveEventSetup.prototype.enter=function(e){Mi.windowOn("hashchange",function(){return Ri("fsm").event("hashchange",window.location.hash)});Mi.windowOn("unload",function(){return Ri("fsm").next(Ne)});(function(r){var n;n=r.pushState;r.pushState=function(e){var t;n.apply(r,arguments);try{Ei("Events::pushstate: href="+window.location.href+" url="+arguments[2]);return Ri("fsm").event("pushstate")}catch(i){t=i;return Ei("Events::pushstate: exception=",t)}}})(window.history);Ri("fsm").event("done",e);return Ri("sound").load()};ProactiveEventSetup.prototype.done=function(e){return Ri("fsm").next(rt,e)};return ProactiveEventSetup}(hi);rt=function(e){Ki(ProactiveOffer,e);function ProactiveOffer(){return ProactiveOffer.__super__.constructor.apply(this,arguments)}ProactiveOffer.prototype.enter=function(e){var t;t=Ri("config");if(Ni&&t.mobile_mode==="proactive_bubble"){return Ri("fsm").next(ct,e)}else{return Ri("fsm").next(ht,e)}};return ProactiveOffer}(hi);ct=function(e){Ki(ProactiveSlotOfferBubbleStart,e);function ProactiveSlotOfferBubbleStart(){return ProactiveSlotOfferBubbleStart.__super__.constructor.apply(this,arguments)}ProactiveSlotOfferBubbleStart.prototype.enter=function(e){var t;this.data=e;t=Ri("config");Ri("session").setOperator(e.operator);Ri("tracking").offerProactiveChat();Ri("tracking_event").trigger("proactive_offer");if(!(Ri("popup").isActive()&&Ri("config").audio_only_inactive)){Ri("sound").play("message_sent")}return Ri("button").setBadge(1)};ProactiveSlotOfferBubbleStart.prototype.chatButton=function(){return Ri("fsm").next(ft,this.data)};return ProactiveSlotOfferBubbleStart}(hi);ht=function(e){Ki(ProactiveSlotOfferPassiveStart,e);function ProactiveSlotOfferPassiveStart(){return ProactiveSlotOfferPassiveStart.__super__.constructor.apply(this,arguments)}ProactiveSlotOfferPassiveStart.prototype.enter=function(e){var t;t=Ri("config");Ri("session").setOperator(e.operator);Ri("tracking").offerProactiveChat();Ri("tracking_event").trigger("proactive_offer");return Ri("fsm").next(ft,e)};return ProactiveSlotOfferPassiveStart}(hi);ft=function(e){Ki(ProactiveSlotOfferPassiveDisplay,e);function ProactiveSlotOfferPassiveDisplay(){return ProactiveSlotOfferPassiveDisplay.__super__.constructor.apply(this,arguments)}ProactiveSlotOfferPassiveDisplay.prototype.enter=function(e){var t;t=Ri("config");Ri("button").setBadge(0);Ri("chat_view").setProactiveMessage(t.proactive_message);return Ri("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,t.status_message,function(){Ri("chat_view").sendProactiveMessage();return Ri("fsm").next(pt)})};return ProactiveSlotOfferPassiveDisplay}(hi);pt=function(e){Ki(ProactiveSlotOfferPassive,e);function ProactiveSlotOfferPassive(){return ProactiveSlotOfferPassive.__super__.constructor.apply(this,arguments)}ProactiveSlotOfferPassive.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("chat_view").show(e)};ProactiveSlotOfferPassive.prototype.inputEnter=function(e){var t;t=Ri("chat_view").sendMessage();Ri("fsm").queue("sendMessage",t);return Ri("fsm").next(at)};ProactiveSlotOfferPassive.prototype.closeButton=function(){return Ri("fsm").next(mt)};ProactiveSlotOfferPassive.prototype.minimizeButton=function(){return Ri("fsm").next(mt)};ProactiveSlotOfferPassive.prototype.chatButton=function(){return Ri("fsm").next(mt)};return ProactiveSlotOfferPassive}(hi);mt=function(e){Ki(ProactiveSlotRejected,e);function ProactiveSlotRejected(){return ProactiveSlotRejected.__super__.constructor.apply(this,arguments)}ProactiveSlotRejected.prototype.transitionIn=function(e){return Ri("popup").close(e)};ProactiveSlotRejected.prototype.enter=function(){Ri("tracking_event").trigger("proactive_reject");return Ri("fsm").next(dt)};return ProactiveSlotRejected}(hi);dt=function(e){Ki(ProactiveSlotReject,e);function ProactiveSlotReject(){return ProactiveSlotReject.__super__.constructor.apply(this,arguments)}ProactiveSlotReject.prototype.persist=function(){return Ri("session").setState("ProactiveSlotReject")};ProactiveSlotReject.prototype.chatButton=function(){Ri("fsm").queue("slotRequest");return Ri("fsm").next(ie)};ProactiveSlotReject.prototype.directRequest=function(e){Ri("fsm").queue("directRequest",{operator_id:e});return Ri("fsm").next(ie)};return ProactiveSlotReject}(hi);at=function(e){Ki(ProactivePassiveSocketConnect,e);function ProactivePassiveSocketConnect(){return ProactivePassiveSocketConnect.__super__.constructor.apply(this,arguments)}ProactivePassiveSocketConnect.prototype.inputEnter=function(e){var t;t=Ri("chat_view").sendMessage();return Ri("fsm").queue("sendMessage",t)};ProactivePassiveSocketConnect.prototype.connect=function(){return Ri("fsm").next(nt)};ProactivePassiveSocketConnect.prototype.error=function(){return Ri("fsm").next(Fe)};ProactivePassiveSocketConnect.prototype.connectFailed=function(){return Ri("fsm").next(Fe)};ProactivePassiveSocketConnect.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_connect);return Ri("slot").connect()};ProactivePassiveSocketConnect.prototype.timerFired=function(){return Ri("fsm").next(Fe)};ProactivePassiveSocketConnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ProactivePassiveSocketConnect}(hi);nt=function(e){Ki(ProactivePassiveSlotCreate,e);function ProactivePassiveSlotCreate(){return ProactivePassiveSlotCreate.__super__.constructor.apply(this,arguments)}ProactivePassiveSlotCreate.prototype.inputEnter=function(e){var t;t=Ri("chat_view").sendMessage();return Ri("fsm").queue("sendMessage",t)};ProactivePassiveSlotCreate.prototype.slotCreated=function(e){return Ri("fsm").next(st,e)};ProactivePassiveSlotCreate.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_slot_create);return Ri("slot").create({proactive:true})};ProactivePassiveSlotCreate.prototype.timerFired=function(){Ri("slot").disconnect();return Ri("fsm").next(Fe)};ProactivePassiveSlotCreate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ProactivePassiveSlotCreate}(hi);st=function(e){Ki(ProactivePassiveSlotVerify,e);function ProactivePassiveSlotVerify(){return ProactivePassiveSlotVerify.__super__.constructor.apply(this,arguments)}ProactivePassiveSlotVerify.prototype.enter=function(e){if(e.operator){return Ri("fsm").next(ot,e)}else{return Ri("fsm").next(Fe)}};return ProactivePassiveSlotVerify}(hi);ot=function(e){Ki(ProactivePassiveSlotStart,e);function ProactivePassiveSlotStart(){return ProactivePassiveSlotStart.__super__.constructor.apply(this,arguments)}ProactivePassiveSlotStart.prototype.enter=function(e){var t,i,r,n,o;i=Ri("config");r=Ri("session");n=Ri("tracking");o=Ri("tracking_event");t=Ri("chat_view");r.set("id",e.id);r.set("chat_meta_id",e.chat_meta_id);r.set("was_proactive",true);r.resetStats();if(r.get("operator_id")===e.operator.id){r.setOperator(e.operator);n.startProactiveSlot();o.trigger("chat_connected");o.trigger("chat_connected_proactive");return Ri("fsm").next(p)}else{r.setOperator(e.operator);n.startProactiveSlot();t.setProactiveMessage(i.proactive_message);return t.displaySlot(e.operator.display_name,e.operator.url_image,i.status_message,function(){o.trigger("chat_connected");o.trigger("chat_connected_proactive");return Ri("fsm").next(p)})}};return ProactivePassiveSlotStart}(hi);he=function(e){Ki(FacebookLoader,e);function FacebookLoader(){return FacebookLoader.__super__.constructor.apply(this,arguments)}FacebookLoader.prototype.enter=function(){var e;e=Ri("config");if(!Ri("facebook")&&e.facebook_integration==="load"){if(e.facebook_connect==="register"){return Ri("fsm").event("loadSync")}else{return Ri("fsm").event("loadAsync")}}else{return Ri("fsm").event("done")}};FacebookLoader.prototype.timerFired=function(){return Ri("fsm").event("done")};FacebookLoader.prototype.leave=function(e){clearTimeout(this.timer);return e()};FacebookLoader.prototype.loadAsync=function(){var t,e;t=Ri("config");window.fbAsyncInit=function(){var e;FB.init({appId:t.facebook_app_id,status:true,cookies:true,xfbml:true});e=true;zi.set("facebook",e);Ei("FacebookLoader loaded integration="+t.facebook_integration+" facebook_ready="+e)};if(window.FB!==void 0){try{window.FB=null;delete window.FB}catch(i){e=i;Ei("FacebookLoader cannot delete existing sdk")}}Ae.loadScript("https://connect.facebook.net/"+t.locale+"/all.js",function(){});return Ri("fsm").event("done")};FacebookLoader.prototype.loadSync=function(){var t,e;t=Ri("config");window.fbAsyncInit=function(e){return function(){clearTimeout(e.timer);FB.init({appId:t.facebook_app_id,status:true,cookies:true,xfbml:true});return Ri("fsm").event("done")}}(this);if(window.FB!==void 0){try{window.FB=null;delete window.FB}catch(i){e=i;Ei("FacebookLoader cannot delete existing sdk")}}this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_load_script);return Ae.loadScript("https://connect.facebook.net/"+t.locale+"/all.js",function(){})};FacebookLoader.prototype.done=function(){var e,t;e=Ri("config");t=window.FB!==void 0;zi.set("facebook",t);Ei("FacebookLoader integration="+e.facebook_integration+" facebook_ready="+t);return Ri("fsm").next(xi)};return FacebookLoader}(hi);xi=function(e){Ki(TwitterLoader,e);function TwitterLoader(){return TwitterLoader.__super__.constructor.apply(this,arguments)}TwitterLoader.prototype.timerFired=function(){return Ri("fsm").event("done")};TwitterLoader.prototype.leave=function(e){clearTimeout(this.timer);return e()};TwitterLoader.prototype.enter=function(){var t,e;t=Ri("config");if(t.twitter_integration==="disabled"){return Ri("fsm").event("done")}else if(t.twitter_integration==="load"){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_load_script);Ae.loadScript("https://platform.twitter.com/widgets.js",function(){var e;e=true;zi.set("twitter",e);return Ei("TwitterLoader integration="+t.twitter_integration+" twitter="+e)});return Ri("fsm").event("done")}else if(t.twitter_integration==="extern"){e=window.twttr!==void 0;zi.set("twitter",e);return Ri("fsm").event("done")}};TwitterLoader.prototype.done=function(){var e,t;e=Ri("config");t=Ri("twitter");Ei("TwitterLoader integration="+e.twitter_integration+" twitter="+t);return Ri("fsm").next(ce)};return TwitterLoader}(hi);ce=function(e){Ki(EventSetup,e);function EventSetup(){return EventSetup.__super__.constructor.apply(this,arguments)}EventSetup.prototype.done=function(e){return Ri("fsm").next(L,e)};return EventSetup}(it);L=function(e){Ki(CheckDisclaimer,e);function CheckDisclaimer(){return CheckDisclaimer.__super__.constructor.apply(this,arguments)}CheckDisclaimer.prototype.enter=function(){if(Ri("config").disclaimer_show){return Ri("fsm").next(ae)}else{return Ri("fsm").next(K)}};return CheckDisclaimer}(hi);K=function(e){Ki(CheckPreChatFirst,e);function CheckPreChatFirst(){return CheckPreChatFirst.__super__.constructor.apply(this,arguments)}CheckPreChatFirst.prototype.enter=function(){var e;e=Ri("config");if(e.mode_registration||e.mode_proactive_registration){return Ri("fsm").next(yt)}else{return Ri("fsm").next(X)}};return CheckPreChatFirst}(hi);X=function(e){Ki(CheckPreChatSecond,e);function CheckPreChatSecond(){return CheckPreChatSecond.__super__.constructor.apply(this,arguments)}CheckPreChatSecond.prototype.enter=function(){if(Ri("config").group_select_enabled){return Ri("fsm").next(ye)}else{return Ri("fsm").next($)}};return CheckPreChatSecond}(hi);$=function(e){Ki(CheckPreChatThird,e);function CheckPreChatThird(){return CheckPreChatThird.__super__.constructor.apply(this,arguments)}CheckPreChatThird.prototype.enter=function(){if(Ri("config").pre_survey_enabled){return Ri("fsm").next(Ze)}else{return Ri("fsm").next(ee)}};return CheckPreChatThird}(hi);ee=function(e){Ki(CheckSlotAvailable,e);function CheckSlotAvailable(){return CheckSlotAvailable.__super__.constructor.apply(this,arguments)}CheckSlotAvailable.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout);Ri("tracking_event").trigger("slot_check");return Ri("slot").checkAvailable("userlikeCallbackAvailableCheck")};CheckSlotAvailable.prototype.groupAvailable=function(){Ri("button").changeToOnlineText();Ri("tracking_event").trigger("slot_available");return Ri("fsm").next(Y)};CheckSlotAvailable.prototype.groupUnavailable=function(){Ri("tracking_event").trigger("slot_unavailable");return Ri("fsm").next(Fe)};CheckSlotAvailable.prototype.timerFired=function(){return Ri("fsm").next(Fe)};CheckSlotAvailable.prototype.leave=function(e){clearTimeout(this.timer);return e()};return CheckSlotAvailable}(hi);Y=function(e){Ki(CheckPreChatLast,e);function CheckPreChatLast(){return CheckPreChatLast.__super__.constructor.apply(this,arguments)}CheckPreChatLast.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("chat_view").showConnectView(e)};CheckPreChatLast.prototype.enter=function(){if(Ri("config").passive_connect){return Ri("fsm").next(We)}else{return Ri("fsm").next(ci)}};return CheckPreChatLast}(hi);We=function(e){Ki(PassiveConnectAvailableCheck,e);function PassiveConnectAvailableCheck(){return PassiveConnectAvailableCheck.__super__.constructor.apply(this,arguments)}PassiveConnectAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout);return Ri("slot").checkPassiveConnect("userlikeCallbackPassiveConnectSlotCheck")};PassiveConnectAvailableCheck.prototype.inputEnter=function(e){var t;t=Ri("chat_view").sendMessage();if((t!=null?t.length:void 0)>0){return Ri("fsm").queue("sendMessage",t)}};PassiveConnectAvailableCheck.prototype.slotAvailable=function(e){return Ri("fsm").next(Ye,e)};PassiveConnectAvailableCheck.prototype.slotUnavailable=function(e){return Ri("fsm").next(Fe)};PassiveConnectAvailableCheck.prototype.timerFired=function(){return Ri("fsm").next(Fe)};PassiveConnectAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return PassiveConnectAvailableCheck}(hi);ae=function(e){Ki(DisclaimerAvailableCheck,e);function DisclaimerAvailableCheck(){return DisclaimerAvailableCheck.__super__.constructor.apply(this,arguments)}DisclaimerAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout);Ri("tracking_event").trigger("slot_check");return Ri("slot").checkAvailable("userlikeCallbackAvailableCheck")};DisclaimerAvailableCheck.prototype.groupAvailable=function(){Ri("button").changeToOnlineText();Ri("tracking_event").trigger("slot_available");return Ri("fsm").next(se)};DisclaimerAvailableCheck.prototype.groupUnavailable=function(){Ri("tracking_event").trigger("slot_unavailable");return Ri("fsm").next(Fe)};DisclaimerAvailableCheck.prototype.timerFired=function(){return Ri("fsm").next(Fe)};DisclaimerAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return DisclaimerAvailableCheck}(hi);se=function(e){Ki(Disclaimer,e);function Disclaimer(){return Disclaimer.__super__.constructor.apply(this,arguments)}Disclaimer.prototype.enter=function(){Ri("button").fadeOutEyecatcher();return Ri("disclaimer_view").show(function(){})};Disclaimer.prototype.chatButton=function(){Ri("tracking_event").trigger("disclaimer_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};Disclaimer.prototype.closeButton=function(){Ri("tracking_event").trigger("disclaimer_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};Disclaimer.prototype.submitButton=function(){Ri("tracking_event").trigger("disclaimer_ok");return Ri("fsm").next(K)};return Disclaimer}(hi);yt=function(e){Ki(RegisterAvailableCheck,e);function RegisterAvailableCheck(){return RegisterAvailableCheck.__super__.constructor.apply(this,arguments)}RegisterAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout);Ri("tracking_event").trigger("slot_check");return Ri("slot").checkAvailable("userlikeCallbackAvailableCheck")};RegisterAvailableCheck.prototype.groupAvailable=function(){Ri("button").changeToOnlineText();Ri("tracking_event").trigger("slot_available");return Ri("fsm").next(St)};RegisterAvailableCheck.prototype.groupUnavailable=function(){Ri("tracking_event").trigger("slot_unavailable");return Ri("fsm").next(Fe)};RegisterAvailableCheck.prototype.timerFired=function(){return Ri("fsm").next(Fe)};RegisterAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RegisterAvailableCheck}(hi);Ze=function(e){Ki(PreSurveyAvailableCheck,e);function PreSurveyAvailableCheck(){return PreSurveyAvailableCheck.__super__.constructor.apply(this,arguments)}PreSurveyAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout);Ri("tracking_event").trigger("slot_check");return Ri("slot").checkAvailable("userlikeCallbackAvailableCheck")};PreSurveyAvailableCheck.prototype.groupAvailable=function(){Ri("button").changeToOnlineText();Ri("tracking_event").trigger("slot_available");return Ri("fsm").next(et)};PreSurveyAvailableCheck.prototype.groupUnavailable=function(){Ri("tracking_event").trigger("slot_unavailable");return Ri("fsm").next(Fe)};PreSurveyAvailableCheck.prototype.timerFired=function(){return Ri("fsm").next(Fe)};PreSurveyAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return PreSurveyAvailableCheck}(hi);ye=function(e){Ki(GroupSelectAvailableCheck,e);function GroupSelectAvailableCheck(){return GroupSelectAvailableCheck.__super__.constructor.apply(this,arguments)}GroupSelectAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout);Ri("tracking_event").trigger("slot_check");return Ri("slot").checkAvailable("userlikeCallbackAvailableCheck")};GroupSelectAvailableCheck.prototype.groupAvailable=function(e){Ri("button").changeToOnlineText();Ri("tracking_event").trigger("slot_available");return Ri("fsm").next(be,e)};GroupSelectAvailableCheck.prototype.groupUnavailable=function(){Ri("tracking_event").trigger("slot_unavailable");return Ri("fsm").next(Fe)};GroupSelectAvailableCheck.prototype.timerFired=function(){return Ri("fsm").next(Fe)};GroupSelectAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return GroupSelectAvailableCheck}(hi);Bi=function(e){Ki(Warning,e);function Warning(){return Warning.__super__.constructor.apply(this,arguments)}Warning.prototype.transitionOut=function(e){return Ri("popup").close(e)};Warning.prototype.chatButton=function(){return Ri("fsm").next(xe)};Warning.prototype.closeButton=function(){return Ri("fsm").next(xe)};Warning.prototype.enter=function(){return this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout)};Warning.prototype.timerFired=function(){return Ri("fsm").next(xe)};Warning.prototype.leave=function(e){clearTimeout(this.timer);return e()};return Warning}(hi);Ee=function(e){Ki(NoCookiesMessage,e);function NoCookiesMessage(){return NoCookiesMessage.__super__.constructor.apply(this,arguments)}NoCookiesMessage.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("message_view").showNoCookiesMessage(e)};NoCookiesMessage.prototype.chatButton=function(){return Ri("fsm").next(Me)};NoCookiesMessage.prototype.closeButton=function(){return Ri("fsm").next(Me)};NoCookiesMessage.prototype.enter=function(){return this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout)};NoCookiesMessage.prototype.timerFired=function(){return Ri("fsm").next(Me)};return NoCookiesMessage}(Bi);le=function(e){Ki(ErrorMessage,e);function ErrorMessage(){return ErrorMessage.__super__.constructor.apply(this,arguments)}ErrorMessage.prototype.enter=function(){return Ri("tracking_event").trigger("error_message")};ErrorMessage.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("message_view").showErrorMessage(e)};return ErrorMessage}(Bi);pe=function(e){Ki(ExpiredWarning,e);function ExpiredWarning(){return ExpiredWarning.__super__.constructor.apply(this,arguments)}ExpiredWarning.prototype.enter=function(){Ri("button").fadeOutEyecatcher();return Ri("message_view").showExpiredWarning(function(){})};return ExpiredWarning}(Bi);Fe=function(e){Ki(OfflineMessage,e);function OfflineMessage(){return OfflineMessage.__super__.constructor.apply(this,arguments)}OfflineMessage.prototype.persist=function(){Ri("session").setState("Offline");return Ri("session").resetChatDuration()};OfflineMessage.prototype.enter=function(){Ri("tracking_event").trigger("offline_mode");if(Ri("config").offline_mode==="message"){return Ri("fsm").next(qe)}else if(Ri("config").offline_mode==="chatbutler"){if(Ri("session").isInServiceTime()){return Ri("fsm").next(x)}else{return Ri("fsm").next(qe)}}else{return Ri("fsm").next(Ve)}};return OfflineMessage}(hi);qe=function(e){Ki(OfflineMessageForm,e);function OfflineMessageForm(){return OfflineMessageForm.__super__.constructor.apply(this,arguments)}OfflineMessageForm.prototype.enter=function(){if(Ri("config").geo_type==="browser"){Ri("session").getLocation()}Ri("tracking_event").trigger("offline_form_show");Ri("fsm").poll();return Ri("fsm").reset()};OfflineMessageForm.prototype.sendMessage=function(e){Ri("offline_message_view").showOfflineMessageForm();return Ri("offline_message_view").setTextareaVal(e)};OfflineMessageForm.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("offline_message_view").showOfflineMessageForm(e)};OfflineMessageForm.prototype.chatButton=function(){return Ri("popup").close(function(){return Ri("fsm").next(xe)})};OfflineMessageForm.prototype.closeButton=function(){return Ri("popup").close(function(){return Ri("fsm").next(xe)})};OfflineMessageForm.prototype.submitButton=function(){if(Ri("offline_message_view").validateOfflineMessage()){return Ri("fsm").next(ze)}};OfflineMessageForm.prototype.slotRequest=function(){};OfflineMessageForm.prototype.locationchange=function(){};return OfflineMessageForm}(hi);Ve=function(e){Ki(OfflineMessageFeedback,e);function OfflineMessageFeedback(){return OfflineMessageFeedback.__super__.constructor.apply(this,arguments)}OfflineMessageFeedback.prototype.enter=function(){Ri("tracking_event").trigger("offline_view_show");Ri("fsm").poll();return Ri("fsm").reset()};OfflineMessageFeedback.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("message_view").showOfflineMessageFeedback(e)};return OfflineMessageFeedback}(qe);ze=function(e){Ki(OfflineMessageSend,e);function OfflineMessageSend(){return OfflineMessageSend.__super__.constructor.apply(this,arguments)}OfflineMessageSend.prototype.transitionIn=function(e){return Ri("progress_view").show(e)};OfflineMessageSend.prototype.success=function(e){return Ri("fsm").next(Ie,e)};OfflineMessageSend.prototype.error=function(){return Ri("fsm").next(le)};OfflineMessageSend.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_connect);Ri("tracking_event").trigger("offline_form_submit");return Ri("offline_message_view").sendOfflineMessage()};OfflineMessageSend.prototype.timerFired=function(){return Ri("fsm").next(le)};OfflineMessageSend.prototype.leave=function(e){clearTimeout(this.timer);return e()};return OfflineMessageSend}(hi);Ie=function(e){Ki(OfflineMessageDone,e);function OfflineMessageDone(){return OfflineMessageDone.__super__.constructor.apply(this,arguments)}OfflineMessageDone.prototype.enter=function(e){if(Ri("offline_message_view").requestedScreenshot()){return Ri("fsm").next(De,e)}else{return Ri("fsm").next(Ue)}};return OfflineMessageDone}(hi);De=function(e){Ki(OfflineMessageScreenshot,e);function OfflineMessageScreenshot(){return OfflineMessageScreenshot.__super__.constructor.apply(this,arguments)}OfflineMessageScreenshot.prototype.transitionIn=function(e){return Ri("progress_view").show(e)};OfflineMessageScreenshot.prototype.enter=function(e){var t,i,r,n;this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_screenshot);i=e.id;t=Ri("config").customer_id;n=Ri("session").get("id");r=new Wt;if(r.unsupported()){return Ri("fsm").next(Ue)}return r.load(function(){var e;e=r.take();return e.then(function(e){return function(e){Ei("OfflineMessageScreenshot::take ok");return r.crossDomainPost("https://api.userlike.com/api/client/message/offline_message/screenshot/",{id:i,customer_id:t,screenshot:e.toDataURL("image/png"),session_id:n},function(e,t){Ei("OfflineMessageScreenshot::sent err="+e);return Ri("fsm").next(Ue)})}}(this),function(e){return function(){Ei("OfflineMessageScreenshot::take failed");return Ri("fsm").next(Ue)}}(this))["catch"](function(e){Ei("OfflineMessageScreenshot::take failed");return Ri("fsm").next(Ue)})})};OfflineMessageScreenshot.prototype.timerFired=function(){return Ri("fsm").next(Ue)};OfflineMessageScreenshot.prototype.leave=function(e){clearTimeout(this.timer);return e()};return OfflineMessageScreenshot}(hi);Ue=function(e){Ki(OfflineMessageSent,e);function OfflineMessageSent(){return OfflineMessageSent.__super__.constructor.apply(this,arguments)}OfflineMessageSent.prototype.transitionIn=function(e){return Ri("offline_message_view").showOfflineMessageSent(e)};OfflineMessageSent.prototype.transitionOut=function(e){return Ri("popup").close(e)};OfflineMessageSent.prototype.chatButton=function(){return Ri("popup").close(function(){return Ri("fsm").next(xe)})};OfflineMessageSent.prototype.closeButton=function(){return Ri("popup").close(function(){return Ri("fsm").next(xe)})};OfflineMessageSent.prototype.directRequest=function(){return Ri("popup").close(function(){return Ri("fsm").next(xe)})};OfflineMessageSent.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout);return Ri("tracking").sendOfflineMessage()};OfflineMessageSent.prototype.timerFired=function(){return Ri("fsm").next(xe)};OfflineMessageSent.prototype.leave=function(e){clearTimeout(this.timer);return e()};return OfflineMessageSent}(hi);e=function(e){Ki(ChatButlerState,e);function ChatButlerState(){return ChatButlerState.__super__.constructor.apply(this,arguments)}ChatButlerState.prototype.inputEnter=function(){var e;e=Ri("chat_view").sendMessage();Ri("session").addMessageToChatbutler(e);return Ri("fsm").queue("sendMessage",e)};ChatButlerState.prototype.livePreview=function(){};ChatButlerState.prototype.minimizeButton=function(){if(Ri("popup").isVisible()){Ri("tracking_event").trigger("chat_window_minimzed");Ri("session").set("chatbutler_minimized","1");Ri("chat_view").resetIncomingMessages();return Ri("popup").hide()}else{Ri("tracking_event").trigger("chat_window_maximized");Ri("session")["delete"]("chatbutler_minimized");return Ri("popup").show(function(){})}};ChatButlerState.prototype.chatButton=function(){return this.minimizeButton()};ChatButlerState.prototype.directRequest=function(){return this.minimizeButton()};ChatButlerState.prototype.closeButton=function(){return Ri("fsm").next(h)};return ChatButlerState}(hi);x=function(e){Ki(ChatButlerWelcome,e);function ChatButlerWelcome(){return ChatButlerWelcome.__super__.constructor.apply(this,arguments)}ChatButlerWelcome.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("chat_view").showConnectView(e)};ChatButlerWelcome.prototype.enter=function(){Ri("fsm").reset();Ri("tracking_event").trigger("chat_butler");Ri("session").resetSession();return this.timer=setTimeout(function(){return Ri("chat_view").displaySlot(Ri("config").chatbutler_name,"//"+Ri("config").chatbutler_picture_url,Ri("config").status_message,function(){Ri("chat_view").sendChatbutlerMessage("welcome");if(Ri("session").get("client_name")){return this.timer=Ri("chat_view").sendChatbutlerMessageDelayed("ask_topic",2e3,function(){return Ri("fsm").next(w)})}else{return this.timer=Ri("chat_view").sendChatbutlerMessageDelayed("ask_name",2e3,function(){return Ri("fsm").next(y)})}})},500)};return ChatButlerWelcome}(e);_=function(e){Ki(ChatButlerRestore,e);function ChatButlerRestore(){return ChatButlerRestore.__super__.constructor.apply(this,arguments)}ChatButlerRestore.prototype.transitionIn=function(e){var t;Ri("button").fadeOutEyecatcher();t=function(){return Ri("chat_view").displaySlot(Ri("config").chatbutler_name,"//"+Ri("config").chatbutler_picture_url,Ri("config").status_message,function(){return e()})};if(Ri("session").get("chatbutler_minimized")){return t()}else{return Ri("chat_view").show(t)}};ChatButlerRestore.prototype.enter=function(){var e,t,i,r;r=JSON.parse(Ri("session").get("chatbutler_dialog"));for(e=0,t=r.length;e<t;e++){i=r[e];Ri("chat_view").addMessage.apply(Ri("chat_view"),i)}switch(Ri("session").getState()){case"ChatButlerWaitName":return Ri("fsm").next(y);case"ChatButlerWaitTopic":return Ri("fsm").next(w);case"ChatButlerWaitEmail":return Ri("fsm").next(b);case"ChatButlerPollSlot":return Ri("fsm").next(g);case"ChatButlerOfflineWaitExtraInfo":return Ri("fsm").next(m);default:Ei("Invalid Chat Butler restore target state '"+Ri("session").getState()+"'");return Ri("fsm").next(qe)}};return ChatButlerRestore}(hi);y=function(e){Ki(ChatButlerWaitName,e);function ChatButlerWaitName(){return ChatButlerWaitName.__super__.constructor.apply(this,arguments)}ChatButlerWaitName.prototype.enter=function(){Ri("fsm").poll();return Ri("fsm").reset()};ChatButlerWaitName.prototype.persist=function(){return Ri("session").setState("ChatButlerWaitName",hi.timeout_offsite)};ChatButlerWaitName.prototype.inputEnter=function(){var e;e=Ri("chat_view").sendMessage();Ri("session").addMessageToChatbutler(e);return Ri("fsm").event("sendMessage",e)};ChatButlerWaitName.prototype.sendMessage=function(e){if(!Pi.validateName(e)){this.timer=Ri("chat_view").sendChatbutlerMessageDelayed("not_understood",500,function(){});return}Ri("session").set("client_name",e);return this.timer=Ri("chat_view").sendChatbutlerMessageDelayed("ask_topic",1500,function(){return Ri("fsm").next(w)})};return ChatButlerWaitName}(e);w=function(e){Ki(ChatButlerWaitTopic,e);function ChatButlerWaitTopic(){return ChatButlerWaitTopic.__super__.constructor.apply(this,arguments)}ChatButlerWaitTopic.prototype.enter=function(){Ri("fsm").poll();return Ri("fsm").reset()};ChatButlerWaitTopic.prototype.persist=function(){return Ri("session").setState("ChatButlerWaitTopic",hi.timeout_offsite)};ChatButlerWaitTopic.prototype.inputEnter=function(){var e;e=Ri("chat_view").sendMessage();Ri("session").addMessageToChatbutler(e);return Ri("fsm").event("sendMessage",e)};ChatButlerWaitTopic.prototype.sendMessage=function(e){if(e.match(/^\s*$/)){this.timer=Ri("chat_view").sendChatbutlerMessageDelayed("not_understood",500,function(){});return}Ri("session").set("chatbutler_topic",e);return this.timer=Ri("chat_view").sendChatbutlerMessageDelayed("wait1",1500,function(){return Ri("fsm").next(g)})};return ChatButlerWaitTopic}(e);g=function(e){Ki(ChatButlerPollSlot,e);function ChatButlerPollSlot(){return ChatButlerPollSlot.__super__.constructor.apply(this,arguments)}ChatButlerPollSlot.prototype.persist=function(){return Ri("session").setState("ChatButlerPollSlot",hi.timeout_offsite)};ChatButlerPollSlot.prototype.enter=function(e){var t,i;this.start_time=Ri("session").get("chatbutler_start_time")||+new Date;Ri("session").set("chatbutler_start_time",this.start_time);t=Math.max(0,Ri("config").chatbutler_timeout*1e3-(+new Date-this.start_time));i=Math.max(0,Ri("config").chatbutler_timeout*500-(+new Date-this.start_time));if(i>=15e3){this.middle_timeout=setTimeout(function(){return Ri("chat_view").sendChatbutlerMessage("wait2")},i)}this.try_timeout=setTimeout(function(){Ri("chat_view").sendChatbutlerMessage("timeout_message");return Ri("fsm").next(m)},t);if(t>5e3){return Ri("fsm").event("pollSlot",true)}};ChatButlerPollSlot.prototype.pollSlot=function(e){Ri("slot").resetCache();return Ri("slot").checkAvailableChatbutler(e,"userlikeCallbackAvailableCheck")};ChatButlerPollSlot.prototype.groupAvailable=function(){Ri("tracking_event").trigger("chat_butler_connect");Ri("fsm").queue("slotRequest");return Ri("fsm").next(d)};ChatButlerPollSlot.prototype.groupUnavailable=function(){return this.next_timer=setTimeout(function(){return Ri("fsm").event("pollSlot",false)},5e3)};ChatButlerPollSlot.prototype.inputEnter=function(){var e;e=Ri("chat_view").sendMessage();Ri("session").addMessageToChatbutler(e);return Ri("fsm").event("sendMessage",e)};ChatButlerPollSlot.prototype.sendMessage=function(e){clearTimeout(this.timer);return this.timer=Ri("chat_view").sendChatbutlerMessageDelayed("wait2",1500,function(){})};ChatButlerPollSlot.prototype.leave=function(e){clearTimeout(this.middle_timeout);clearTimeout(this.try_timeout);clearTimeout(this.next_timer);return ChatButlerPollSlot.__super__.leave.call(this,e)};return ChatButlerPollSlot}(e);m=function(e){Ki(ChatButlerOfflineWaitExtraInfo,e);function ChatButlerOfflineWaitExtraInfo(){return ChatButlerOfflineWaitExtraInfo.__super__.constructor.apply(this,arguments)}ChatButlerOfflineWaitExtraInfo.prototype.enter=function(){this.entered_minimized=!Ri("popup").isVisible();Ri("fsm").poll();return Ri("fsm").reset()};ChatButlerOfflineWaitExtraInfo.prototype.persist=function(){return Ri("session").setState("ChatButlerOfflineWaitExtraInfo",hi.timeout_offsite)};ChatButlerOfflineWaitExtraInfo.prototype.inputEnter=function(){var e;e=Ri("chat_view").sendMessage();Ri("session").addMessageToChatbutler(e);return Ri("fsm").event("sendMessage",e)};ChatButlerOfflineWaitExtraInfo.prototype.sendMessage=function(e){if(Te.checkNo(e)){return Ri("fsm").event("infoDone","")}else if(Te.checkYes(e)){Ri("chat_view").sendChatbutlerMessageDelayed("reask_extra_info",500,function(){})}else{return Ri("fsm").event("infoDone",e)}};ChatButlerOfflineWaitExtraInfo.prototype.infoDone=function(e){Ri("session").set("chatbutler_extra_info",e);if(Ri("session").get("client_email")){return Ri("fsm").next(v)}else{return Ri("chat_view").sendChatbutlerMessageDelayed("ask_email",1e3,function(){return Ri("fsm").next(b)})}};return ChatButlerOfflineWaitExtraInfo}(e);b=function(e){Ki(ChatButlerWaitEmail,e);function ChatButlerWaitEmail(){return ChatButlerWaitEmail.__super__.constructor.apply(this,arguments)}ChatButlerWaitEmail.prototype.enter=function(){Ri("fsm").poll();return Ri("fsm").reset()};ChatButlerWaitEmail.prototype.persist=function(){return Ri("session").setState("ChatButlerWaitEmail",hi.timeout_offsite)};ChatButlerWaitEmail.prototype.inputEnter=function(){var e;e=Ri("chat_view").sendMessage();Ri("session").addMessageToChatbutler(e);return Ri("fsm").event("sendMessage",e)};ChatButlerWaitEmail.prototype.closeButton=function(){return Ri("fsm").next(h)};ChatButlerWaitEmail.prototype.sendMessage=function(e){if(!Pi.validateEmail(e)){Ri("chat_view").sendChatbutlerMessageDelayed("not_understood",500,function(){});return}Ri("session").set("client_email",e);return Ri("fsm").next(v)};return ChatButlerWaitEmail}(e);v=function(e){Ki(ChatButlerSendOfflineMessage,e);function ChatButlerSendOfflineMessage(){return ChatButlerSendOfflineMessage.__super__.constructor.apply(this,arguments)}ChatButlerSendOfflineMessage.prototype.enter=function(){var e,t,i,r,n,o;this.timer=setTimeout(function(){return Ri("fsm").event("error")},hi.timeout_connect);t=Ri("session").getChatbutlerDialog();n=[];e=Ri("session").get("client_name");for(i=0,r=t.length;i<r;i++){o=t[i];if(o.type==="co"){n.push(e+": "+o.body)}else{n.push(Ri("config").chatbutler_name+": "+o.body)}}return Ri("offline_message_view").sendOfflineMessage(n.join("\n\n"))};ChatButlerSendOfflineMessage.prototype.error=function(){Ri("session").setState("Offline");return Ri("fsm").next(le)};ChatButlerSendOfflineMessage.prototype.success=function(){clearTimeout(this.timer);Ri("chat_view").sendChatbutlerMessage("ticket_created");return Ri("fsm").next(k)};return ChatButlerSendOfflineMessage}(e);h=function(e){Ki(ChatButlerCancel,e);function ChatButlerCancel(){return ChatButlerCancel.__super__.constructor.apply(this,arguments)}ChatButlerCancel.prototype.enter=function(){Ri("tracking_event").trigger("chat_butler_cancel");Ri("slot").disconnect();return Ri("popup").close(function(){return Ri("fsm").next(xe)})};return ChatButlerCancel}(hi);k=function(e){Ki(ChatButlerQuitWait,e);function ChatButlerQuitWait(){return ChatButlerQuitWait.__super__.constructor.apply(this,arguments)}ChatButlerQuitWait.prototype.transitionIn=function(e){return Ri("popup").show(e)};ChatButlerQuitWait.prototype.enter=function(){var e;setTimeout(function(){return Ri("chat_view").setOperatorInfo(Ri("config").chatbutler_name,true,Ri("config").quit_message)},2e3);e=Ri("session");Ri("fsm").reset();e.setState("Offline");e.deleteConfig();Ri("tracking_event").trigger("chat_quit");e.resetChatDuration();return this.timer=setTimeout(function(){return Ri("fsm").event("done")},30*1e3)};ChatButlerQuitWait.prototype.inputEnter=function(e){var t;return t=Ri("chat_view").sendMessage()};ChatButlerQuitWait.prototype.closeButton=function(){return Ri("fsm").next(xe)};ChatButlerQuitWait.prototype.done=function(){return Ri("fsm").next(xe)};ChatButlerQuitWait.prototype.transitionOut=function(e){return Ri("popup").close(e)};return ChatButlerQuitWait}(e);St=function(e){Ki(RegisterOptions,e);function RegisterOptions(){return RegisterOptions.__super__.constructor.apply(this,arguments)}RegisterOptions.prototype.enter=function(){var e,t,i,r;r=Ri("session");if(((t=r.get("client_name"))!=null?t.length:void 0)&&((i=r.get("client_email"))!=null?i.length:void 0)){return Ri("fsm").next(X)}else if(Ri("config").facebook_connect!=="register"){return Ri("fsm").next(Ct)}else if(!Ri("facebook")){return Ri("fsm").next(Ct)}else{this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout/2);try{return FB.getLoginStatus(function(e){Ei("getLoginStatus response=",e);if(e.status!=="connected"){r.set("facebook_connected",true);return Ri("fsm").next(xt)}else{return Ri("fsm").next(wt)}})}catch(n){e=n;Ei("Error getting FB status");return Ri("fsm").next(Ct)}}};RegisterOptions.prototype.timerFired=function(){return Ri("fsm").next(Ct)};RegisterOptions.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RegisterOptions}(hi);be=function(e){Ki(GroupSelect,e);function GroupSelect(){return GroupSelect.__super__.constructor.apply(this,arguments)}GroupSelect.prototype.enter=function(e){this.data=e;if(this.data.available.length===1){return Ri("fsm").event("select",1)}else{Ri("button").fadeOutEyecatcher();Ri("group_select_view").show(this.data,function(){});return Ri("tracking_event").trigger("group_select_show")}};GroupSelect.prototype.chatButton=function(){Ri("tracking_event").trigger("group_select_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};GroupSelect.prototype.closeButton=function(){Ri("tracking_event").trigger("group_select_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};GroupSelect.prototype.select=function(e){if(!e){return}Ri("tracking_event").trigger("group_select_submit");Ri("session").set("group_select_id",this.data.available[e-1].id);return Ri("fsm").next($)};return GroupSelect}(hi);Ct=function(e){Ki(RegisterForm,e);function RegisterForm(){return RegisterForm.__super__.constructor.apply(this,arguments)}RegisterForm.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("register_view").showRegisterForm(e)};RegisterForm.prototype.enter=function(){return Ri("tracking_event").trigger("register_show")};RegisterForm.prototype.chatButton=function(){Ri("tracking_event").trigger("register_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};RegisterForm.prototype.directRequest=function(){Ri("tracking_event").trigger("register_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};RegisterForm.prototype.closeButton=function(){Ri("tracking_event").trigger("register_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};RegisterForm.prototype.submitButton=function(){Ri("tracking_event").trigger("register_submit");if(Ri("register_view").validateRegisterForm()){return Ri("fsm").next(X)}};return RegisterForm}(hi);xt=function(e){Ki(RegisterFacebookLogin,e);function RegisterFacebookLogin(){return RegisterFacebookLogin.__super__.constructor.apply(this,arguments)}RegisterFacebookLogin.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("register_view").showRegisterFormFacebook(e)};RegisterFacebookLogin.prototype.facebookLoginResponse=function(e){if(e.authResponse){Ri("tracking_event").trigger("facebook_login_success");return Ri("fsm").event("facebookApiMeRequest")}else{Ri("tracking_event").trigger("facebook_login_failure");Ei("User cancelled login or did not fully authorize.");return Ri("fsm").next(Ct)}};RegisterFacebookLogin.prototype.facebookApiMeRequest=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout/2);return FB.api("/me",function(e){return Ri("fsm").event("facebookApiMeResponse",e)})};RegisterFacebookLogin.prototype.facebookApiMeResponse=function(e){var t;t=Ri("session");if(e.email&&e.name){Ri("tracking_event").trigger("facebook_me_response");t.set("client_email",e.email);t.set("client_name",e.name);return Ri("fsm").next(X)}else{Ei("Incomplete Facebook ME Response.",e);return Ri("fsm").next(Ct)}};RegisterFacebookLogin.prototype.timerFired=function(){return Ri("fsm").next(Ct)};RegisterFacebookLogin.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RegisterFacebookLogin}(Ct);wt=function(e){Ki(RegisterFacebookApiMe,e);function RegisterFacebookApiMe(){return RegisterFacebookApiMe.__super__.constructor.apply(this,arguments)}RegisterFacebookApiMe.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout/2);return FB.api("/me",function(e){return Ri("fsm").event("facebookApiMeResponse",e)})};RegisterFacebookApiMe.prototype.facebookApiMeResponse=function(e){var t;t=Ri("session");if(e.email&&e.name){Ri("tracking_event").trigger("facebook_me_response");t.set("client_email",e.email);t.set("client_name",e.name);return Ri("fsm").next(X)}else{Ei("Incomplete Facebook ME Response.",e);return Ri("fsm").next(Ct)}};RegisterFacebookApiMe.prototype.timerFired=function(){return Ri("fsm").next(Ct)};RegisterFacebookApiMe.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RegisterFacebookApiMe}(hi);et=function(e){Ki(PreSurveyForm,e);function PreSurveyForm(){return PreSurveyForm.__super__.constructor.apply(this,arguments)}PreSurveyForm.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("survey_view").showPreSurvey(e)};PreSurveyForm.prototype.enter=function(){return Ri("tracking_event").trigger("pre_survey_show")};PreSurveyForm.prototype.chatButton=function(){Ri("tracking_event").trigger("pre_survey_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};PreSurveyForm.prototype.closeButton=function(){Ri("tracking_event").trigger("pre_survey_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};PreSurveyForm.prototype.directRequest=function(){Ri("tracking_event").trigger("pre_survey_cancel");return Ri("popup").close(function(){return Ri("fsm").next(xe)})};PreSurveyForm.prototype.select=function(e){Ri("tracking_event").trigger("pre_survey_submit");Ri("session").set("pre_survey_option",Ri("config")["pre_survey_option0"+e]);return Ri("fsm").next(ee)};return PreSurveyForm}(hi);Ye=function(e){Ki(PassiveConnectStart,e);function PassiveConnectStart(){return PassiveConnectStart.__super__.constructor.apply(this,arguments)}PassiveConnectStart.prototype.enter=function(e){Ri("session").setOperator(e.operator);Ri("tracking_event").trigger("chat_passive_connect");return Ri("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,Ri("config").status_message,function(){return Ri("fsm").next(He)})};return PassiveConnectStart}(hi);He=function(e){Ki(PassiveConnectOffer,e);function PassiveConnectOffer(){return PassiveConnectOffer.__super__.constructor.apply(this,arguments)}PassiveConnectOffer.prototype.enter=function(){return Ri("fsm").poll()};PassiveConnectOffer.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("chat_view").show(function(){Ri("chat_view").sendWelcomeMessage();return e()})};PassiveConnectOffer.prototype.inputEnter=function(e){var t;t=Ri("chat_view").sendMessage();if((t!=null?t.length:void 0)>0){Ri("fsm").queue("sendMessage",t);return Ri("fsm").next(Ke)}};PassiveConnectOffer.prototype.sendMessage=function(e){if((e!=null?e.length:void 0)>0){Ri("fsm").unshift("sendMessage",e);return Ri("fsm").next(Ke)}};PassiveConnectOffer.prototype.closeButton=function(){return Ri("popup").close(function(){return Ri("fsm").next(xe)})};PassiveConnectOffer.prototype.minimizeButton=function(){return Ri("popup").close(function(){return Ri("fsm").next(xe)})};PassiveConnectOffer.prototype.chatButton=function(){return Ri("popup").close(function(){return Ri("fsm").next(xe)})};return PassiveConnectOffer}(hi);Ke=function(e){Ki(PassiveConnectSocketConnect,e);function PassiveConnectSocketConnect(){return PassiveConnectSocketConnect.__super__.constructor.apply(this,arguments)}PassiveConnectSocketConnect.prototype.connect=function(){return Ri("fsm").next(Ge)};PassiveConnectSocketConnect.prototype.error=function(){return Ri("fsm").next(Fe)};PassiveConnectSocketConnect.prototype.connectFailed=function(){return Ri("fsm").next(Fe)};PassiveConnectSocketConnect.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_connect);return Ri("slot").connect()};PassiveConnectSocketConnect.prototype.timerFired=function(){return Ri("fsm").next(Fe)};PassiveConnectSocketConnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};PassiveConnectSocketConnect.prototype.inputEnter=function(e){var t;t=Ri("chat_view").sendMessage();return Ri("fsm").queue("sendMessage",t)};return PassiveConnectSocketConnect}(hi);Ge=function(e){Ki(PassiveConnectSlotCreate,e);function PassiveConnectSlotCreate(){return PassiveConnectSlotCreate.__super__.constructor.apply(this,arguments)}PassiveConnectSlotCreate.prototype.inputEnter=function(e){var t;t=Ri("chat_view").sendMessage();return Ri("fsm").queue("sendMessage",t)};PassiveConnectSlotCreate.prototype.slotCreated=function(e){return Ri("fsm").next(Qe,e)};PassiveConnectSlotCreate.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_slot_create);return Ri("slot").create({group_select_id:Ri("session").get("group_select_id")})};PassiveConnectSlotCreate.prototype.timerFired=function(){return Ri("fsm").next(Fe)};PassiveConnectSlotCreate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return PassiveConnectSlotCreate}(hi);Qe=function(e){Ki(PassiveConnectSlotVerify,e);function PassiveConnectSlotVerify(){return PassiveConnectSlotVerify.__super__.constructor.apply(this,arguments)}PassiveConnectSlotVerify.prototype.enter=function(e){if(e.operator){return Ri("fsm").next(Je,e)}else{return Ri("fsm").next(Fe)}};return PassiveConnectSlotVerify}(hi);Je=function(e){Ki(PassiveConnectSlotStart,e);function PassiveConnectSlotStart(){return PassiveConnectSlotStart.__super__.constructor.apply(this,arguments)}PassiveConnectSlotStart.prototype.enter=function(e){var t;t=Ri("session");t.set("id",e.id);t.set("chat_meta_id",e.chat_meta_id);t.set("was_proactive",false);t.resetStats();if(t.get("operator_id")===e.operator.id){t.setOperator(e.operator);Ri("tracking").startSlot();Ri("tracking_event").trigger("chat_connected");return Ri("fsm").next(p)}else{t.setOperator(e.operator);Ri("tracking").startSlot();return Ri("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,Ri("config").status_message,function(){Ri("tracking_event").trigger("chat_connected");return Ri("fsm").next(p)})}};return PassiveConnectSlotStart}(hi);ci=function(e){Ki(SocketConnect,e);function SocketConnect(){return SocketConnect.__super__.constructor.apply(this,arguments)}SocketConnect.prototype.connecting=function(){return Ei("Connecting")};SocketConnect.prototype.connect=function(){return Ri("fsm").next(ei,{proactive:false})};SocketConnect.prototype.error=function(){return Ri("fsm").next(Fe)};SocketConnect.prototype.connectFailed=function(){return Ri("fsm").next(Fe)};SocketConnect.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_connect);return Ri("slot").connect()};SocketConnect.prototype.timerFired=function(){Ri("slot").disconnect();return Ri("fsm").next(Fe)};SocketConnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};SocketConnect.prototype.inputEnter=function(e){var t;t=Ri("chat_view").sendMessage();return Ri("fsm").queue("sendMessage",t)};return SocketConnect}(hi);d=function(e){Ki(ChatButlerConnect,e);function ChatButlerConnect(){return ChatButlerConnect.__super__.constructor.apply(this,arguments)}ChatButlerConnect.prototype.error=function(){return Ri("fsm").next(g)};ChatButlerConnect.prototype.connectFailed=function(){return Ri("fsm").next(g)};ChatButlerConnect.prototype.timerFired=function(){Ri("slot").disconnect();return Ri("fsm").next(g)};return ChatButlerConnect}(ci);ei=function(e){Ki(SlotCreate,e);function SlotCreate(){return SlotCreate.__super__.constructor.apply(this,arguments)}SlotCreate.prototype.slotCreated=function(e){return Ri("fsm").next(ai,e)};SlotCreate.prototype.enter=function(e){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_slot_create);return Ri("fsm").poll()};SlotCreate.prototype.directRequest=function(e){return Ri("slot").create(e)};SlotCreate.prototype.slotRequest=function(){return Ri("slot").create({group_select_id:Ri("session").get("group_select_id")})};SlotCreate.prototype.timerFired=function(){Ri("slot").disconnect();return Ri("fsm").next(Fe)};SlotCreate.prototype.leave=function(e){clearTimeout(this.timer);return e()};SlotCreate.prototype.closeButton=function(){return Ri("fsm").next(U)};SlotCreate.prototype.minimizeButton=function(){return Ri("fsm").next(U)};SlotCreate.prototype.inputEnter=function(){var e;e=Ri("chat_view").sendMessage();return Ri("fsm").queue("sendMessage",e)};return SlotCreate}(hi);ai=function(e){Ki(SlotVerify,e);function SlotVerify(){return SlotVerify.__super__.constructor.apply(this,arguments)}SlotVerify.prototype.enter=function(e){if(e.operator){return Ri("fsm").next(ri,e)}else{return Ri("fsm").next(ti,e)}};return SlotVerify}(hi);ti=function(e){Ki(SlotErrorDisconnect,e);function SlotErrorDisconnect(){return SlotErrorDisconnect.__super__.constructor.apply(this,arguments)}SlotErrorDisconnect.prototype.enter=function(e){Ri("slot").disconnect();return Ri("fsm").event("slotDisconnect",e)};SlotErrorDisconnect.prototype.slotDisconnect=function(e){return Ri("fsm").next(ii,e)};return SlotErrorDisconnect}(hi);ii=function(e){Ki(SlotErrorHandle,e);function SlotErrorHandle(){return SlotErrorHandle.__super__.constructor.apply(this,arguments)}SlotErrorHandle.prototype.enter=function(e){Ei("message="+(e!=null?e.message:void 0));if(e){if(e.message==="CUSTOMER_NOT_FOUND"){return Ri("fsm").next(le)}else if(e.message==="EXPIRED"){return Ri("fsm").next(Fe)}else if(e.message==="QUOTA_LIMIT_REACHED"){return Ri("fsm").next(Fe)}else if(e.message==="GROUP_OFFLINE"){return Ri("fsm").next(Fe)}else if(e.message==="NO_SLOT"){return Ri("fsm").next(Fe)}else{return Ri("fsm").next(Fe)}}else{return Ri("fsm").next(Fe)}};return SlotErrorHandle}(hi);q=function(e){Ki(ChatUserQuit,e);function ChatUserQuit(){return ChatUserQuit.__super__.constructor.apply(this,arguments)}ChatUserQuit.prototype.enter=function(){var e;e=Ri("session");Ri("slot").queue("emit","quit");e.setState("Offline");e.deleteConfig();Ri("tracking_event").trigger("chat_quit");e.resetChatDuration();return Ri("fsm").event("done")};ChatUserQuit.prototype.done=function(){return Ri("fsm").next(D)};return ChatUserQuit}(hi);D=function(e){Ki(ChatUserQuitDisconnect,e);function ChatUserQuitDisconnect(){return ChatUserQuitDisconnect.__super__.constructor.apply(this,arguments)}ChatUserQuitDisconnect.prototype.slotDisconnect=function(e){return Ri("fsm").next(te)};return ChatUserQuitDisconnect}(ti);te=function(e){Ki(CheckTranscriptForm,e);function CheckTranscriptForm(){return CheckTranscriptForm.__super__.constructor.apply(this,arguments)}CheckTranscriptForm.prototype.enter=function(){if(Ri("config").transcript_enabled&&Ri("session").hasClientOriginating()){return Ri("fsm").next(bi)}else{return Ri("fsm").next(H)}};return CheckTranscriptForm}(hi);bi=function(e){Ki(TranscriptForm,e);function TranscriptForm(){return TranscriptForm.__super__.constructor.apply(this,arguments)}TranscriptForm.prototype.transitionIn=function(e){return Ri("transcript_view").show(e)};TranscriptForm.prototype.enter=function(){return Ri("tracking_event").trigger("transcript_show")};TranscriptForm.prototype.chatButton=function(){Ri("tracking_event").trigger("transcript_cancel");return Ri("popup").close(function(){return Ri("fsm").next(H)})};TranscriptForm.prototype.directRequest=function(){Ri("tracking_event").trigger("transcript_cancel");return Ri("popup").close(function(){return Ri("fsm").next(H)})};TranscriptForm.prototype.closeButton=function(){Ri("tracking_event").trigger("transcript_cancel");return Ri("popup").close(function(){return Ri("fsm").next(H)})};TranscriptForm.prototype.submitButton=function(){Ri("tracking_event").trigger("transcript_submit");if(Ri("transcript_view").validateTranscriptForm()){return Ri("fsm").next(yi)}};return TranscriptForm}(hi);yi=function(e){Ki(TranscriptSend,e);function TranscriptSend(){return TranscriptSend.__super__.constructor.apply(this,arguments)}TranscriptSend.prototype.transitionIn=function(e){return Ri("progress_view").show(e)};TranscriptSend.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_disconnected);return Ri("slot").sendTranscript(function(){return Ri("fsm").event("sent")})};TranscriptSend.prototype.leave=function(e){clearTimeout(this.timer);return e()};TranscriptSend.prototype.timerFired=function(){return Ri("fsm").next(H)};TranscriptSend.prototype.sent=function(){Ri("fsm").next(H);return{reconnect:function(){return Ri("fsm").next(p)}}};return TranscriptSend}(hi);H=function(e){Ki(CheckPostChatFirst,e);function CheckPostChatFirst(){return CheckPostChatFirst.__super__.constructor.apply(this,arguments)}CheckPostChatFirst.prototype.enter=function(){if(Ri("config").rating_enabled&&Ri("session").hasClientOriginating()){return Ri("fsm").next(C)}else{return Ri("fsm").next(J)}};return CheckPostChatFirst}(hi);J=function(e){Ki(CheckPostChatSecond,e);function CheckPostChatSecond(){return CheckPostChatSecond.__super__.constructor.apply(this,arguments)}CheckPostChatSecond.prototype.enter=function(){if(Ri("config").post_survey_enabled){return Ri("fsm").next($e)}else{return Ri("fsm").next(Q)}};return CheckPostChatSecond}(hi);Q=function(e){Ki(CheckPostChatThird,e);function CheckPostChatThird(){return CheckPostChatThird.__super__.constructor.apply(this,arguments)}CheckPostChatThird.prototype.enter=function(){if(Ri("facebook")&&Ri("config").facebook_like_enabled||Ri("twitter")&&Ri("config").twitter_integration!=="disabled"){return Ri("fsm").next(ui)}else{return Ri("fsm").next(G)}};return CheckPostChatThird}(hi);G=function(e){Ki(CheckPostChatLast,e);function CheckPostChatLast(){return CheckPostChatLast.__super__.constructor.apply(this,arguments)}CheckPostChatLast.prototype.enter=function(){return Ri("fsm").next(M)};return CheckPostChatLast}(hi);C=function(e){Ki(ChatFeedbackRatingComposite,e);function ChatFeedbackRatingComposite(){return ChatFeedbackRatingComposite.__super__.constructor.apply(this,arguments)}ChatFeedbackRatingComposite.prototype.transitionIn=function(e){return Ri("feedback_rating_composite_view").show(e)};ChatFeedbackRatingComposite.prototype.enter=function(){return Ri("tracking_event").trigger("feedback_rating_show")};ChatFeedbackRatingComposite.prototype.trySubmit=function(){if(Ri("feedback_rating_composite_view").isValid()){return Ri("fsm").event("done")}else{Ri("tracking_event").trigger("feedback_rating_cancel");return Ri("fsm").next(J)}};ChatFeedbackRatingComposite.prototype.closeButton=function(){return Ri("fsm").event("trySubmit")};ChatFeedbackRatingComposite.prototype.directRequest=function(){return Ri("fsm").event("trySubmit")};ChatFeedbackRatingComposite.prototype.chatButton=function(){return Ri("fsm").event("trySubmit")};ChatFeedbackRatingComposite.prototype.submitButton=function(){if(Ri("feedback_rating_composite_view").isValid()){return Ri("fsm").event("done")}else{return Ri("fsm").event("cancel")}};ChatFeedbackRatingComposite.prototype.done=function(){var e;e=new me(Ri("rating_view"),Ri("feedback_view"));e.send();return Ri("fsm").next(J)};return ChatFeedbackRatingComposite}(hi);ui=function(e){Ki(SocialComposite,e);function SocialComposite(){return SocialComposite.__super__.constructor.apply(this,arguments)}SocialComposite.prototype.transitionIn=function(e){return Ri("social_composite_view").show(e)};SocialComposite.prototype.enter=function(){return Ri("tracking_event").trigger("social_composite_show")};SocialComposite.prototype.closeButton=function(){Ri("tracking_event").trigger("social_composite_cancel");return Ri("fsm").next(G)};SocialComposite.prototype.directRequest=function(){Ri("tracking_event").trigger("social_composite_cancel");return Ri("fsm").next(G)};SocialComposite.prototype.chatButton=function(){Ri("tracking_event").trigger("social_composite_cancel");return Ri("fsm").next(G)};return SocialComposite}(hi);$e=function(e){Ki(PostSurveyForm,e);function PostSurveyForm(){return PostSurveyForm.__super__.constructor.apply(this,arguments)}PostSurveyForm.prototype.transitionIn=function(e){return Ri("survey_view").showPostSurvey(e)};PostSurveyForm.prototype.enter=function(){return Ri("tracking_event").trigger("post_survey_show")};PostSurveyForm.prototype.closeButton=function(){Ri("tracking_event").trigger("post_survey_cancel");return Ri("fsm").next(Q)};PostSurveyForm.prototype.directRequest=function(){Ri("tracking_event").trigger("post_survey_cancel");return Ri("fsm").next(Q)};PostSurveyForm.prototype.chatButton=function(){Ri("tracking_event").trigger("post_survey_cancel");return Ri("fsm").next(Q)};PostSurveyForm.prototype.select=function(e){var t;Ri("tracking_event").trigger("post_survey_submit");t=new di;t.send(Ri("config")["post_survey_option0"+e],e);return Ri("fsm").next(Q)};return PostSurveyForm}(hi);M=function(e){Ki(ChatQuit,e);function ChatQuit(){return ChatQuit.__super__.constructor.apply(this,arguments)}ChatQuit.prototype.transitionIn=function(e){return Ri("popup").close(e)};ChatQuit.prototype.enter=function(){return Ri("fsm").next(Re)};return ChatQuit}(hi);U=function(e){Ki(ChatWaitQuit,e);function ChatWaitQuit(){return ChatWaitQuit.__super__.constructor.apply(this,arguments)}ChatWaitQuit.prototype.transitionIn=function(e){return Ri("popup").close(e)};ChatWaitQuit.prototype.slotCreated=function(e){return Ri("fsm").next(V)};return ChatWaitQuit}(hi);V=function(e){Ki(ChatSendQuit,e);function ChatSendQuit(){return ChatSendQuit.__super__.constructor.apply(this,arguments)}ChatSendQuit.prototype.done=function(){return Ri("fsm").next(Re)};return ChatSendQuit}(q);j=function(e){Ki(ChatQuitWaitDisconnect,e);function ChatQuitWaitDisconnect(){return ChatQuitWaitDisconnect.__super__.constructor.apply(this,arguments)}ChatQuitWaitDisconnect.prototype.slotDisconnect=function(e){return Ri("fsm").next(E,e)};return ChatQuitWaitDisconnect}(ti);E=function(e){Ki(ChatQuitWait,e);function ChatQuitWait(){return ChatQuitWait.__super__.constructor.apply(this,arguments)}ChatQuitWait.prototype.transitionIn=function(e){return Ri("popup").show(function(){Ri("chat_view").showOperatorQuitInfo();return e()})};ChatQuitWait.prototype.enter=function(){var e;e=Ri("session");Ri("fsm").reset();e.setState("Offline");e.deleteConfig();Ri("tracking_event").trigger("chat_quit");return e.resetChatDuration()};ChatQuitWait.prototype.closeButton=function(){return Ri("fsm").next(te)};ChatQuitWait.prototype.minimizeButton=function(){return Ri("fsm").next(te)};ChatQuitWait.prototype.directRequest=function(){return Ri("fsm").next(te)};ChatQuitWait.prototype.chatButton=function(){return Ri("fsm").next(te)};ChatQuitWait.prototype.inputEnter=function(e){Ri("tracking_event").trigger("chat_requested");Ri("fsm").queue("inputEnter",e);Ri("fsm").queue("slotRequest");return Ri("fsm").next(ci)};return ChatQuitWait}(hi);A=function(e){Ki(ChatMinimizedQuitWaitDisconnect,e);function ChatMinimizedQuitWaitDisconnect(){return ChatMinimizedQuitWaitDisconnect.__super__.constructor.apply(this,arguments)}ChatMinimizedQuitWaitDisconnect.prototype.slotDisconnect=function(e){return Ri("fsm").next(B,e)};return ChatMinimizedQuitWaitDisconnect}(ti);B=function(e){Ki(ChatMinimizedQuitWait,e);function ChatMinimizedQuitWait(){return ChatMinimizedQuitWait.__super__.constructor.apply(this,arguments)}ChatMinimizedQuitWait.prototype.enter=function(){var e;e=Ri("session");e.setState("Offline");e.deleteConfig();Ri("tracking_event").trigger("chat_quit");return e.resetChatDuration()};ChatMinimizedQuitWait.prototype.chatButton=function(){return Ri("fsm").next(E)};ChatMinimizedQuitWait.prototype.directRequest=function(){return Ri("fsm").next(E)};return ChatMinimizedQuitWait}(hi);ri=function(e){Ki(SlotStart,e);function SlotStart(){return SlotStart.__super__.constructor.apply(this,arguments)}SlotStart.prototype.enter=function(e){var t,i;i=Ri("session");t=i.get("chatbutler_topic");i.resetSession();i.set("id",e.id);i.set("chat_meta_id",e.chat_meta_id);i.set("was_proactive",false);i.resetStats();i.setOperator(e.operator);Ri("tracking").startSlot();return Ri("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,Ri("config").status_message,function(){if(t!=null){Ri("chat_view").sendForwardMessage()}else{Ri("chat_view").sendWelcomeMessage()}Ri("tracking_event").trigger("chat_connected");if(Ri("popup").isVisible()){return Ri("fsm").next(p)}else{return Ri("fsm").next(P)}})};return SlotStart}(hi);p=function(e){Ki(Chat,e);function Chat(){return Chat.__super__.constructor.apply(this,arguments)}Chat.prototype.enter=function(){if(Ri("config").geo_type==="browser"){Ri("session").getLocation()}Ri("slot").queue("emit","chat");Ri("fsm").poll();return Ri("button").clear()};Chat.prototype.persist=function(){Ri("session").setState("Chat",hi.timeout_offsite);return Ri("session").saveConfig()};Chat.prototype.slotRequest=function(){};Chat.prototype.transitionIn=function(e){Ri("button").fadeOutEyecatcher();return Ri("chat_view").show(e)};Chat.prototype.inputEnter=function(){var e;e=Ri("chat_view").sendMessage();return Ri("fsm").event("sendMessage",e)};Chat.prototype.chipSelected=function(e){e=Ri("chat_view").sendChipMessage(e);return Ri("fsm").event("sendMessage",e)};Chat.prototype.chatButton=function(){return Ri("fsm").next(P)};Chat.prototype.minimizeButton=function(){return Ri("fsm").next(P)};Chat.prototype.directRequest=function(){return Ri("fsm").next(P)};Chat.prototype.closeButton=function(){return Ri("fsm").next(q)};Chat.prototype.sendMessage=function(e){var t,i;if(!(e!=null?e.length:void 0)){return}t=Ri("session");Ri("fsm").event("persist");if(!t.hasClientOriginating()){t.startChatDuration();Ri("tracking_event").trigger("chat_started");i=t.get("was_proactive");if(i&&i!=="false"){Ri("tracking_event").trigger("chat_started_proactive")}}t.incClientOriginating();Ri("tracking").sendMessage();Ri("tracking_event").trigger("message_operator_terminating");Ri("slot").queue("emit","chat_message",e);if(!(Ri("popup").isActive()&&Ri("config").audio_only_inactive)){return Ri("sound").play("message_sent")}};Chat.prototype.requestUrlInfo=function(e){return Ri("slot").urlinfo(e.url,e.callback)};Chat.prototype.goalReached=function(){return Ri("slot").queue("emit","update_info",Ri("session").packet())};Chat.prototype.locationchange=function(e){return Ri("slot").queue("emit","update_info",Ri("session").packet())};Chat.prototype.hashchange=function(e){return Ri("slot").queue("emit","update_info",Ri("session").packet())};Chat.prototype.pushstate=function(e){Ri("slot").queue("emit","update_info",Ri("session").packet());return Ri("goal").check()};Chat.prototype.updateAPI=function(){Ri("session").updateUserData();return Ri("slot").queue("emit","update_info_api",Ri("session").packet())};Chat.prototype.livePreview=function(e){return Ri("slot").queue("emit","live_preview",e)};Chat.prototype.receiveMessage=function(e){Ri("fsm").event("persist");if(!Ri("session").hasClientTerminating()){Ri("tracking_event").trigger("message_client_terminating_first")}Ri("session").incClientTerminating();Ri("tracking").receiveMessage();Ri("tracking_event").trigger("message_client_terminating");if(!(Ri("popup").isActive()&&Ri("config").audio_only_inactive)){Ri("sound").play("message_received")}return Ri("chat_view").receiveMessage(e.from,e.body)};Chat.prototype.stateComposing=function(){return Ri("slot").queue("emit","composing")};Chat.prototype.statePaused=function(){return Ri("slot").queue("emit","paused")};Chat.prototype.stateActive=function(){return Ri("slot").queue("emit","active")};Chat.prototype.stateInactive=function(){return Ri("slot").queue("emit","inactive")};Chat.prototype.receiveComposing=function(e){if(Ri("config").emit_chat_state){return Ri("chat_view").stateComposing(e.from)}};Chat.prototype.receivePaused=function(e){if(Ri("config").emit_chat_state){return Ri("chat_view").statePaused(e.from)}};Chat.prototype.receiveBlock=function(){return Ri("fsm").next(f)};Chat.prototype.receiveInactive=function(e){return Ri("fsm").next(S)};Chat.prototype.receiveQuit=function(){return Ri("fsm").next(j)};Chat.prototype.receiveSwitch=function(e){return Ri("fsm").next(oi)};Chat.prototype.receiveName=function(e){return Ri("session").set("client_name",e.name)};Chat.prototype.receiveEmail=function(e){return Ri("session").set("client_email",e.email)};Chat.prototype.receiveLocale=function(e){return Ri("session").set("locale",e.locale)};Chat.prototype.receiveAdditional=function(e){return Ri("session").set("client_additional0"+e.num+"_value",e.value)};Chat.prototype.receiveReplaceText=function(e){return Ri("chat_view").replaceText(e)};Chat.prototype.receiveScreenshot=function(i){var t,r,n,o;t=Ri("session").get("chat_meta_id");r=Ri("config").customer_id;o=Ri("session").get("id");n=new Wt;if(n.unsupported()){return i(true)}Ei("receiveScreenshot::load");return n.load(function(){var e;Ei("receiveScreenshot::take");e=n.take();return e.then(function(e){return function(e){Ei("receiveScreenshot::take ok");return n.crossDomainPost("https://api.userlike.com/api/client/message/chat_meta/screenshot/",{id:t,customer_id:r,screenshot:e.toDataURL("image/png"),session_id:o},function(e,t){Ei("receiveScreenshot::sent err="+e+" url="+(t!=null?t.url:void 0));return i(e,t!=null?t.id:void 0)})}}(this),function(e){return function(){Ei("receiveScreenshot::take failed");return i(true)}}(this))["catch"](function(e){Ei("receiveScreenshot::take failed");return i(true)})})};Chat.prototype.receivePush=function(e){var t;t=new vt;return t.send(e.url,e.callback)};Chat.prototype.receiveDownload=function(e){return Ri("chat_view").receiveDownload(e.from,e.url,e.name)};Chat.prototype.receiveImage=function(e){return Ri("chat_view").receiveImage(e.from,e.url,e.thumbnail_url,e.title)};Chat.prototype.receiveVideo=function(e){return Ri("chat_view").receiveVideo(e.from,e.url,e.thumbnail_url,e.title)};Chat.prototype.receiveChips=function(e){return Ri("chat_view").receiveChips(e.choices,e.title)};Chat.prototype.receiveLinks=function(e){return Ri("chat_view").receiveLinks(e.links)};Chat.prototype.receiveOperatorDisconnect=function(){return Ri("fsm").next(O)};Chat.prototype.receiveHibernate=function(){return Ri("fsm").next(Ht)};Chat.prototype.receiveSlot=function(e){Ri("session").setOperator(e.operator);return Ri("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,Ri("config").status_message,function(){})};Chat.prototype.receiveForward=function(e){Ri("session").setOperator(e.operator);return Ri("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,Ri("config").status_message,function(){return Ri("chat_view").sendForwardMessage()})};Chat.prototype.receiveOffline=function(e){Ri("slot").disconnect();return Ri("fsm").next(T)};Chat.prototype.disconnect=function(){return Ri("fsm").next(F)};Chat.prototype.injectBubble=function(e){var t;Ri("chat_view").injectInContent(e);if(e.extract_callback){t=e.extract_callback(e.body)}else{t=Gi(e.body)}Ri("fsm").event("sendMessage",Gi(e.prefix));return Ri("fsm").event("sendMessage",t)};return Chat}(hi);P=function(e){Ki(ChatMinimized,e);function ChatMinimized(){return ChatMinimized.__super__.constructor.apply(this,arguments)}ChatMinimized.prototype.enter=function(){Ri("tracking_event").trigger("chat_window_minimzed");return Ri("slot").queue("emit","minize")};ChatMinimized.prototype.persist=function(){var e;e=Ri("session");e.setState("ChatMinimized",hi.timeout_offsite);return e.saveConfig()};ChatMinimized.prototype.transitionIn=function(e){Ri("popup").hide(e);return Ri("button").clear()};ChatMinimized.prototype.inputEnter=function(){};ChatMinimized.prototype.chatButton=function(){Ri("tracking_event").trigger("chat_window_maximized");return Ri("fsm").next(p)};ChatMinimized.prototype.directRequest=function(){Ri("tracking_event").trigger("chat_window_maximized");return Ri("fsm").next(p)};ChatMinimized.prototype.receiveMessage=function(e){var t,i,r;t=Ri("session");Ri("fsm").event("persist");i=Ri("tracking_event");if(!t.hasClientTerminating()){i.trigger("message_client_terminating_first");r=t.get("was_proactive");if(r&&r!=="false"){i.trigger("message_client_terminating_first_proactive")}}t.incClientTerminating();Ri("tracking").receiveMessage();i.trigger("message_client_terminating");if(!(Ri("popup").isActive()&&Ri("config").audio_only_inactive)){Ri("sound").play("message_received")}return Ri("chat_view").receiveMessage(e.from,e.body,e.sent_at)};ChatMinimized.prototype.receiveDownload=function(e){return Ri("chat_view").receiveDownload(e.from,e.url,e.name)};ChatMinimized.prototype.receiveImage=function(e){return Ri("chat_view").receiveImage(e.from,e.url,e.thumbnail_url,e.title)};ChatMinimized.prototype.receiveVideo=function(e){return Ri("chat_view").receiveVideo(e.from,e.url,e.thumbnail_url,e.title)};ChatMinimized.prototype.receiveChips=function(e){return Ri("chat_view").receiveChips(e.choices,e.title)};ChatMinimized.prototype.receiveLinks=function(e){return Ri("chat_view").receiveLinks(e.links)};ChatMinimized.prototype.receiveQuit=function(){return Ri("fsm").next(A)};return ChatMinimized}(p);S=function(e){Ki(ChatInactive,e);function ChatInactive(){return ChatInactive.__super__.constructor.apply(this,arguments)}ChatInactive.prototype.enter=function(){return Ri("fsm").next(Fe)};return ChatInactive}(hi);f=function(e){Ki(ChatBlocked,e);function ChatBlocked(){return ChatBlocked.__super__.constructor.apply(this,arguments)}ChatBlocked.prototype.transitionIn=function(e){return Ri("popup").close(function(){return Ri("popup").hideTab(e)})};ChatBlocked.prototype.enter=function(){return Ri("session").set("blocked",1)};return ChatBlocked}(hi);F=function(e){Ki(ChatReconnectingIntermediate,e);function ChatReconnectingIntermediate(){return ChatReconnectingIntermediate.__super__.constructor.apply(this,arguments)}ChatReconnectingIntermediate.prototype.reconnecting=function(){};ChatReconnectingIntermediate.prototype.reconnect=function(){};ChatReconnectingIntermediate.prototype.connect=function(){return Ri("fsm").next(Rt)};ChatReconnectingIntermediate.prototype.reconnectFailed=function(){return Ri("fsm").next(ti)};ChatReconnectingIntermediate.prototype.timerFired=function(){return Ri("fsm").next(R)};ChatReconnectingIntermediate.prototype.enter=function(){return this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout)};ChatReconnectingIntermediate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ChatReconnectingIntermediate}(hi);R=function(e){Ki(ChatReconnecting,e);function ChatReconnecting(){return ChatReconnecting.__super__.constructor.apply(this,arguments)}ChatReconnecting.prototype.transitionIn=function(e){return Ri("progress_view").show(e)};ChatReconnecting.prototype.reconnecting=function(){};ChatReconnecting.prototype.reconnect=function(){};ChatReconnecting.prototype.connect=function(){return Ri("fsm").next(Rt)};ChatReconnecting.prototype.reconnectFailed=function(){return Ri("fsm").next(ti)};ChatReconnecting.prototype.timerFired=function(){return Ri("fsm").next(ti)};ChatReconnecting.prototype.enter=function(){return this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_disconnected)};ChatReconnecting.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ChatReconnecting}(hi);oi=function(e){Ki(SlotSwitchDisconnect,e);function SlotSwitchDisconnect(){return SlotSwitchDisconnect.__super__.constructor.apply(this,arguments)}SlotSwitchDisconnect.prototype.slotDisconnect=function(e){return Ri("fsm").next(ni,e)};return SlotSwitchDisconnect}(ti);ni=function(e){Ki(SlotSwitch,e);function SlotSwitch(){return SlotSwitch.__super__.constructor.apply(this,arguments)}SlotSwitch.prototype.transitionIn=function(e){return Ri("message_view").showTransfer(e)};SlotSwitch.prototype.transitionOut=function(e){return Ri("popup").close(e)};SlotSwitch.prototype.chatButton=function(){return Ri("fsm").next(si)};SlotSwitch.prototype.closeButton=function(){return Ri("fsm").next(si)};SlotSwitch.prototype.minimizeButton=function(){return Ri("fsm").next(si)};return SlotSwitch}(hi);si=function(e){Ki(SlotSwitchIdle,e);function SlotSwitchIdle(){return SlotSwitchIdle.__super__.constructor.apply(this,arguments)}SlotSwitchIdle.prototype.chatButton=function(){return Ri("fsm").next(ki)};SlotSwitchIdle.prototype.directRequest=function(){return Ri("fsm").next(ki)};return SlotSwitchIdle}(hi);I=function(e){Ki(ChatReopen,e);function ChatReopen(){return ChatReopen.__super__.constructor.apply(this,arguments)}ChatReopen.prototype.enter=function(e){Ri("fsm").event("receiveMessage",e);return Ri("fsm").next(p)};return ChatReopen}(p);Ht=function(e){Ki(ServerHibernate,e);function ServerHibernate(){return ServerHibernate.__super__.constructor.apply(this,arguments)}ServerHibernate.prototype.transitionIn=function(e){return Ri("progress_view").show(e)};ServerHibernate.prototype.connect=function(){return Ri("fsm").next(Gt)};ServerHibernate.prototype.reconnectFailed=function(){return Ri("fsm").next(T)};ServerHibernate.prototype.timerFired=function(){return Ri("fsm").next(T)};ServerHibernate.prototype.enter=function(){return this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_hibernate)};ServerHibernate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ServerHibernate}(hi);Gt=function(e){Ki(ServerHibernateWakeup,e);function ServerHibernateWakeup(){return ServerHibernateWakeup.__super__.constructor.apply(this,arguments)}ServerHibernateWakeup.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_hibernate);return Ri("slot").wakeup()};ServerHibernateWakeup.prototype.wakeupDone=function(e){return Ri("fsm").next(Jt,e)};ServerHibernateWakeup.prototype.timerFired=function(){return Ri("fsm").next(T)};ServerHibernateWakeup.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ServerHibernateWakeup}(hi);Jt=function(e){Ki(ServerHibernateWakeupSlotVerify,e);function ServerHibernateWakeupSlotVerify(){return ServerHibernateWakeupSlotVerify.__super__.constructor.apply(this,arguments)}ServerHibernateWakeupSlotVerify.prototype.enter=function(e){if(e.operator){return Ri("fsm").next(p)}else{return Ri("fsm").next(T)}};ServerHibernateWakeupSlotVerify.prototype.transitionOut=function(e){return Ri("popup").close(e)};return ServerHibernateWakeupSlotVerify}(hi);O=function(e){Ki(ChatOperatorDisconnect,e);function ChatOperatorDisconnect(){return ChatOperatorDisconnect.__super__.constructor.apply(this,arguments)}ChatOperatorDisconnect.prototype.transitionIn=function(e){return Ri("progress_view").show(e)};ChatOperatorDisconnect.prototype.receiveOperatorReconnect=function(){return Ri("fsm").next(p)};ChatOperatorDisconnect.prototype.receiveOffline=function(e){Ri("slot").disconnect();return Ri("fsm").next(T)};ChatOperatorDisconnect.prototype.receiveSlot=function(e){Ri("session").setOperator(e.operator);return Ri("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,Ri("config").status_message,function(){return Ri("fsm").next(p)})};ChatOperatorDisconnect.prototype.receiveForward=function(e){Ri("session").setOperator(e.operator);return Ri("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,Ri("config").status_message,function(){Ri("chat_view").sendForwardMessage();return Ri("fsm").next(p)})};ChatOperatorDisconnect.prototype.timerFired=function(){Ri("slot").disconnect();return Ri("fsm").next(T)};ChatOperatorDisconnect.prototype.enter=function(){return this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_disconnected)};ChatOperatorDisconnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ChatOperatorDisconnect}(hi);T=function(e){Ki(ChatOffline,e);function ChatOffline(){return ChatOffline.__super__.constructor.apply(this,arguments)}ChatOffline.prototype.enter=function(){return Ri("fsm").next(Fe)};return ChatOffline}(hi);jt=function(e){Ki(RestartSlot,e);function RestartSlot(){return RestartSlot.__super__.constructor.apply(this,arguments)}RestartSlot.prototype.enter=function(){return Ri("fsm").next(Ot)};return RestartSlot}(hi);Ot=function(e){Ki(RestartCheckUserlikeObject,e);function RestartCheckUserlikeObject(){return RestartCheckUserlikeObject.__super__.constructor.apply(this,arguments)}RestartCheckUserlikeObject.prototype.done=function(){return Ri("fsm").next(Et)};return RestartCheckUserlikeObject}(ie);Et=function(e){Ki(RestartFacebookLoader,e);function RestartFacebookLoader(){return RestartFacebookLoader.__super__.constructor.apply(this,arguments)}RestartFacebookLoader.prototype.done=function(){Ei("RestartFacebookLoader integration="+Ri("config").facebook_integration+" facebook="+Ri("facebook"));return Ri("fsm").next(Dt)};return RestartFacebookLoader}(he);Dt=function(e){Ki(RestartTwitterLoader,e);function RestartTwitterLoader(){return RestartTwitterLoader.__super__.constructor.apply(this,arguments)}RestartTwitterLoader.prototype.done=function(){Ei("RestartTwitterLoader integration="+Ri("config").twitter_integration+" twitter="+Ri("twitter"));return Ri("fsm").next(Mt)};return RestartTwitterLoader}(xi);Mt=function(e){Ki(RestartEventSetup,e);function RestartEventSetup(){return RestartEventSetup.__super__.constructor.apply(this,arguments)}RestartEventSetup.prototype.done=function(e){return Ri("fsm").next(qt,e)};return RestartEventSetup}(ce);qt=function(e){Ki(RestartSocketConnect,e);function RestartSocketConnect(){return RestartSocketConnect.__super__.constructor.apply(this,arguments)}RestartSocketConnect.prototype.connect=function(){return Ri("fsm").next(Rt)};RestartSocketConnect.prototype.slotRestarted=function(e){return Ri("fsm").queue("slotRestarted",e)};RestartSocketConnect.prototype.error=function(){return Ri("fsm").next(Fe)};RestartSocketConnect.prototype.connectFailed=function(){return Ri("fsm").next(Fe)};RestartSocketConnect.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_connect);return Ri("slot").connect()};RestartSocketConnect.prototype.timerFired=function(){return Ri("fsm").next(Fe)};RestartSocketConnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RestartSocketConnect}(hi);Rt=function(e){Ki(RestartSlotCreate,e);function RestartSlotCreate(){return RestartSlotCreate.__super__.constructor.apply(this,arguments)}RestartSlotCreate.prototype.slotRestarted=function(e){return Ri("fsm").next(Vt,e)};RestartSlotCreate.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_slot_create);return Ri("slot").restart()};RestartSlotCreate.prototype.timerFired=function(){Ri("slot").disconnect();return Ri("fsm").next(Fe)};RestartSlotCreate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RestartSlotCreate}(hi);Vt=function(e){Ki(RestartSlotVerify,e);function RestartSlotVerify(){return RestartSlotVerify.__super__.constructor.apply(this,arguments)}RestartSlotVerify.prototype.enter=function(e){if(e.status==="switch"){return Ri("fsm").next(Ft,e)}else if(e.status==="offline"){return Ri("fsm").next(te)}else{return Ri("fsm").next(Re)}};return RestartSlotVerify}(hi);Ft=function(e){Ki(RestartSlotPlayback,e);function RestartSlotPlayback(){return RestartSlotPlayback.__super__.constructor.apply(this,arguments)}RestartSlotPlayback.prototype.slotPlayback=function(e){return Ri("fsm").next(It,e)};RestartSlotPlayback.prototype.enter=function(e){Ri("session").setOperator(e.operator);return Ri("slot").playback()};return RestartSlotPlayback}(hi);It=function(e){Ki(RestartSlotStart,e);function RestartSlotStart(){return RestartSlotStart.__super__.constructor.apply(this,arguments)}RestartSlotStart.prototype.enter=function(e){Ri("tracking_event").trigger("chat_reconnect");Ri("chat_view").playbackSlot(e);if(Ri("session").getState()==="ChatMinimized"){return Ri("fsm").next(P)}else{return Ri("fsm").next(p)}};RestartSlotStart.prototype.requestUrlInfo=function(e){return Ri("slot").urlinfo(e.url,e.callback)};return RestartSlotStart}(hi);ki=function(e){Ki(SwitchSocketConnect,e);function SwitchSocketConnect(){return SwitchSocketConnect.__super__.constructor.apply(this,arguments)}SwitchSocketConnect.prototype.slotRestarted=function(e){return Ri("fsm").queue("slotRestarted",e)};SwitchSocketConnect.prototype.connect=function(){return Ri("fsm").next(gi)};return SwitchSocketConnect}(qt);gi=function(e){Ki(SwitchSlotCreate,e);function SwitchSlotCreate(){return SwitchSlotCreate.__super__.constructor.apply(this,arguments)}SwitchSlotCreate.prototype.slotSwitched=function(e){return Ri("fsm").next(Vt,e)};SwitchSlotCreate.prototype.enter=function(){this.timer=setTimeout(function(){return Ri("fsm").event("timerFired")},hi.timeout_slot_create);return Ri("slot")["switch"]()};return SwitchSlotCreate}(Rt);tt=function(e){Ki(PreviewState,e);function PreviewState(){return PreviewState.__super__.constructor.apply(this,arguments)}PreviewState.prototype.enter=function(){};PreviewState.prototype.close=function(){var e;return(e=Vi())!=null?e.stop():void 0};PreviewState.prototype.closeButton=function(){var e;return(e=Vi())!=null?e.stop():void 0};PreviewState.prototype.minimizeButton=function(){return Ri("popup").hide()};PreviewState.prototype.submitButton=function(){var e;return(e=Vi())!=null?e.cycleView():void 0};PreviewState.prototype.select=function(){var e;return(e=Vi())!=null?e.cycleView():void 0};PreviewState.prototype.leave=function(e){var t,i;t=Ri("config");if((i=Vi())!=null){i.setButton(t)}Ri("popup").setConfig(t).setupTheme();return e()};return PreviewState}(hi);return Qi.exports={FSM:fe,State:hi,Init:Se,Start:fi,CheckScriptPosition:Z,ConfigSetup:ne,FontLoader:ve,SessionSetup:Kt,NoStateCheck:je,ResetState:Tt,WidgetVerify:Oi,Setup:Yt,CustomCSS:oe,BlockedCheck:i,CheckMobileDevice:W,LoadLib:Be,RemoteControlCheck:At,RemoteApiMode:Bt,Blocked:t,ButtonCheck:n,ButtonChange:r,ButtonShow:c,ButtonHidden:a,WidgetInsert:Ti,ButtonHiddenWidgetInsert:u,ButtonEventSetup:o,ButtonInsert:l,SetupTheme:$t,SetupError:Xt,UserlikeReady:Si,RestoreState:zt,Idle:xe,NoCookies:Me,PageUnloading:Ne,Offline:Re,ProactiveTimer:kt,ProactiveSlotCheck:lt,ProactiveSlotUnavailable:gt,ProactiveSlotAvailable:ut,ProactiveEventSetup:it,ProactiveOffer:rt,ProactiveSlotOfferPassiveStart:ht,ProactiveSlotOfferPassive:pt,ProactiveSlotRejected:mt,ProactiveSlotReject:dt,ProactivePassiveSocketConnect:at,ProactivePassiveSlotCreate:nt,ProactivePassiveSlotVerify:st,ProactivePassiveSlotStart:ot,FacebookLoader:he,TwitterLoader:xi,EventSetup:ce,CheckDisclaimer:L,CheckPreChatFirst:K,CheckPreChatSecond:X,CheckPreChatThird:$,CheckSlotAvailable:ee,CheckPreChatLast:Y,PassiveConnectAvailableCheck:We,DisclaimerAvailableCheck:ae,Disclaimer:se,RegisterAvailableCheck:yt,PreSurveyAvailableCheck:Ze,GroupSelectAvailableCheck:ye,Warning:Bi,NoCookiesMessage:Ee,ErrorMessage:le,ExpiredWarning:pe,OfflineMessage:Fe,OfflineMessageForm:qe,OfflineMessageFeedback:Ve,OfflineMessageSend:ze,OfflineMessageDone:Ie,OfflineMessageScreenshot:De,OfflineMessageSent:Ue,RegisterOptions:St,GroupSelect:be,RegisterForm:Ct,RegisterFacebookLogin:xt,RegisterFacebookApiMe:wt,PreSurveyForm:et,PassiveConnectStart:Ye,PassiveConnectOffer:He,PassiveConnectSocketConnect:Ke,PassiveConnectSlotCreate:Ge,PassiveConnectSlotVerify:Qe,PassiveConnectSlotStart:Je,SocketConnect:ci,SlotCreate:ei,SlotVerify:ai,SlotErrorDisconnect:ti,SlotErrorHandle:ii,ChatUserQuit:q,ChatUserQuitDisconnect:D,CheckTranscriptForm:te,TranscriptForm:bi,TranscriptSend:yi,CheckPostChatFirst:H,CheckPostChatSecond:J,CheckPostChatThird:Q,CheckPostChatLast:G,ChatFeedbackRatingComposite:C,SocialComposite:ui,PostSurveyForm:$e,ChatQuit:M,ChatWaitQuit:U,ChatSendQuit:V,ChatQuitWaitDisconnect:j,ChatQuitWait:E,ChatMinimizedQuitWaitDisconnect:A,ChatMinimizedQuitWait:B,SlotStart:ri,Chat:p,ChatMinimized:P,ChatInactive:S,ChatBlocked:f,ChatReconnectingIntermediate:F,ChatReconnecting:R,SlotSwitchDisconnect:oi,SlotSwitch:ni,SlotSwitchIdle:si,ChatReopen:I,ServerHibernate:Ht,ServerHibernateWakeup:Gt,ServerHibernateWakeupSlotVerify:Jt,ChatOperatorDisconnect:O,ChatOffline:T,RestartSlot:jt,RestartFacebookLoader:Et,RestartTwitterLoader:Dt,RestartEventSetup:Mt,RestartSocketConnect:qt,RestartSlotCreate:Rt,RestartSlotVerify:Vt,RestartSlotPlayback:Ft,RestartSlotStart:It,SwitchSocketConnect:ki,SwitchSlotCreate:gi,PreviewState:tt,CheckUserlikeObject:ie,RestartCheckUserlikeObject:Ot}})()},{"./buttons/button_factory.coffee":6,"./config.coffee":8,"./feedback_and_rating.coffee":10,"./font.coffee":11,"./global.coffee":13,"./goal.coffee":14,"./popup.coffee":17,"./push.coffee":21,"./router.coffee":22,"./screenshot.coffee":23,"./session.coffee":24,"./slot.coffee":25,"./survey.coffee":26,"./tracking.coffee":27,"./utils/jq.coffee":31,"./utils/loader.coffee":32,"./utils/message_parser.coffee":33,"./utils/sound.coffee":34,"./utils/utils.coffee":36,"./utils/validator.coffee":37,"./views/chat.coffee":38,"./views/disclaimer.coffee":39,"./views/facebook.coffee":41,"./views/feedback.coffee":42,"./views/feedback_rating_composite.coffee":43,"./views/group_select.coffee":44,"./views/idle.coffee":45,"./views/message.coffee":46,"./views/offline_message.coffee":47,"./views/progress.coffee":48,"./views/rating.coffee":49,"./views/register.coffee":50,"./views/social_composite.coffee":51,"./views/survey.coffee":52,"./views/transcript.coffee":53,"./views/twitter.coffee":54}],13:[function(p,f,e){(function(){var e,i,r,t,n,o,s,a,u,l;if(typeof window.userlike==="undefined"&&window.userlikeConfig!=="undefined"){window.userlike={_config:window.userlikeConfig}}r={CONTEXT:{},jsonp_callbacks:{},userlikeReady:window.userlikeReady||((o=window.userlike._config)!=null?(s=o.options)!=null?s.ready:void 0:void 0),userlikeRemoteReady:window.userlikeRemoteReady||((a=window.userlike._config)!=null?(u=a.options)!=null?u.remoteReady:void 0:void 0),userlike:window.userlike||{},shopifyDoShift:null,messenger:{},is_amd_loader:typeof define==="function"&&define.amd&&typeof p==="function",data:((l=window.userlike._config)!=null?l.custom_data:void 0)||window.userlikeData||{},avoid_globals:false,fsm:null,config:null,session:null,popup:null,idle_view:null,progress_view:null,message_view:null,disclaimer_view:null,offline_message_view:null,register_view:null,group_select_view:null,survey_view:null,chat_view:null,transcript_view:null,rating_view:null,feedback_view:null,twitter_view:null,facebook_view:null,feedback_rating_composite_view:null,social_composite_view:null,slot:null,pusher:null,sound:null,goal:null,button:null,tracking:null,tracking_event:null,facebook:false,twitter:false,version_messenger:"2014",is_mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|UIWebView/i.test(typeof navigator!=="undefined"&&navigator!==null?navigator.userAgent:void 0)};f.exports={get:function(e){if(e==="data"){return window.userlikeData||r["data"]}return r[e]},set:function(e,t){if(e==="data"){return(window.userlikeData||r["data"])[e]=t}return r[e]=t},getData:function(){return window.userlikeData||r["data"]},setData:function(e){if(window.userlikeData!=null){return window.userlikeData=e}else{return r["data"]=e}},setJsonpCallback:function(e,t){return r["CONTEXT"][e]=r["jsonp_callbacks"][e]=t},getJsonpCallback:function(e){return r["jsonp_callbacks"]},getGitVersion:function(){return r.git_version},isMobile:function(){return r.is_mobile}};n=null;try{n=window["localStorage"]}catch(c){i=c}e={setItem:function(e,t){try{n.setItem(e,t);return true}catch(c){i=c;if(this.removeItem(e)){try{n.setItem(e,t);return true}catch(c){i=c}}}return false},getItem:function(e){try{return n.getItem(e)}catch(c){i=c}return null},clear:function(){try{n.clear();return true}catch(c){i=c}return false},removeItem:function(e){try{n.removeItem(e);return true}catch(c){i=c}return false},length:function(){try{return n.length}catch(c){i=c}return 0},key:function(e){try{return n.key(e)}catch(c){i=c}return""}};f.exports.UserlikeLS=e;t=function(){return e!=null?e.getItem("uslk_debug"):void 0};f.exports.isDebugEnabled=t;f.exports._ullog=function(){var e;if(((e=window.__utils__)!=null?e.echo:void 0)&&window.console){__utils__.echo("Client: "+Array.prototype.slice.call(arguments))}try{if(window.console&&t()){return Function.prototype.apply.call(console.log,console,arguments)}}catch(c){}};return f.exports.UL_EMOTICONS=[{image:"emoji_smile.png",equivalents:[":-)",":)"],code:":-)",name:"Smile"},{image:"emoji_wink.png",equivalents:[";-)",";)"],code:";-)",name:"Wink"},{image:"emoji_wink_tongue.png",equivalents:[";-P",";P",";-p",";p"],code:";-P",name:"Wink Tongue"},{image:"emoji_grin.png",equivalents:[":-D",":D"],code:":-D",name:"Grin"},{image:"emoji_blushing.png",equivalents:[":-]",":]",":-`"],code:":-]",name:"Blushing"},{image:"emoji_kiss.png",equivalents:[":-*",":*"],code:":-*",name:"Kiss"},{image:"emoji_cool.png",equivalents:["B-)","B)","8-)","8)"],code:"B-)",name:"Cool"},{image:"emoji_innocent.png",equivalents:["O:-)","O:)","o:-)","o:)","0:-)","0:)"],code:"O:-)",name:"Innocent"},{image:"emoji_tongue.png",equivalents:[":-P",":P",":-p",":p"],code:":-P",name:"Tongue"},{image:"emoji_smirk.png",equivalents:[":->",":>"],code:":->",name:"Smirk"},{image:"emoji_lips_are_sealed.png",equivalents:[":-X",":-x"],code:":-X",name:"Lips Are Sealed"},{image:"emoji_confused.png",equivalents:[":-?",":?"],code:":-?",name:"Confused"},{image:"emoji_embarrassed.png",equivalents:[":-[",":["],code:":-[",name:"Embarrassed"},{image:"emoji_frown.png",equivalents:[":-(",":("],code:":-(",name:"Frown"},{image:"emoji_gasp.png",equivalents:[":-o",":o",":-O",":O","=-o","=-O"],code:":-o",name:"Gasp"},{image:"emoji_grimmace.png",equivalents:["X-(","x-(","X(","x("],code:"X-(",name:"Grimmace"},{image:"emoji_mischievous.png",equivalents:[">:-)",">:)"],code:">:-)",name:"Mischievous"},{image:"emoji_oops.png",equivalents:[":-!",":!"],code:":-!",name:"Oops"},{image:"emoji_shouting.png",equivalents:[">:-O",">:O",">:-o",">:o",":-@",":@",">:-@",">:@",">:-V",">:V",":-V",":V"],code:">:-O",name:"Shouting"},{image:"emoji_sleeping.png",equivalents:["|-)","I-)","I-|","|-|","|-*","|-*","|-.","|-."],code:"|-)",name:"Sleeping"},{image:"emoji_straight_faced.png",equivalents:[":-|",":|",":-I",":I"],code:":-|",name:"Straight Faced"},{image:"emoji_undecided.png",equivalents:[":-U",":U"],code:":-U",name:"Undecided"},{image:"emoji_evil.png",equivalents:[">:-D",">:D"],code:">:-D",name:"Evil"},{image:"emoji_angry.png",equivalents:[">:-(",">:("],code:">:-(",name:"Angry"}]})()},{}],14:[function(t,i,e){(function(){var e,u,l;l=t("./global.coffee").get;u=t("./global.coffee")._ullog;e=function(){function WidgetGoal(){}WidgetGoal.prototype.check=function(){var e,t,i,r,n,o,s,a;e=l("config");s=l("session");if(!e.goals.length){return u("WidgetGoal::check no goals")}else{r=e.goals;o=[];for(t=0,i=r.length;t<i;t++){a=r[t];u("WidgetGoal::check "+a.url+" == "+document.location.href);if(((n=document.location.href)!=null?n.indexOf(a.url):void 0)>-1){u("WidgetGoal::check match "+a.url);if(s.get("uuid")&&!s.getGoal(a.key)){s.setGoal(a.key);s.set("goal",a.name);this.send(a);l("fsm").event("goalReached")}break}else{o.push(void 0)}}return o}};WidgetGoal.prototype.send=function(e){var t,i,r,n;t=l("config");r=l("session");n="//api.userlike.com/api/client/goal/";n+="?chat_meta_id="+encodeURIComponent(r.get("chat_meta_id"));n+="&customer_id="+encodeURIComponent(t.customer_id);n+="&goal_key="+encodeURIComponent(e.key);n+="&_="+ +new Date;u("WidgetGoal::send "+n);i=document.createElement("img");i.setAttribute("src",n);i.setAttribute("width",1);i.setAttribute("height",1);i.style="width: 1px!important; height: 1px!important;";i.className="userlike-tracking-img";return document.body.appendChild(i)};return WidgetGoal}();return i.exports.WidgetGoal=e})()},{"./global.coffee":13}],15:[function(l,c,e){var p=function(e,t){return function(){return e.apply(t,arguments)}},f=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var r,n,e,t,o,s,i,a,u;u=l("./global.coffee").get;a=l("./global.coffee")._ullog;i=l("./utils/jq.coffee")._jq;e=function(){function KeyHandlerFactory(){}KeyHandlerFactory.prototype.get=function(e,t){var i;i=u("config");if(!i.data_privacy&&i.live_preview){return new o(e,t)}else{return new r(e,t)}};return KeyHandlerFactory}();t=function(){function KeyHandlerFactoryAndroid(){}KeyHandlerFactoryAndroid.prototype.get=function(e,t){var i;i=u("config");if(!i.data_privacy&&i.live_preview){return new s(e,t)}else{return new n(e,t)}};return KeyHandlerFactoryAndroid}();r=function(){KeyHandler.PAUSED="Paused";KeyHandler.COMPOSING="Composing";KeyHandler.ACTIVE="Active";KeyHandler.CHAT_STATE_INTERVAL=5e3;KeyHandler.PREVIEW_INTERVAL=500;KeyHandler.fsm=null;KeyHandler.$input=null;KeyHandler.chat_state_timer=null;KeyHandler.chat_state_last_input="";KeyHandler.chat_state_last_length="";KeyHandler.prototype.key_action_event_name="keypress";function KeyHandler(e,t){this.$input=e;this.fsm=t;this.handler=p(this.handler,this);this.chatStateTimer=p(this.chatStateTimer,this);this.chat_state=KeyHandler.PAUSED;this.$input.off().on(this.key_action_event_name,this.handler);this.$input.blur(function(e){return function(){return e.changeChatState(KeyHandler.PAUSED)}}(this));this.$input.focus(function(e){return function(){return e.changeChatState(KeyHandler.ACTIVE)}}(this))}KeyHandler.prototype.chatStateTimer=function(){if(this.chat_state===KeyHandler.COMPOSING&&this.$input.val().length===this.chat_state_last_length){return this.changeChatState(KeyHandler.PAUSED)}else if(this.chat_state===KeyHandler.COMPOSING){this.chat_state_last_length=this.$input.val().length;clearTimeout(this.chat_state_timer);return this.chat_state_timer=setTimeout(this.chatStateTimer,KeyHandler.CHAT_STATE_INTERVAL)}};KeyHandler.prototype.changeChatState=function(e){this.chat_state_last_input=this.chat_state;this.chat_state=e;if(this.chat_state!==this.chat_state_last_input){a("KeyHandler changeChatState name="+this.chat_state);return this.fsm.event("state"+this.chat_state)}};KeyHandler.prototype.clearTimer=function(){clearTimeout(this.chat_state_timer);return this.chat_state_timer=null};KeyHandler.prototype.handler=function(e){var t;e=i.event(e);t=e.which;if(t===13&&e.shiftKey){}else if(t===13){this.changeChatState(KeyHandler.PAUSED);u("fsm").event("inputEnter");this.clearTimer();i.event(e).preventDefault()}else{this.changeChatState(KeyHandler.COMPOSING);clearTimeout(this.chat_state_timer);return this.timer=setTimeout(this.chatStateTimer,KeyHandler.CHAT_STATE_INTERVAL)}};return KeyHandler}();n=function(e){f(KeyHandlerAndroid,e);function KeyHandlerAndroid(){this.handler=p(this.handler,this);this.livePreviewTimer=p(this.livePreviewTimer,this);return KeyHandlerAndroid.__super__.constructor.apply(this,arguments)}KeyHandlerAndroid.prototype.livePreviewTimer=function(){var e;e=this.$input.val();if(e!==this.live_preview_last_input&&e.indexOf(u("config").default_textarea)===-1){a("KeyHandlerPreview livePreviewTimer send event livePreview val="+this.$input.val());this.live_preview_last_input=e}clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_timer=setTimeout(this.livePreviewTimer,r.PREVIEW_INTERVAL)};KeyHandlerAndroid.prototype.handler=function(e){KeyHandlerAndroid.__super__.handler.call(this,e);return this.live_preview_timer=this.live_preview_timer||setTimeout(this.livePreviewTimer,r.PREVIEW_INTERVAL)};return KeyHandlerAndroid}(r);o=function(e){f(KeyHandlerLivePreview,e);function KeyHandlerLivePreview(){this.handler=p(this.handler,this);this.livePreviewTimer=p(this.livePreviewTimer,this);return KeyHandlerLivePreview.__super__.constructor.apply(this,arguments)}KeyHandlerLivePreview.prototype.clearTimer=function(){KeyHandlerLivePreview.__super__.clearTimer.call(this);clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_last_input=""};KeyHandlerLivePreview.prototype.livePreviewTimer=function(){var e;e=this.$input.val();if(e!==this.live_preview_last_input&&e.indexOf(u("config").default_textarea)===-1){a("KeyHandlerPreview livePreviewTimer send event livePreview val="+this.$input.val());this.live_preview_last_input=e;this.fsm.event("livePreview",e)}clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_timer=setTimeout(this.livePreviewTimer,r.PREVIEW_INTERVAL)};KeyHandlerLivePreview.prototype.handler=function(e){KeyHandlerLivePreview.__super__.handler.call(this,e);return this.live_preview_timer=this.live_preview_timer||setTimeout(this.livePreviewTimer,r.PREVIEW_INTERVAL)};return KeyHandlerLivePreview}(r);s=function(e){f(KeyHandlerLivePreviewAndroid,e);function KeyHandlerLivePreviewAndroid(){this.handler=p(this.handler,this);this.livePreviewTimer=p(this.livePreviewTimer,this);return KeyHandlerLivePreviewAndroid.__super__.constructor.apply(this,arguments)}KeyHandlerLivePreviewAndroid.prototype.clearTimer=function(){KeyHandlerLivePreviewAndroid.__super__.clearTimer.call(this);clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_last_input=""};KeyHandlerLivePreviewAndroid.prototype.livePreviewTimer=function(){var e;e=this.$input.val();if(e!==this.live_preview_last_input&&e.indexOf(u("config").default_textarea)===-1){a("KeyHandlerPreview livePreviewTimer send event livePreview val="+this.$input.val());this.live_preview_last_input=e;this.fsm.event("livePreview",e)}clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_timer=setTimeout(this.livePreviewTimer,r.PREVIEW_INTERVAL)};KeyHandlerLivePreviewAndroid.prototype.handler=function(e){KeyHandlerLivePreviewAndroid.__super__.handler.call(this,e);return this.live_preview_timer=this.live_preview_timer||setTimeout(this.livePreviewTimer,r.PREVIEW_INTERVAL)};return KeyHandlerLivePreviewAndroid}(n);c.exports.KeyHandlerFactory=e;c.exports.KeyHandlerFactoryAndroid=t;c.exports.KeyHandler=r;c.exports.KeyHandlerAndroid=n;c.exports.KeyHandlerLivePreview=o;return c.exports.KeyHandlerLivePreviewAndroid=o})()},{"./global.coffee":13,"./utils/jq.coffee":31}],16:[function(e,t,i){t.exports.userlike_html='\x3c!--[if IE 8]><div id="userlike" class="lt-ie9"><![endif]--\x3e\n\x3c!--[if gt IE 8]>\x3c!--\x3e<div id="userlike">\x3c!--<![endif]--\x3e\n    <div id="userlike-popup" class="userlike-theme-bg userlike-theme-window-bg-color" style="display:none">\n\n        <div id="userlike-headerbar" class="userlike-drag userlike-theme-bg userlike-theme-headbar-bg-color">\n            <div id="userlike-headerbar-headline" class="userlike-theme-text userlike-theme-headbar-text-color"></div>\n            <i id="userlike-minimize" class="userlike-symbol userlike-symbol-minimize userlike-theme-text userlike-theme-headbar-text-color"></i>\n            <i id="userlike-close" class="userlike-symbol userlike-symbol-close userlike-theme-text userlike-theme-headbar-text-color"></i>\n        </div>\n\n        <div id="userlike-view-container">\n            <div id="userlike-idle" style="display:none"></div>\n            <div id="userlike-progress" style="display:none">\n                <img src="//dq4irj27fs462.cloudfront.net/images/spinner.gif" alt="loading" id="userlike-spinner-gif" style="display:none">\n                <div id="userlike-spinner">\n                  <div id="userlike-bounce-1" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                  <div id="userlike-bounce-2" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                  <div id="userlike-bounce-3" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                </div>\n            </div>\n\n            <div id="userlike-disclaimer" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-disclaimer-headline"></div>\n                \n                \n                <div id="userlike-disclaimer-text-container">\n                    <div id="userlike-disclaimer-text" class="userlike-theme-text userlike-theme-text-default-color"></div>\n                    <div id="userlike-disclaimer-text-bottom-fadeout" class="userlike-theme-gradient userlike-theme-window-bg-color"></div>\n                </div>\n                <div id="userlike-disclaimer-submit">\n                    <i class="userlike-symbol userlike-symbol-check userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                </div>\n            </div>\n\n            <div id="userlike-message" style="display:none">\n                <div id="userlike-message-headline" class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" ></div>\n            </div>\n\n            <div id="userlike-group-select" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-group-select-headline"></div>\n                <div class="userlike-fieldset-wrapper">\n                    <div class="userlike-radio-wrapper" data-select="1">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="2">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="3">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="4">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="5">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="6">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                </div>\n            </div>\n           \n            <div id="userlike-feedback-rating-composite">\n                <div id="userlike-rating" style="display:none">\n                    <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-rating-headline"></div>\n                    <div id="userlike-star-rating">\n                        <span>\n                            <i data-rating="1" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                        <span>\n                            <i data-rating="2" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                        <span>\n                            <i data-rating="3" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                        <span>\n                            <i data-rating="4" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                        <span>\n                            <i data-rating="5" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                   </div>\n                </div>\n                <div id="userlike-feedback" style="display:none">\n                    <form id="userlike-feedback-form" onsubmit="return false;">\n                        <textarea id="userlike-feedback-textarea" class="userlike-theme-text userlike-theme-input-default-text-color"></textarea>\n                    </form>\n                   <i id="userlike-feedback-submit" class="userlike-symbol userlike-symbol-send userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state userlike-disabled"></i>\n                </div>\n            </div>\n            \n            <div id="userlike-survey" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-survey-headline"></div>\n                <div class="userlike-fieldset-wrapper">\n                    <div class="userlike-radio-wrapper" data-select="1">\n                        <input type="radio">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="2">\n                        <input type="radio">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="3">\n                        <input type="radio">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="4">\n                        <input type="radio">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                </div>\n            </div>\n\n            <div id="userlike-social-composite">\n                <div id="userlike-facebook-like" style="display:none">\n                    <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-facebook-like-headline"></div>\n                    <div id="userlike-facebook-like-wrapper"></div>\n                </div>\n                <div id="userlike-twitter-tweet" style="display:none">\n                    <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-twitter-tweet-headline"></div>\n                    <div id="userlike-twitter-tweet-wrapper">\n                    </div>\n                </div>\n            </div>\n\n            <div id="userlike-offline-message" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-offline-message-headline"></div>\n                <div id="userlike-offline-message-text" class="userlike-theme-text userlike-theme-text-default-color"></div>\n                <form id="userlike-offline-message-form" onsubmit="return false;">\n                    <input id="userlike-offline-name" type="text">\n                    <input id="userlike-offline-email" type="email">\n                    <textarea id="userlike-offline-textarea"></textarea>\n                    <div id="userlike-screenshot-wrapper">\n                        <input type="checkbox" id="userlike-screenshot-checkbox" class="userlike-theme-text userlike-theme-text-default-color" name="sendScreenshot" value="1">\n                        <div id="userlike-screenshot-label"></div>\n                    </div>\n                    <div id="userlike-offline-message-submit">\n                        <i class="userlike-symbol userlike-symbol-send userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                    </div>\n                </form>\n            </div>\n\n            <div id="userlike-register" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-register-headline"></div>\n                <div id="userlike-register-text" class="userlike-theme-text userlike-theme-text-default-color"></div>\n                <form id="userlike-register-form" onsubmit="return false;">\n                    <input id="userlike-register-name" class="userlike-theme-text userlike-theme-input-default-text-color" type="text">\n                    <input id="userlike-register-email" class="userlike-theme-text userlike-theme-input-default-text-color" type="email">\n                    <input id="userlike-register-additional01" class="userlike-theme-text userlike-theme-input-default-text-color" type="text">\n                    <input id="userlike-register-additional02" class="userlike-theme-text userlike-theme-input-default-text-color" type="text">\n                    <input id="userlike-register-additional03" class="userlike-theme-text userlike-theme-input-default-text-color" type="text">\n                    <div id="userlike-register-submit">\n                        <i class="userlike-symbol userlike-symbol-send userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                    </div>\n                    <div id="userlike-facebook-connect-submit">\n                        <i class="userlike-symbol userlike-symbol-facebook userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                    </div>\n                </form>\n            </div>\n\n            <div id="userlike-transcript" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-transcript-headline"></div>\n                <div id="userlike-transcript-text" class="userlike-theme-text userlike-theme-text-default-color"></div>\n                <form id="userlike-transcript-form" onsubmit="return false;">\n                    <input id="userlike-transcript-email" class="userlike-theme-text userlike-theme-input-default-text-color" type="email">\n                    <div id="userlike-transcript-submit">\n                        <i class="userlike-symbol userlike-symbol-send userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                    </div>\n                </form>\n            </div>\n\n            <div id="userlike-chat" style="display:none">\n                <div id="userlike-chat-subheader" class="userlike-theme-bg uselike-theme-bg-default-color">\n                    <div id="userlike-spinner" class="userlike-operator-connect-spinner">\n                      <div id="userlike-bounce-1" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                      <div id="userlike-bounce-2" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                      <div id="userlike-bounce-3" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                    </div>\n                    <img id="userlike-subheader-operator-image" src="" alt=""></img>\n                    <div id="userlike-subheader-operator-info-text-wrapper">\n                        <span id="userlike-subheader-operator-info-text" class="userlike-theme-text userlike-theme-headbar-bg-color userlike-adjust-text"></span>\n                    </div>\n                </div>\n                \n                <form id="userlike-chat-form" onsubmit="return false;">\n                    <div id="userlike-chat-content">\n                    </div>\n                    <div id="userlike-chat-scroll-textarea">\n                        <textarea id="userlike-chat-textarea" class="userlike-theme-text userlike-theme-text-default-color"></textarea>\n                        <div id="userlike-emoji-button" class="userlike-emoji userlike-emoji-icon_emoticon"></div>\n                    </div>\n                </form>\n            </div>\n        </div>\n\n        <div id="userlike-footerbar">\n            <div id="userlike-data-privacy"><a target="_blank" rel="noopener" href="#" class="userlike-theme-text userlike-theme-link-text-color" tabindex="-1"></a></div>\n            <div id="userlike-poweredby" class="notranslate userlike-theme-text userlike-theme-link-text-color">{{POWEREDBY_SLOGAN}} <a id="userlike-poweredby-link" class="notranslate userlike-theme-text userlike-theme-link-text-color" target="_blank" rel="noopener" href="{{POWEREDBY_LINK}}" tabindex="-1">Userlike</a></div>\n        </div>\n        <img id="userlike-subheader-operator-image-zoomed" src="" alt="" style="display: none;"></img>\n    </div>\n\n    <div id="userlike-eyecatcher">\n        <i id="userlike-eyecatcher-close" class="userlike-symbol userlike-symbol-close userlike-theme-button-bg-color userlike-theme-text"></i>\n        <div id="userlike-eyecatcher-box">\n            <div id="userlike-eyecatcher-mask">\n                <div id="userlike-eyecatcher-picture"></div>\n            </div>\n            <div id="userlike-eyecatcher-message" class="userlike-theme-button-bg-color userlike-theme-text"></div>\n        </div>\n    </div>\n\n    <div id="userlike-hover-text-container" class="userlike-theme-button-bg-color userlike-theme-bg">\n        <span id="userlike-button-hover-text" class="userlike-theme-text userlike-theme-button-text-color"></span>\n        <div id="userlike-hover-text-arrow"></div>\n    </div>\n\n    <a href="javascript:void(0);" onkeypress="javascript:return false;" id="userlike-tab" class="userlike-theme-button-bg-color userlike-theme-bg" style="">\n        <div id="userlike-button-symbol">\n            <div id="userlike-spinner" class="userlike-button-spinner">\n              <div id="userlike-bounce-1" class="userlike-theme-bg userlike-theme-button-symbol-color"></div>\n              <div id="userlike-bounce-2" class="userlike-theme-bg userlike-theme-button-symbol-color"></div>\n              <div id="userlike-bounce-3" class="userlike-theme-bg userlike-theme-button-symbol-color"></div>\n            </div>\n            <i class="userlike-symbol userlike-theme-text userlike-theme-button-symbol-color"></i>\n        </div>\n        <span id="userlike-button-text" class="userlike-theme-text userlike-theme-button-text-color"></span>\n        <div id="userlike-message-badge" class="userlike-theme-bg userlike-theme-window-bg-color">\n            <div id="userlike-message-badge-count" class="userlike-theme-text userlike-theme-headbar-bg-color"></div>\n        </div>\n    </a>\n</div>\n';t.exports.userlike_css='p#userlike,.userlike { position: static; z-index: 2147483640; overflow: hidden; width: auto; min-width: 0; height: auto; min-height: 0; margin: 0; padding: 0;}#userlike *{ font-family: \'{{FONT}}\', sans-serif; font-size: 13px; font-weight: 400; font-style: normal; font-variant: normal; line-height: 1.5; position: static; top: auto; right: auto; bottom: auto; left: auto; float: none; clear: none; overflow: hidden; width: auto; min-width: 0; height: auto; min-height: 0; margin: 0; padding: 0; cursor: auto; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; text-align: left; white-space: normal; text-decoration: none; text-indent: 0; letter-spacing: normal; word-spacing: normal; text-transform: none; opacity: 1; color: #4b4d4f; border: none; -webkit-border-radius: 0; -moz-border-radius: 0; border-radius: 0; outline-style: none; background: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; text-shadow: none; direction: ltr; unicode-bidi: normal; -moz-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; -webkit-touch-callout: none; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; -ms-border-radius: 0;}a#userlike-tab { line-height: 1; position: fixed; z-index: 2147483640; float: none; clear: none; overflow: hidden; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: auto; min-width: 240px; height: 48px; min-height: 0; max-height: 0; margin: 0; margin-bottom: -8px; padding: 0; padding-right: 32px; padding-bottom: 0; padding-left: 32px; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; text-align: left; white-space: nowrap; text-decoration: none; text-indent: 0; letter-spacing: normal; word-spacing: normal; text-transform: none; text-overflow: ellipsis; opacity: 1; color: #fff; border: none; border-radius: 0; outline-style: none; background: none; -webkit-box-shadow: 0 -5px 30px 0 rgba(0, 0, 0, .1); -moz-box-shadow: 0 -5px 30px 0 rgba(0, 0, 0, .1); box-shadow: 0 -5px 30px 0 rgba(0, 0, 0, .1); text-shadow: none; unicode-bidi: normal; transform: translatez(1px); -webkit-transform: translatez(1px); -moz-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; -webkit-touch-callout: none; -webkit-tap-highlight-color:rgba(0,0,0,0); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}a#userlike-tab #userlike-message-bubble { display: none;}a#userlike-tab.userlike-button-01,a#userlike-tab.userlike-button-02 { padding-left: 28px;}a#userlike-tab.userlike-button-03 { padding-left: 26px;}a#userlike-tab.userlike-button-04 { padding-left: 25px;}a#userlike-tab.userlike-button-offline-01,a#userlike-tab.userlike-button-05,a#userlike-tab.userlike-button-06 { padding-left: 23px;}a#userlike-tab.userlike-button-offline-02{ padding-left: 24px;}a#userlike-tab.userlike-button-offline-03{ padding-left: 29px;}a#userlike-tab.userlike-button-bubble.userlike-button-01 .userlike-symbol{ padding-top: 1px;}a#userlike-tab.userlike-button-bubble.userlike-button-02 .userlike-symbol{ padding-left: 4px;}a#userlike-tab.userlike-button-bubble.userlike-button-03 .userlike-symbol{ padding-top: 2px;}a#userlike-tab.userlike-button-bubble.userlike-button-04 .userlike-symbol{ padding-top: 3px; padding-left: 2px;}a#userlike-tab.userlike-button-bubble.userlike-button-05 .userlike-symbol{ padding-top: 3px; padding-left: 2px;}a#userlike-tab.userlike-button-bubble.userlike-button-06 .userlike-symbol{ padding-top: 2px; padding-left: 2px;}a#userlike-tab.userlike-button-bubble.userlike-button-offline-01 .userlike-symbol{ padding-top: 1px;}a#userlike-tab.userlike-button-bubble.userlike-button-offline-02 .userlike-symbol{ padding-top: 3px; padding-left: 3px;}a#userlike-tab.userlike-button-bubble.userlike-button-offline-03 .userlike-symbol{ padding-top: 3px; padding-right: 3px;}#userlike a#userlike-tab.userlike-button-big { overflow: visible;}#userlike.userlike-mobile a#userlike-tab,#userlike a#userlike-tab.userlike-button-bubble { bottom: -100px; width: 64px; min-width: 64px; max-width: 64px; height: 64px; min-height: 64px; max-height: 64px; padding: 0; border-radius: 50%; overflow: visible;}#userlike.userlike-mobile a#userlike-tab.userlike-button-bubble.userlike-button-05 .userlike-symbol{ padding-top: 3px; padding-left: 4px;}#userlike.userlike-mobile a#userlike-tab.userlike-button-bubble.userlike-button-offline-01 .userlike-symbol{ padding-top: 1px; padding-right: 0px;}#userlike.userlike-mobile a#userlike-tab.userlike-button-bubble.userlike-button-offline-02 .userlike-symbol{ padding-top: 3px; padding-right: 0px;}#userlike.userlike-mobile a#userlike-tab.userlike-button-bubble.userlike-button-offline-03 .userlike-symbol{ padding-top: 3px; padding-right: 3px;}#userlike.userlike-mobile a#userlike-tab.userlike-slideup,#userlike a#userlike-tab.userlike-button-bubble.userlike-slideup{ bottom: 16px; -webkit-transition: bottom .5s ease-in-out; -moz-transition: bottom .5s ease-in-out; -o-transition: bottom .5s ease-in-out; transition: bottom .5s ease-in-out;}#userlike a#userlike-tab.userlike-button-bubble > #userlike-message-badge { position: absolute; top: -2px; right: -1px; display: none; width: 20px; height: 20px; border-radius: 50%; box-shadow: 0 9px 20px 0 rgba(0,0,0,0.25);}#userlike a#userlike-tab.userlike-button-big > #userlike-message-badge { position: absolute; top: -5px; right: -5px; display: none; width: 20px; height: 20px; border-radius: 50%; box-shadow: 0 9px 20px 0 rgba(0,0,0,0.25);}#userlike a#userlike-tab #userlike-message-badge.userlike-show { display: block;}#userlike a#userlike-tab #userlike-message-badge #userlike-message-badge-count { text-align: center;}#userlike.userlike-mobile #userlike-button-symbol,#userlike a#userlike-tab.userlike-button-bubble #userlike-button-symbol { width: 63px; height: 43px; margin-top: 9px !important; text-align: center;}#userlike.userlike-mobile #userlike-button-symbol #userlike-spinner,#userlike a#userlike-tab.userlike-button-bubble #userlike-button-symbol #userlike-spinner{ margin-left: 13px; margin-top: 15px;}a#userlike-tab #userlike-button-text,#userlike #userlike-button-hover-text{ font-size: 14px !important; display: inline-block!important; position: relative !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; -webkit-user-select: none; -moz-user-select: noe; -ms-user-select: none; user-select: none; text-align: left; vertical-align: top !important; text-decoration: none; text-indent: 0; word-spacing: normal; text-transform: none; opacity: 1; outline-style: none; text-shadow: none; unicode-bidi: normal; -moz-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; -webkit-touch-callout: none; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; cursor: pointer;}#userlike .userlike-button-bubble #userlike-button-text { display: none!important;}a#userlike-tab #userlike-button-text { top: 8px !important; padding-left: 10px !important; font-weight: 700;}#userlike #userlike-button-hover-text { padding-top: 13px; cursor: unset; font-weight: 600;}#userlike.userlike-mobile a#userlike-tab #userlike-button-text { display: none !important;}a#userlike-tab.userlike-slideup { max-height: 48px; margin-bottom: 0; padding-top: 8px; -webkit-transition: max-height .5s ease-in-out; -moz-transition: max-height .5s ease-in-out; -o-transition: max-height .5s ease-in-out; transition: max-height .5s ease-in-out;}a#userlike-tab.userlike-slidedown { top: 0 !important; max-height: 48px; -webkit-transition: top .5s ease-in-out; -moz-transition: top .5s ease-in-out; -o-transition: top .5s ease-in-out; transition: top .5s ease-in-out;}a#userlike-tab.userlike-left,a#userlike-tab.userlike-right { bottom: 0; -webkit-border-top-left-radius: 3px; border-top-left-radius: 3px; -webkit-border-top-right-radius: 3px; border-top-right-radius: 3px; -moz-border-top-left-radius: 3px; -moz-border-top-right-radius: 3px;}a#userlike-tab.userlike-left { left: 40px;}a#userlike-tab.userlike-right { right: 40px;}body.userlike-disable-body-scroll{ position: fixed; overflow: hidden;}#userlike.userlike-mobile a#userlike-tab.userlike-left { left: 16px;}#userlike.userlike-mobile a#userlike-tab.userlike-right { right: 16px;}#userlike-button-symbol { position: relative !important; display: inline-block !important; width: 43px; height: 43px; margin-top: -3px !important;}#userlike-button-symbol i.userlike-symbol { font-size: 43px; cursor: pointer;}#userlike-button-symbol .userlike-button-spinner{ display: none; width: 40px !important; margin-top: 13px;}#userlike-button-symbol .userlike-button-spinner > div{ width: 10px !important; height: 10px !important;}#userlike-eyecatcher,#userlike-eyecatcher-box,#userlike-eyecatcher-mask,#userlike-eyecatcher-message { display: none; transform: translatez(1px); -webkit-transform: translatez(1px);}#userlike.userlike-mobile #userlike-eyecatcher,#userlike.lt-ie9 #userlike-eyecatcher { display: none !important;}#userlike #userlike-eyecatcher-close { font-size: 20px !important; position: absolute; z-index: 2147483642; width: 19px !important; height: 19px !important; padding: 0 !important; cursor: pointer; border: none; transform: translatez(2px); -webkit-transform: translatez(2px);}#userlike-hover-text-container,#userlike-eyecatcher { position: fixed; z-index: 2147483640; display: none; float: none; clear: none; overflow: visible !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; margin: 0; padding: 0; cursor: pointer; -webkit-transition: opacity .1s ease-in; -moz-transition: opacity .1s ease-in; -ms-transition: opacity .1s ease-in; -o-transition: opacity .1s ease-in; transition: opacity .1s ease-in; text-decoration: none; opacity: 0; border: none; outline-style: none; box-shadow: none; direction: ltr;}#userlike-hover-text-container{ bottom: 24px; height: 48px; padding-left: 32px; padding-right: 32px; min-height: 48px; max-height: 48px; border-radius: 2px; box-shadow: 0 10px 30px 0 rgba(0,0,0,0.15); cursor: unset; text-align: center; pointer-events: none;}#userlike-hover-text-arrow{ position: absolute; width: 0; height: 0; border-style: solid; top: 15px;}#userlike-hover-text-container.userlike-right #userlike-hover-text-arrow{ border-width: 9.5px 0 9.5px 10px; right: -10px;}#userlike-hover-text-container.userlike-left #userlike-hover-text-arrow{ border-width: 9.5px 10px 9.5px 0; left: -10px;}#userlike-eyecatcher { bottom: 56px; width: 242px; min-width: 240px; border-radius: 0; height: 60px; min-height: 60px; max-height: 60px; text-indent: -100000px;}#userlike-eyecatcher *{ cursor: pointer;}#userlike-eyecatcher.fadeIn,#userlike-hover-text-container.fadeIn{ opacity: 1 !important;}#userlike #userlike-eyecatcher-close { top: 3px !important; right: 3px !important; display: none !important;}#userlike #userlike-eyecatcher:hover > #userlike-eyecatcher-close { display: block !important;}#userlike-eyecatcher-box { display: block; overflow: visible !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; min-width: 240px; height: 60px;}#userlike-eyecatcher.eyecatcher-01 #userlike-eyecatcher-box { width: 242px; height: 60px; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; background-color: #fff; -webkit-box-shadow: 0 9px 30px 0 rgba(0, 0, 0, .15); -moz-box-shadow: 0 9px 30px 0 rgba(0, 0, 0, .15); box-shadow: 0 9px 30px 0 rgba(0, 0, 0, .15);}#userlike-eyecatcher.eyecatcher-01 #userlike-eyecatcher-message { bottom: 7px;}#userlike-eyecatcher.eyecatcher-02 { bottom: 68px;}#userlike-eyecatcher.eyecatcher-02 #userlike-eyecatcher-box { height: 72px; background-image: url(//dq4irj27fs462.cloudfront.net/images/eyecatcher_02.png); background-repeat: no-repeat; background-size: 100% 100%;}#userlike-eyecatcher.eyecatcher-02 #userlike-eyecatcher-message { bottom: 15px; margin: 0 auto; left: 0; right: 0; width: 73%;}#userlike-eyecatcher.eyecatcher-02 #userlike-eyecatcher-close { top: 8px !important; right: 38px !important;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-box { height: 144px; background-image: url(//dq4irj27fs462.cloudfront.net/images/eyecatcher_03.png); background-repeat: no-repeat; background-size: 100% 100%;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-close { top: 18px !important; right: 12px !important;}#userlike-eyecatcher.eyecatcher-03 { bottom: 141px;}#userlike-eyecatcher.eyecatcher-03.right { right: 0;}#userlike-eyecatcher.eyecatcher-03.left { left: 100px;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-mask { top: 25px; left: 29px; width: 50px; height: 50px; margin: 0; border: none;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-box:before { display: none;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-picture { width: 50px; height: 50px; background-size: 50px 50px;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-message { bottom: 84px; left: 90px; width: 59%; text-align: left;}@media(-webkit-min-device-pixel-ratio:2), (min-resolution:192dppx) { #userlike-eyecatcher.eyecatcher-02 #userlike-eyecatcher-box { background-image: url(//dq4irj27fs462.cloudfront.net/images/eyecatcher_02@2x.png); } #userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-box { background-image: url(//dq4irj27fs462.cloudfront.net/images/eyecatcher_03@2x.png); }}#userlike-eyecatcher-box:before { position: absolute; z-index: -1; top: -50px; right: 0; left: 0; display: block; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: 80px; height: 80px; margin: auto; content: \'\'; border: 5px solid #fff; -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; background-color: #fff; -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .1), 0 0 4px 0 rgba(0, 0, 0, .1); -moz-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .1), 0 0 4px 0 rgba(0, 0, 0, .1); box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .1), 0 0 4px 0 rgba(0, 0, 0, .1);}#userlike-eyecatcher-mask { position: absolute; top: -48px; right: 0; left: 0; display: block; overflow: hidden; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: 74px; height: 74px; margin: auto; border: 5px solid #fff; -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; background-color: #fff;}#userlike-eyecatcher-picture { width: 64px; height: 64px; background-color: #fff; background-size: 64px 64px; border-radius: 50%;}#userlike-eyecatcher-message { font-size: 15px; position: absolute; bottom: 7px; display: block; width: 100%; text-align: center; text-indent: 0; color: #4b4d4f; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}#userlike-eyecatcher.right { right: 40px;}#userlike-eyecatcher.left { left: 40px;}#userlike a:hover,#userlike a:active { z-index: 2147483642; cursor: pointer; text-decoration: none; outline: 0;}#userlike input { font-size: 100%; line-height: normal; overflow: visible; margin: 0; -webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text; vertical-align: middle;}#userlike input[type="checkbox"],#userlike input[type="radio"] { box-sizing: border-box; border: none; padding: 0 !important;}#userlike input::-moz-focus-inner { padding: 0; border: 0;}#userlike form { position: relative; top: 0; right: 0; display: block; margin: 0; padding: 0;}#userlike-popup { position: fixed; z-index: 2147483643; overflow: visible !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: 416px; height: 216px; margin: 0 !important; padding: 0 0 10px !important; color: #4b4d4f; -webkit-border-radius: 0; -moz-border-radius: 0; border-radius: 0; background: #fff; box-shadow: 0 -5px 50px 0 rgba(0, 0, 0, .2); transform: translatez(1px); -webkit-transform: translatez(1px);}#userlike.userlike-mobile #userlike-popup{ width: 100%;}#userlike #userlike-register,#userlike #userlike-offline-message,#userlike #userlike-survey,#userlike #userlike-disclaimer,#userlike #userlike-group-select,#userlike #userlike-transcript,#userlike #userlike-message,#userlike #userlike-social-composite,#userlike #userlike-feedback-rating-composite { margin: 0 40px;}#userlike.userlike-mobile #userlike-register,#userlike.userlike-mobile #userlike-offline-message,#userlike.userlike-mobile #userlike-survey,#userlike.userlike-mobile #userlike-disclaimer,#userlike.userlike-mobile #userlike-group-select,#userlike.userlike-mobile #userlike-transcript,#userlike.userlike-mobile #userlike-message,#userlike.userlike-mobile #userlike-message,#userlike.userlike-mobile #userlike-feedback-rating-composite { margin: 0 22px;}#userlike #userlike-group-select .userlike-radio-wrapper{ height: 48px; width: 43%; float: left; padding-left: 23px;}#userlike #userlike-group-select input[type="radio"]{ margin: 17px 0 0 -5px !important;}#userlike #userlike-group-select .userlike-label{ padding-top: 15px; padding-left: 19px; overflow: hidden; white-space: nowrap; width: 73%; text-overflow: ellipsis;}#userlike #userlike-group-select .userlike-group-select-operator-image{ position: absolute; top: 0; left: 0; width: 48px!important; height: 48px!important; border-radius: 50%; cursor: pointer;}#userlike.lt-ie9 #userlike-popup { border: 1px solid rgb(211, 212, 213);}#userlike-progress { position: static;}#userlike-progress #userlike-spinner { margin: 60px auto 0;}#userlike.userlike-no-css-animation #userlike-spinner-gif { margin: 40px 180px 0!important;}#userlike.userlike-no-css-animation #userlike-spinner div { display: none;}#userlike.userlike-no-css-animation #userlike-progress #userlike-spinner { width: 40px; height: 40px; background-size: 40px 40px;}#userlike-spinner { position: static; z-index: 2147483642; width: 70px; text-align: center;}#userlike-spinner div { position: static; display: inline-block; width: 18px !important; height: 18px !important; -webkit-animation: bouncedelay 1.4s infinite ease-in-out; -moz-animation: bouncedelay 1.4s infinite ease-in-out; animation: bouncedelay 1.4s infinite ease-in-out; border-radius: 100%; -webkit-animation-fill-mode: both; -moz-animation-fill-mode: both; animation-fill-mode: both;}#userlike-spinnerIframe { position: relative; z-index: 2147483642; top: 50%; width: 100%; height: 100%; text-align: center;}#userlike-spinnerIframe div { position: static; display: inline-block; width: 40px !important; height: 40px !important; -webkit-animation: bouncedelay 1.4s infinite ease-in-out; -moz-animation: bouncedelay 1.4s infinite ease-in-out; animation: bouncedelay 1.4s infinite ease-in-out; border-radius: 100%; background-color: #a9b0b7 !important; -webkit-animation-fill-mode: both; -moz-animation-fill-mode: both; animation-fill-mode: both;}#userlike.lt-ie9 #userlike-spinnerIframe div { position: static; display: inline-block; width: 40px !important; height: 40px !important; border-radius: 100%; background-color: #a9b0b7 !important;}#userlike-bounce-1 { -webkit-animation-delay: -.32s !important; -moz-animation-delay: -.32s !important; animation-delay: -.32s !important;}#userlike-bounce-2 { -webkit-animation-delay: -.16s !important; -moz-animation-delay: -.16s !important; animation-delay: -.16s !important;}@-webkit-keyframes bouncedelay { 0%, 80%, 100% { -webkit-transform: scale(.0); transform: scale(.0); } 40% { -webkit-transform: scale(1.0); transform: scale(1.0); }}@keyframes bouncedelay { 0%, 80%, 100% { transform: scale(.0); } 40% { transform: scale(1.0); }}.uselikeDrag { cursor: auto;}#userlike-dragTop { position: absolute; z-index: 2147483641; top: 0 !important; left: 0 !important; display: block; width: 320px !important; height: 40px !important; margin: 0 !important; cursor: auto;}#userlike #userlike-headerbar { position: absolute !important; top: 0 !important; right: 0 !important; left: 0 !important; height: 56px !important;}#userlike.userlike-chat-textarea-fullscreen #userlike-headerbar { display: none;}#userlike #userlike-headerbar #userlike-headerbar-headline { font-size: 14px !important; font-weight: bold; position: absolute !important; top: 18px !important; left: 40px !important; max-width: 80%; white-space: nowrap; text-overflow: ellipsis;}#userlike.userlike-mobile #userlike-headerbar #userlike-headerbar-headline { left: 22px !important;}#userlike #userlike-footerbar { position: absolute; right: 0; bottom: 0; left: 0; height: 32px;}#userlike.userlike-chat-textarea-fullscreen #userlike-footerbar { display: none;}#userlike-close,#userlike-minimize { position: absolute; z-index: 2147483642; top: 16px; width: 24px !important; height: 24px !important; padding: 0 !important; cursor: pointer; border: none;}#userlike-view-container { position: absolute !important; top: 56px !important; right: 0 !important; bottom: 32px !important; left: 0 !important;}#userlike.userlike-mobile #userlike-view-container { position: fixed !important; overflow-y: scroll !important; overflow-x: hidden !important; width: 100%;}#userlike.userlike-mobile.userlike-chat-textarea-fullscreen #userlike-view-container { top: 0 !important;}#userlike-close { right: 16px;}#userlike-minimize { right: 44px;}.userlike-headline { font-size: 14px !important; font-weight: 700 !important; line-height: 20px !important; z-index: 2147483642; display: block; overflow: hidden; width: 336px !important; height: auto !important; padding: 0 !important; text-overflow: ellipsis;}#userlike.userlike-mobile .userlike-headline { width: auto !important;}#userlike-offline-message-headline,#userlike-register-headline,#userlike-disclaimer-headline,#userlike-transcript-headline,#userlike-group-select-headline,#userlike-survey-headline { position: relative !important; margin-top: 40px !important;}#userlike-offline-message-text,#userlike-register-text,#userlike-transcript-text { font-size: 13px; line-height: 18px; overflow: hidden; min-height: 20px !important; max-height: 40px !important; margin: 16px 0 0 0; text-overflow: ellipsis;}#userlike-disclaimer-text { font-size: 13px !important; line-height: 18px !important; right: 40px !important; bottom: 60px !important; left: 40px !important; overflow-y: auto !important; height: 165px !important; text-overflow: ellipsis !important; margin: 16px 0 0 0;}#userlike-disclaimer-text::after { content:""; display:block; height: 16px;}#userlike-disclaimer-text-bottom-fadeout { position: relative; bottom: 20px; height: 20px;}#userlike-disclaimer-text-top-fadeout { top: 10px;}#userlike.userlike-mobile #userlike-disclaimer-text { left: 22px !important;}#userlike-facebook-like,#userlike-twitter-tweet { position: relative; width: 100% !important; margin: 40px 0 !important; padding-bottom: 16px; text-align: left !important; border-bottom: 1px solid rgba(211, 212, 213, .4);}.lt-ie9 #userlike-facebook-like,.lt-ie9 #userlike-twitter-tweet { border-bottom: 1px solid rgb(211, 212, 213);}#userlike-facebook-like-headline,#userlike-twitter-tweet-headline { display: inline-block; max-width: 50%; text-align: left;}#userlike-facebook-like-wrapper,#userlike-twitter-tweet-wrapper { float: right; max-width: 50% !important;}#userlike #userlike-facebook-like.userlike-break-facebook-line #userlike-facebook-like-wrapper{ max-width: 100% !important; float: left; margin-top: 10px;}#userlike #userlike-facebook-like.userlike-break-facebook-line #userlike-facebook-like-headline{ max-width: 100% !important; width: 100% !important;}#userlike.userlike-mobile #userlike-facebook-like-wrapper { right: 0;}#userlike.ie #userlike-facebook-like-wrapper { display: table; width: 225px; height: 70px; margin: 20px auto;}#userlike-twitter-tweet-wrapper { text-align: right;}#userlike.ie #userlike-twitter-tweet-wrapper { display: table; margin: 20px auto;}#userlike-rating { position: relative; margin-top: 20px;}#userlike-rating-headline { width: auto !important; margin-top: 24px !important; text-align: left !important;}#userlike-message-headline { min-height: 22px !important; margin-top: 30px !important; max-height: 90px !important;}#userlike-chatHeadline { line-height: 20px !important; margin: 12px 10px 0 14px !important;}#userlike-chat-subheader { position: absolute; top: 0; right: 0; left: 0; height: 50px;}#userlike.userlike-chat-textarea-fullscreen #userlike-chat-subheader { display: none !important;}#userlike-chat-subheader #userlike-subheader-operator-image,#userlike-chat-subheader #userlike-spinner.userlike-operator-connect-spinner { position: absolute; left: 40px; width: 32px!important; height: 32px!important;}#userlike #userlike-subheader-operator-image-zoomed{ position: absolute; top: 66px; left: 38px; border-radius: 50%; width: 32px!important; height: 32px!important; -webkit-transition: -webkit-transform 0.6s; transition: -webkit-transform 0.6s; transition: transform 0.6s; transition: transform 0.6s, -webkit-transform 0.6s;}#userlike.userlike-mobile #userlike-subheader-operator-image-zoomed{ left: 16px;}#userlike #userlike-subheader-operator-image-zoomed.userlike-zoom{ box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.41); transform: scale(2.5); -webkit-transform: scale(2.5);}#userlike.userlike-mobile #userlike-subheader-operator-image-zoomed.userlike-zoom{ -webkit-transform: scale(2.5) translateX(7px); transform: scale(2.5) translateX(7px)}#userlike.userlike-mobile.userlike-chat-textarea-fullscreen #userlike-subheader-operator-image-zoomed{ display: none;}#userlike-chat-subheader #userlike-spinner.userlike-operator-connect-spinner { top: 17px;}#userlike.no-css-animation #userlike-spinner.userlike-operator-connect-spinner{ display: none;}#userlike-chat-subheader #userlike-subheader-operator-image { top: 10px; border-radius: 50%;}#userlike.userlike-mobile #userlike-chat-subheader #userlike-subheader-operator-image,#userlike.userlike-mobile #userlike-chat-subheader #userlike-spinner.userlike-operator-connect-spinner{ left: 16px;}#userlike-chat-subheader #userlike-spinner.userlike-operator-connect-spinner div { width: 8px !important; height: 8px !important;}#userlike-chat-subheader #userlike-subheader-operator-info-text-wrapper { position: absolute; top: 17px; left: 88px; height: 20px;}#userlike.userlike-mobile #userlike-chat-subheader #userlike-subheader-operator-info-text-wrapper { left: 64px; max-width: 80%; white-space: nowrap; text-overflow: ellipsis;}#userlike-chat-subheader #userlike-subheader-operator-info-text { font-size: 13px; font-weight: bold;}#userlike-chat-form { position: absolute !important; top: 50px !important; right: 0 !important; bottom: 0 !important; left: 0 !important; display: block !important; margin: 0; padding: 0;}#userlike.userlike-chat-textarea-fullscreen #userlike-chat-form { top: 0 !important;}#userlike #userlike-chatHeadlineContainer { width: 175px !important; height: 16px !important; margin: 12px 10px 0 84px !important;}#userlike #userlike-poweredby { font-size: 11px; position: absolute; z-index: 2147483642; bottom: 10px; left: 40px; display: block; color: rgb(169, 176, 183);}#userlike.userlike-mobile #userlike-poweredby { left: 20px;}#userlike #userlike-poweredby-link { font-size: 11px; text-decoration: underline; color: rgb(169, 176, 183);}#userlike-data-privacy { position: absolute; z-index: 2147483642; right: 15px; bottom: 10px; display: none;}#userlike input[type="checkbox"],#userlike input[type="checkbox"]:focus,#userlike input[type="checkbox"]:hover,#userlike input[type="checkbox"]:active { display: inline; overflow: hidden; margin: 10px 5px 20px 0; padding: 0; border: none; border-radius: 0; box-shadow: none; -moz-appearance: checkbox; -ms-appearance: checkbox; -webkit-appearance: checkbox;}#userlike input[type="text"],#userlike input[type="email"] { width: 100% !important; margin: 20px 0 !important; padding: 26px 0 21px 0 !important; -webkit-appearance: none; -moz-appearance: none;}#userlike input,#userlike input[type="text"],#userlike input[type="email"] { font-size: 13px; font-weight: 400; display: block; overflow: hidden; box-sizing: border-box; padding: 8px 0 16px 0 !important; color: #4b4d4f; border-bottom: 1px solid rgba(211, 212, 213, .4);}/* Hack to prevent ios from zooming on inputs that have a font-size < 16 */#userlike.userlike-mobile textarea,#userlike.userlike-mobile textarea#userlike-chat-textarea,#userlike.userlike-mobile input[type="text"],#userlike.userlike-mobile input[type="email"]{ font-size: 16px !important;}#userlike.userlike-mobile textarea#userlike-chat-textarea { margin: 0;}#userlike.lt-ie9 input,#userlike.lt-ie9 input[type="text"],#userlike.lt-ie9 input[type="email"]{ border-bottom: 1px solid rgb(211, 212, 213);}#userlike textarea { white-space: pre-wrap;}#userlike input[type="radio"] { float: left !important; clear: none !important; overflow: auto; margin: 3px 0 0 1px !important; border: none; cursor: pointer;}#userlike.userlike-mobile input[type="radio"] { margin: 2px 0 0 1px !important;}#userlike.lt-ie9 input[type="radio"] { margin-top: 5px !important;}#userlike-screenshot-wrapper { display: inline-block; margin: 0 !important;}#userlike-screenshot-wrapper #userlike-screenshot-checkbox { margin: 1px 16px 4px 0;}#userlike-screenshot-label { display: inline;}#userlike textarea { line-height: 1.5 !important; overflow-y: auto; box-sizing: border-box !important; width: 100% !important; max-width: 100% !important; resize: none; -webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text; vertical-align: top; color: #4b4d4f; -webkit-appearance: none; -moz-appearance: none;}#userlike-offline-textarea { height: 110px !important; margin-bottom: 16px; border-bottom: 1px solid rgba(211, 212, 213, .4);}.lt-ie9 #userlike-offline-textarea{ border-bottom: 1px solid rgb(211, 212, 213);}#userlike-popup:after { position: absolute; width: 0; height: 0; content: \'\';}#userlike-chat-content { font-size: 13px; font-weight: 400; position: absolute; top: 0; right: 0; bottom: 110px; left: 0; display: block; overflow-y: auto; box-sizing: border-box; margin: 0 !important; padding: 16px 16px 16px 16px !important; word-wrap: break-word; word-break: break-word; -ms-word-break: break-word; border-top: 1px solid #e8e8e8; border-bottom: 1px solid #e8e8e8; overflow-wrap: break-word;}#userlike.userlike-mobile #userlike-chat-content{ bottom: 60px;}#userlike.userlike-mobile.userlike-chat-textarea-fullscreen #userlike-chat-content{ display: none !important;}#userlike-chat-content::-webkit-scrollbar { display: none;}#userlike-chat-content * { -webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text;}#userlike-chat-content .userlike-message-container { clear: both; margin-top: 8px;}#userlike-chat-content .userlike-message-container-ct { text-align: left;}#userlike-chat-content .userlike-message-container-co,#userlike-chat-content .userlike-message-container-preview { text-align: right;}#userlike-chat-content .userlike-message-bubble { display: inline-block; max-width: 80%; padding: 16px 24px !important; border-radius: 20px;}#userlike.userlike-no-css-animation #userlike-chat-content .userlike-message-bubble #userlike-spinner { width: 17px; height: 17px;}#userlike-chat-content .userlike-message-bubble #userlike-spinner { position: relative; top: 2px;}#userlike-chat-content .userlike-message-bubble #userlike-spinner div { width: 12px !important; height: 12px !important;}#userlike-chat-content .userlike-message-bubble-co,#userlike-chat-content .userlike-message-bubble-preview { border-bottom-right-radius: 0;}#userlike-chat-content .userlike-message-bubble-ct { border-bottom-left-radius: 0;}#userlike-chat-content .userlike-message-bubble-preview { border-style: dashed; border-width: 1px;}#userlike-chat-content .userlike-message-timestamp { font-size: 11px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}#userlike-chat-content .userlike-message-timestamp.userlike-message-timestamp-co,#userlike-chat-content .userlike-message-timestamp.userlike-message-timestamp-preview { text-align: right;}#userlike-chat-content img.userlike-url-info-image{ margin-top: 22px; height: auto; width: 100%;}#userlike-chat-content .userlike-url-info-title{ font-weight: bold;}#userlike #userlike-chat-content .userlike-emoji { vertical-align: middle; cursor: auto;}#userlike #userlike-chat-content .userlike-command-image,#userlike #userlike-chat-content .userlike-command-video{ width: 100%;}#userlike #userlike-chat-content .userlike-command-chips { text-align: center;}#userlike #userlike-chat-content .userlike-command-chips-choice { display: inline-block; margin: 4px 10px 0 0;}#userlike #userlike-chat-content .userlike-command-chips-choice * { cursor: pointer !important;}#userlike #userlike-chat-content .userlike-command-chips-choice button { border: 1px solid transparent; border-radius: 16px; padding: 4px 8px; margin: 4px 10px 0 0; min-width: 64px; text-align: center;}#userlike #userlike-chat-content .userlike-command-chips-choice button:hover { border: 1px solid;}#userlike-chat-state { line-height: 16px; overflow: hidden; height: 16px; max-height: 16px; margin: -5px 0 0 15px; white-space: nowrap; text-overflow: ellipsis;}#userlike-chat-state > div { font-size: 12px !important; font-weight: 400 !important; color: #a9b0b7;}#userlike-offline-message form { height: 325px !important;}#userlike #userlike-feedback{ position: relative; height: 100%;}#userlike #userlike-feedback-textarea { width: 100% !important; padding: 16px 0 20px 0 !important; border-top: 1px solid rgba(211, 212, 213, .4);}#userlike.lt-ie9 #userlike-feedback-textarea { border-bottom: 1px solid rgb(211, 212, 213);}#userlike-transcript form { height: 140px !important;}#userlike-star-rating { position: relative !important; display: inline-block !important; height: 25px !important; margin: 16px 0 !important; padding: 0 !important; cursor: pointer;}#userlike-star-rating .userlike-symbol { font-size: 22px !important; padding-right: 4px !important;}#userlike-offline-message-submit { position: relative; z-index: 2147483642; top: -9px; right: -8px; display: inline-block; float: right; width: 40px; height: 40px; cursor: pointer; border: none;}#userlike-offline-message-submit .userlike-symbol { position: absolute; top: 5px; left: 5px;}#userlike-chat-scroll-textarea { position: absolute; right: 0; bottom: 0; left: 0; height: 110px;}#userlike.userlike-mobile #userlike-chat-scroll-textarea{ height: 60px;}#userlike #userlike-chat-textarea { font-weight: 400 !important; position: absolute !important; right: 0 !important; bottom: 0 !important; left: 0 !important; width: 100% !important; height: 110px !important; padding-left: 40px !important; padding-right: 40px !important; padding-top: 16px !important; padding-bottom: 0px !important;}#userlike.userlike-mobile #userlike-chat-textarea { height: 60px !important; padding: 6px 36px 10px 16px !important;}#userlike-emoji-button { position: absolute; z-index: 2147483642; top: 16px; right: 16px; width: 22px; height: 22px; cursor: pointer; border: none;}#userlike-emoji-list { position: absolute; top: 0; right: 50px; bottom: 0; left: 1px; display: none; overflow-y: auto; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; padding: 8px 40px; -moz-border-radius: 5px; border-radius: 5px;}#userlike.userlike-mobile #userlike-emoji-list { padding: 8px 16px;}#userlike-emoji-list.show { display: block;}#userlike-popup .userlike-emoji { width: 21px; height: 21px; cursor: pointer;}#userlike-emoji-list .userlike-emoji { padding: 3px 0 0 10px;}#userlike.userlike-mobile #userlike-emoji-list .userlike-emoji { padding: 4px 0 0 5px;}#userlike-register-submit,#userlike-transcript-submit,#userlike-facebook-connect-submit,#userlike-feedback-submit { position: relative; z-index: 2147483642; right: -12px; bottom: 14px; float: right; width: 40px; height: 40px; cursor: pointer; border: none;}#userlike-register-submit{ bottom: 11px;}#userlike-facebook-connect-submit{ bottom: 9px;}#userlike-register form { height: 380px;}#userlike-disclaimer-submit { position: absolute; z-index: 2147483642; right: 32px; bottom: 0; width: 40px; height: 26px; cursor: pointer; border: none;}#userlike-feedback-submit { bottom: 3px;}#userlike .userlike-fieldset-wrapper { clear: none; overflow: hidden; margin-top: 24px;}#userlike.userlike-mobile .userlike-fieldset-wrapper { margin-right: 0 !important;}#userlike .userlike-radio-wrapper { display: block; position: relative !important; margin-bottom: 16px; cursor: pointer;}#userlike .userlike-label { font-size: 13px !important; line-height: 1.5; left: 19px; position: relative; cursor: pointer;}#userlikePushIframe { position: fixed; z-index: 2147483640; top: 10%; right: 10%; bottom: 10%; left: 10%; overflow: hidden; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: 80%; height: 80%; margin: 0; padding: 0; color: #4b4d4f; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; background: #fff; box-shadow: 0 -5px 50px 0 rgba(0, 0, 0, .2);}#userlikePushIframeClose { position: absolute; color: #A9B0B7; height: 19px!important; width: 19px!important; padding: 0!important; font-size: 26px !important; border: none; z-index: 2147483642; right: 22px; top: 0; cursor: pointer;}#userlikePushIframeOpen { position:absolute; background-image: url(\'//dq4irj27fs462.cloudfront.net/images/icon_open.png\'); background-size: 100% 100%; top: 5px; right: 42px; height: 16px!important; width: 16px!important; border:none; z-index:2147483642; padding:0!important; cursor:pointer;}#userlike .userlike-symbol.userlike-symbol-close { font-size: 28px !important;}#userlike .userlike-symbol.userlike-symbol-minimize { font-size: 28px !important; margin-left: 4px !important;}#userlike .userlike-symbol.userlike-symbol-check { font-size: 30px !important; position: absolute !important; left: 2px !important;}#userlike .userlike-symbol.userlike-symbol-send { font-size: 34px !important;}#userlike .userlike-symbol.userlike-symbol-facebook { font-size: 30px !important;}/* IE8 will not load fonts if we use the data-url in one @font-face declaration */@font-face { font-family: "userlike_default"; font-weight: normal; font-style: normal; src: url("//dq4irj27fs462.cloudfront.net/fonts/userlike_default.eot"); src: url("//dq4irj27fs462.cloudfront.net/fonts/userlike_default.eot?#iefix") format("embedded-opentype");}@font-face { font-family: "userlike_default"; font-weight: normal; font-style: normal; src: url(data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAABUsABAAAAAAIhQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABbAAAABoAAAAceIDqwUdERUYAAAGIAAAAHAAAAB4AJwAbT1MvMgAAAaQAAABKAAAAYEDWXThjbWFwAAAB8AAAAEIAAAFCAA/0vWN2dCAAAAI0AAAAFAAAACQDmf+YZnBnbQAAAkgAAAXBAAAL4j+uG59nYXNwAAAIDAAAAAgAAAAIAAAAEGdseWYAAAgUAAAKZgAADsxx6+iYaGVhZAAAEnwAAAAuAAAANgeYwwFoaGVhAAASrAAAABwAAAAkA/ABxWhtdHgAABLIAAAALgAAADIIhgMibG9jYQAAEvgAAAAsAAAALCLOJwxtYXhwAAATJAAAACAAAAAgAYMCL25hbWUAABNEAAAA+gAAAgEzXt0UcG9zdAAAFEAAAABsAAAA3H7RM+ZwcmVwAAAUrAAAAIAAAACNE0njCnicY2BgYGQAgkvSGTYg+rLRQScYDQA5dgWjAAB4nGNgZGBg4AFiMSBmYmAEQhEgZgHzGAAEegBDeJxjYGFiYJzAwMrAwOjDmMbAwOAOpb8ySDK0MDAwMbByMsCBAILJEJDmmsLQ8JHxoxDjgf8HGPQYDzA4AIUZkZQoMDACAAueC6MAAHicY2BgYGaAYBkGRgYQsAHyGMF8FgYFIM0ChED+R6H//4Ek4////ExQlQyMbAwwJgMjE5BgYkAFjAzDHgAAT/YGvgAAeJxjYMACeCCQ8cD/AyAMABZoBTF4nK1WaXPTVhSVvMVJyFKy0KIuT7w4Te0nk1IIBkwIkmUX3MXZWglKK8VOui/QMsNv0K+5Mu0M/cZP67mSbQxJ2hmmmYzuee8dvbtfmTQlSNv3XF+I9jNtdrtNhd17Hl02aM0PjkS071GmFP5d1IpatysPDNMkzSfNkY2+pmtOYFukKxLBkUUZJXqCnncot3qvv6ZPOW7XpYLrmZQt+Tv3PVOaRuQJ6nSwteUbgmqMar4v4pQd9mgNW4OVoHU+X2fm844nYE0UCprqeAF2BJ9NMdpgtBEYge/7BukV35ekdbxD37coqwTuyZVCWJZ3Oh7lpU0FacMPn/TAopySsEv04vyBLfiELTZSC/gJktulbNnEoSMiEUFBvJ4vwcltL+gY4Y7vSd/0BW3tejgz2LWBfovyiiacSl/LpJEqYCltiYhLO6TMwRHpXSigfNmiCSXY1Gmn+yynHQi+gbYCnylBIzG1qPoT05rj2mVzFPtJ9XIuptJb9ApMcOB3INxIhpyXJF6awTElYcDIoZXIjgwbqYrpU16nFbylGS9cG3/pjEoc6k9PZZFsQ5p+2bRoRsWZjEu9sGHRrAJRCDrj3OXXAaTt0wyvdrCawcqiOVwzn4REIAJd6KVZJxBRIGgWQbNoXrX3vDjXa/grNHMon1j0hmpve+3ddNMwsb+Q7J9VsTbn7Hvx3BwSGNo0V+GaRSXb8Rl+zOBB+jIykS11vJiDB2/tCPlltWVT4rUhNtJzfgWtwDs+PGnB/hZ2X07VKQmMNW1BIloOaZt9XdeTXC0oLdYy7p5Hc9IWLk2j+KagOLBFAPV/zc/r2qxm21EQny1U6HHFuIAwLcK3hYpFSyrWWS4jzizPqTjL8k0V51i+peI8y/MqLrA0VDzB8m0VF1m+o+JJlh8oOYw7FQJEWIoq6Q+4QSwqjx0ujw4fpoeVscPV0eGj9PBdpdFM5TX8ew/+vQu7BPxjacI/lhfgH0sJ/1iuwD+WJfjHchX+sXwf/rFcg38slRL1pEwtBbXzgXDYBCdJJVpPca1WFVkVstCFF9EALXFKFmVYkzwR/5VhsPfro9Tqy3SxHOf1JdfDIGMHPxyPzPHjS0pcSez9CDzdPa4E3Xmict7Xlv/U+K+xKWvxJX0JHl2G/zD4ZHvRFGHNoiuqeq5u0cZ/UVHAXdCvIiXacklURYsbH6G8E0Ut2cKk8PCFwGDFNNjQ9aVF6K9hQi2jufCfUGjSqRxGVSlEPcJd114ci2p6B+VwJ1iCAp4VW9ve04zICuNpZjV73rd5fhYximXClk10rvNqGwY8w9LPRcYJepKyTtjDccYJDeCA59er74QwCVNdNpFDCQ1N+AWRaMF9JyiR6aTMYTgg9nkUVP7YrbiRPSolRuDZSSfkC11I+XWOgcBOfnUQA1lHaG4k21RE8wjRlC1WxtmqJyFjBwYR1fa8qqjj68oWDzYF2zIMeaGE1Z3xD3maqJMqeJAZyWV8c2CBM0xNwF/6V10cpnIT86DKUWtiqNf9alzVF9GAt0bbnfHtrZfZJ3JuK6pVTrzUVnStEkExFwusPc5BWqpUBdUZVdgwulxcEqVeRZOk1zUwNDD/X6MUW/9X9bH5PF/qEiNkLN+mP7DR5WAM/W+y/6YcBGDgx8jlFlxeSpsTvwzQhwtVuoxe/PiU/TuYufriAl0BvqvoKkSbo+YirqKJz+AwTp8oLkdqA36q+pgzAJ8B6Aw+V3092ekAJDvbzHEBdpjDYJc5DPaYw2CfObcBvmAOgy+Zw8BjDgOfOQ7APeYwuM8cBl8xh8ED5jQBvmYOg2+YwyBgDoOQOTbAAXMYdJnDoMccBoeKro/CfMQL2gT6NkG3gL5L6gmLLSy+V3RjxP6BFwn7xwQx+6cEMfVnRfUR9RdeJNRfE8TU3xLE1IeKbo6oj3iRUH9PEFP/SBBTH6unk7nM8IeXXaHiIWVXOk+G3xTrH4qiY04AAAAAAQAB//8AD3icrVdbbBzVGT7/mTnnzM6sZ/YyF9u7vs3YM7bXt3j2ksR2PE1IbK9rkpo4xg4CErNxSJMQ4t6gUpQgpUEIhYRSUaqWVhWKVIEqKiEh0T7w0otKkVDVJx5Qn/pQ8VS1L60U+p/ZJI3a8sZqdW7znznnv3zf/w+hJE8IeQ3WiEIEGU0inCmUKCcIBaBrhFLYUHEEK4QIzlQUU/JMOJU4H+ejOB/kn//mqVOwdvvNPMS4l5KYhPAxbBKbBORAkuRAod0ax21lwN3NkqDqgjyCKuQCISol6nmiqk8TwKPWCR51HI+mh6NCEE0z0VVp2N5U4EeiEdaq9Xja9cLA5/Vp17GFF/HAn4Ba9ZfTMBbOdTTOrux+xOn1k83WuZUpPup1BXPBj2PfDOeH9+w+MjGoH5jaOzLRO9otuidKI+Tefd/H+zokImPJCN4XShlKFRXwik2C04t4XeUiitKLuOPJYHx0QBWdlSEur8XDeWjfzDPBsd2G5/JJwEehXOvFJfCCaGQw4Qrt6ttMDk2MzQz8wlRUFnT1VmZnK6Wp0p6ik6eMTY/EyWZdW5j09/b1qoxmc7Nrs+XJso+nqmTlzj27yAAZIVXSSKo6kAUCGlfxfkC3BEObEmVd9grZwCFZqYzumhqtVqrFYtGplzKiuzJkCgtqAQ/noFqfgWm3B+zQ57Y7Xa/e7SM/1UWuwA21o+A4TsFU1Ym5B5fib8dLDxVNs9hxRrbm14QusDO/pWT0jmxW16iyjx2s8XhxMeazRzpS0XbLDZ6RPUn12ST98JM0TnwyQfaQfckMAV2wjIqmV7Y0TlUUW5e9SjYoSBNMTbpONZ7cM7VndGQw6Ck5vusP1foN4VUaaHGpUTyQasQrIHjUaOsRT+/DIAlHgTt2L6STqK1prToBH7SYEAzGmSb4ExUhHmMZZmhM49n1nMEyeoZ9VTMMOTyvsT8yLW0OGMbvUE4z0gbFM6w9yrUnUkcgO+iza6hjjZxafjtz5OHEF6iHSrYJwyBn9IQCoKqwjh2oxzmooB4uJQNSCPd+vsxG4gCJd42NDA70loo5XZAa1DRhVxp+FNbnQfp1H6A5wgqgCdAevVS6WprFv9/xqZk+0DgHvsLFhJYVOeMmtqrIcEvqZZXCqHSzFIalcJGHguV4k4kO0crmtKzWYrqmGrlsVGqVo6jcKkUP8NS3p1DvH6DeGWKRITIlY3U8QlbhSCSENl2LwgKGJygELiDkn0akKXQdyUY5LrF2uDzRaUuIoSZRGAjXc0UoB40y7AosmKdT0xJwvWBbSgNFUAuU+eAmdBjWzQ5Dz4JhmPklYCcHPlKoSt18RkNmGemCrGHSLpRo3bSM7MuqbnRnDaOKD9WBkx8B5PVOgyrU7LKyRpdq6Aihu7qYpAcZ7fFED/yB/h6GQdpcfttAn/YhieEhp9HfVEUYEglC5NO7ECwl/W0J5cLniWy8W3ig0/6KpLshLxgFjGWklJTjMEQRlTKI90I8CYHjNSJ4prdkr3Qe2Ny8vLmnb/nM8vJu94F8ca17ohCenN1Mks3NpNo/OFVbXq7Vm+GPTkwUJK8zxNwp+CHydAkxN0TGkUWWkkPTI4N+H1PpZBlJjzbv3pUBQXephJ5AR0F6W9iQdLgSBEDGKsNRMBQMFTVSgm6BodcOKIHMF/i7Bqb8QLL2BKSYFLbXqDeihtewIEbO9HFYnUOnwSXL8pD4AW7/ExtKs0bR0GAJ4MvG5ctv7v94/5AilMWlZYC4aNzo5ChT0G9Y1s8pXQcY85rNB1dXHUp71ym9MoZXJt1kE/NPgpHXgzxZIwfIEjmWPDRfp7oHBl1CQ+gq0U9gmDKqMkx0RMlQTHgGyXAjs4WvEBoXWwSDQlsjmia11mBlafHQwf1fqsb4q1VrcVb0VBq1//BNMICZqI0rxzYBcVZvz1LMufeNG+hMnNRRfzTEPASeO31LY9AtqeX2X5j2omDbTFO5ss3GBKvK5SoraCwV6GargqNQy+g3xo/+4ahwT33IheAfIomdMlAA903omjC0g4YQhnjxltx164lstrC6KjAAI1KET+BR4pKepDsPCL+mTLgX8RGk+c3udBQkVGJblPuTNKwiCqf7oCEb+ET7MNQ8LdzWtEhztYfewyaCYVf7fShE2MJZqGmr72paKPnvBdKEb0Ad4w3PckyhyNPQ23iSAnhUp91ZSFMpWkKeE2HSbB/l2hZ4aC8/ArLOcjpbX2d6Trb3xrf+Z6U9Jlky89m/4NdwFSsaB6Mgwhw/g3GwTI6Rx8lZ8iycTwrPPnX2zBYz7MegoFmQKSh30IyAVGV8XOgAwzZt4zTBZ4XM6U7gGDFc3fKcrKK7YBu6vZUDMw+WZlpbxS6qkUJGKyBaUEGmwBaRaWWdMCaOE8HE4dLy2wU8YPP/H6Bc+AJOSI7/18vNC1/c2zc2ktrIcH/v13fOnzu9ffLEo8cfXj929PCDy82FQwf2z++b2duoT44PxyPTg0Fv1B8VbX+oWMBSq1KXXIa+LCI0ZNGECblNa+1iY1f6EF3vTUvopOQXh3f23N3r3unDNi9KMS9AQUSSg/WLqN4jTF+06zFZezlHW9dbrevvzLcWVuPJucXWipy23lrd2XljZ+d7wvbtvoroM23Lsq9atmnavpHT9dzf9Vya2X/zMojviCshQwl4KWRg6cLgz6QvgV3x6kJrPmotzh1LT7kk3/nGzl95ob8wXOaxY5p3/92WYbT/WOCwrEo5p6tFVdFNU1fUYjriWa6o7brhdYzfbYxfl8TJFJFE3JR5cQe5iaAfTzBJlbDGJGVieY7wXQny+HMGhChVwAl8k/ZALAInqAW1ODUHbA/piMCDmdmFmZmpER+e28d0Qxs/9M47h+KxXeQeXsnTSIWdiYMLQNbk+obkhpV4mgq3cj+rvaD3vN6jy+ZwD2M9LH2H/dmf4FN4i/RLzBdzBldkHdNMy2eQoC8PRpJfhlKEO3bgT4LMGrUU/9hSpADqwqdiuxOynF2+zFkWOrdF7nrCczy5nvsH1868oiiWsrCgWMBeOaNxQ3GvZbPXXKVd05PP3qcE3k+xHyZBOChzdl+pu6uYNXQTlWnKm16UeedJf6worwOTEPrIeD3gCVklzkDDiyVJR8jyeFP8AEGu9uDPV2eMUWPmav85j1mGfuWKnrO8c+Nnup57ruvMd5MEXPtSZ+clm5Wtp26omtmxsOBl2UtPWeWBs68uLLx61nv++dROJ4kPryMP9xA3KZY9u1jQhaKRRUnBZcAvLHCFkubTtn0irNsaIgqjamNIuvM1WbJi2USPjCqcUvH9Xx0UwGFIfrk8wsTtvyGGoT9moGhz7/20rAih/AyNgt8RFfgtGmAPmUgqu4Eqk4N+GWOINu985tyfCxCHQ2i1vCoTfB3LMC5s7kxxhwuTyjtFYaMeu412HzYQjumC53rVxj7AGs316vAeU1Ul66K1lezs0cmCVRthlPKRKDLw65B2G0wxXEVhECwDm+xTM6FThG7KFFZysd5VQBPjhyKa6VMZU0xrFDf7wyz0sYBcKrNM3zDwAYX8G0gH4HsAAHicY2BkYGAA4rnCDCfj+W2+MsgzMYDAZaODTgj6/wEmBsYDQC4HA1gaAA/0CdgAAHicY2BkYGA88P8Agx4TAwgASUYGVMACAFCUArl4nGNiYBBkAAImCDYGQl+GKIZihjQgjGKQYlBn6GKwZpgHJEWASpIYfAFpRgWvAAAAAAAoACgAKACAANQBPAGuAioCkAL2A2gD+AQuBGoFygYGBigGaga8BvgHZgABAAAAFQB7AAwAAAAAAAIANABEAHcAAAC2AW4AAAAAeJydj0FqwzAUREeJnVIoJUcQ3XRTG0kNJWQbyKa7LELpJhiiGBNhgxxfpTfohXqWHCAj96+6KUTw9R9fMxoJwAO+oJCWwhxPwhPcYS08xQu+hTNqLsI55upZeEb+pFJl95zo0ZV4gke8Ck/xgXfhjJof4Rxa5cIz8hIDenhEBDQ4kfY4cD+i4knAGRh6H0Nz8vuDP1ZD4GRLQT0eVzRi6+shVIQNOrS0pB6p8Ax2KGHYV6z/on5Vlp4CC5aj0+KNF3ftedPF2mtXGr3Sf5/EkXXFonDGUn3Dj3ajoach/UAzNyWXY0+vx87HvulabYwtjTH6lpQrH4BYQAAAeJxdzTkSgkAARNH5o4iCuGAZcIuZQVBCXLgLiZl34pZoQUf+5FV10saaqXEwxQ/Mf+dptVgWLIlYEbNmQ0LKlowdew4cyTnFn3ffeedlkKW8yErW8ipvspGtvMuHfMqX7Ga9k/r34Qs9fypHeJxj8N7BcCIoYiMjY1/kBsadHAwcDMkFGxnYnTYxMDJogRibeZgYOSAsAQYwi8NpF7MDUJoTyOZ02sUAZTMzuGxUYewIjNjg0BGxkTnFZaMaiLeLo4GBkcWhIzkkAqQkEgg28zEx8mjtYPzfuoGldyMTg8tm1hQ2BhcXAOttJS8=) format("woff"), url("//dq4irj27fs462.cloudfront.net/fonts/userlike_default.eot") format("truetype");}#userlike .userlike-symbol,#userlike i.userlike-symbol,#userlikePushIframe .userlike-symbol,#userlikePushIframe i.userlike-symbol,#userlikePushIframe [class*="-symbol"],#userlikePushIframe [class*="symbol-"],#userlikePushIframe i[class*="-symbol"],#userlikePushIframe i[class*="symbol-"] { font-family: "{{ICON_FONT}}" !important; font-weight: normal !important; font-style: normal !important; line-height: 1 !important; display: inline-block !important; cursor: pointer; vertical-align: middle !important; text-decoration: inherit !important; text-transform: none !important; speak: none !important; text-rendering: auto !important; margin: 0 0 0 0!important; -webkit-font-smoothing: antialiased !important; -moz-osx-font-smoothing: grayscale !important; -webkit-touch-callout: none; -webkit-tap-highlight-color:rgba(0,0,0,0);}#userlike .userlike-symbol:before,#userlike i.userlike-symbol:before,#userlikePushIframe .userlike-symbol:before,#userlikePushIframe i.userlike-symbol:before,#userlikePushIframe [class*="-symbol"]:before,#userlikePushIframe [class*="symbol-"]:before,#userlikePushIframe i[class*="-symbol"]:before,#userlikePushIframe i[class*="symbol-"]:before,#userlike .userlike-symbol:after,#userlike i.userlike-symbol:after,#userlikePushIframe .userlike-symbol:after,#userlikePushIframe i.userlike-symbol:after,#userlikePushIframe [class*="-symbol"]:after,#userlikePushIframe [class*="symbol-"]:after,#userlikePushIframe i[class*="-symbol"]:after,#userlikePushIframe i[class*="symbol-"]:after { font-family: "{{ICON_FONT}}" !important;}.userlike-symbol-fallback #userlike-button-symbol .userlike-symbol { background-position: center; background-size: contain; height: 100%; width: 100%; background-repeat: no-repeat;}.userlike-symbol.userlike-button-01:before { content:"\\f101";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_01_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_01_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_01_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-01:before { content: none;}.userlike-symbol.userlike-button-02:before { content:"\\f102";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_02_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_02_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_02_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-02:before { content: none;}.userlike-symbol.userlike-button-03:before { content:"\\f103";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_03_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_03_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_03_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-03:before { content: none;}.userlike-symbol.userlike-button-04:before { content:"\\f104";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-04 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_04_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-04 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_04_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-04 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_04_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-04:before { content: none;}.userlike-symbol.userlike-button-05:before { content:"\\f105";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-05 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_05_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-05 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_05_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-05 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_05_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-05:before { content: none;}.userlike-symbol.userlike-button-06:before { content:"\\f106";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-06 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_06_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-06 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_06_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-06 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_06_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-06:before { content: none;}.userlike-symbol.userlike-button-offline-01:before { content:"\\f107";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-offline-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_01_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-offline-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_01_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-offline-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_01_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-offline-01:before { content: none;}.userlike-symbol.userlike-button-offline-02:before { content:"\\f108";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-offline-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_02_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_02_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_02_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-offline-02:before { content: none;}.userlike-symbol.userlike-button-offline-03:before { content:"\\f109";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-offline-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_03_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_03_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_03_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-offline-03:before { content: none;}.userlike-symbol.userlike-symbol-check:before { content:"\\f10a";}.userlike-symbol-fallback-white .userlike-symbol-check { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_check_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-check { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_check_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-check { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_check_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-check:before { content: none;}.userlike-symbol.userlike-symbol-close:before { content:"\\f10b";}.userlike-symbol-fallback-white .userlike-symbol.userlike-symbol-close { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_close_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-symbol-close { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_close_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-symbol-close { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_close_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-close:before { content: none;}.userlike-symbol.userlike-symbol-emoticon:before { content:"\\f10c";}.userlike-symbol-fallback-white .userlike-symbol-emoticon { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_emoticon_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-emoticon { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_emoticon_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-emoticon { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_emoticon_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-emoticon:before { content: none;}.userlike-symbol.userlike-symbol-facebook:before { content:"\\f10d";}.userlike-symbol-fallback-white .userlike-symbol-facebook { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_facebook_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-facebook { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_facebook_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-facebook { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_facebook_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-facebook:before { content: none;}.userlike-symbol.userlike-symbol-minimize:before { content:"\\f10e";}.userlike-symbol-fallback-white #userlike-minimize { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_minimize_white.png") !important;}.userlike-symbol-fallback-gray #userlike-minimize { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_minimize_gray.png") !important;}.userlike-symbol-fallback-black #userlike-minimize { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_minimize_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-minimize:before { content: none;}.userlike-symbol.userlike-symbol-rating:before { content:"\\f10f";}.userlike-symbol-fallback .userlike-symbol-rating,.userlike-symbol-fallback .userlike-symbol-rating-inactive { width: 40px !important; height: 40px !important; background-size: contain !important; background-position: center -8px !important; background-repeat: no-repeat !important;}.userlike-symbol-fallback-white .userlike-symbol-rating { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-rating { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-rating { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-rating:before { content: none;}.userlike-symbol.userlike-symbol-rating-inactive:before { content:"\\f110";}.userlike-symbol-fallback-white .userlike-symbol-rating-inactive { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_inactive_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-rating-inactive { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_inactive_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-rating-inactive { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_inactive_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-rating-inactive:before { content: none;}.userlike-symbol.userlike-symbol-send:before { content:"\\f111";}.userlike-symbol-fallback .userlike-symbol-send { width: 50px !important; height: 50px !important;}.userlike-symbol-fallback-white .userlike-symbol-send { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-send { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-send { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-send:before { content: none;}.userlike-symbol.userlike-symbol-twitter:before { content:"\\f112";}.userlike-symbol-fallback-white .userlike-symbol-twitter { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-twitter { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_twitter.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-twitter { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-twitter:before { content: none;}.userlike-emoji { background-image: url(\'//dq4irj27fs462.cloudfront.net/images/spritemap_emojis.png\') !important; background-repeat: no-repeat !important; display: inline-block !important;}@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min-device-pixel-ratio: 2) { .userlike-emoji { background-image: url(\'//dq4irj27fs462.cloudfront.net/images/spritemap_emojis@2x.png\') !important; background-size: 155px 155px !important; }}.userlike-emoji-emoji_angry { width: 21px !important; height: 21px !important; background-position: -5px -5px !important;}.userlike-emoji-emoji_blushing { width: 21px !important; height: 21px !important; background-position: -36px -5px !important;}.userlike-emoji-emoji_confused { width: 21px !important; height: 21px !important; background-position: -67px -5px !important;}.userlike-emoji-emoji_cool { width: 21px !important; height: 21px !important; background-position: -98px -5px !important;}.userlike-emoji-emoji_embarrassed { width: 21px !important; height: 21px !important; background-position: -129px -5px !important;}.userlike-emoji-emoji_evil { width: 21px !important; height: 21px !important; background-position: -5px -36px !important;}.userlike-emoji-emoji_frown { width: 21px !important; height: 21px !important; background-position: -36px -36px !important;}.userlike-emoji-emoji_gasp { width: 21px !important; height: 21px !important; background-position: -67px -36px !important;}.userlike-emoji-emoji_grimmace { width: 21px !important; height: 21px !important; background-position: -98px -36px !important;}.userlike-emoji-emoji_grin { width: 21px !important; height: 21px !important; background-position: -129px -36px !important;}.userlike-emoji-emoji_innocent { width: 21px !important; height: 21px !important; background-position: -5px -67px !important;}.userlike-emoji-emoji_kiss { width: 21px !important; height: 21px !important; background-position: -36px -67px !important;}.userlike-emoji-emoji_lips_are_sealed { width: 21px !important; height: 21px !important; background-position: -67px -67px !important;}.userlike-emoji-emoji_mischievous { width: 21px !important; height: 21px !important; background-position: -98px -67px !important;}.userlike-emoji-emoji_oops { width: 21px !important; height: 21px !important; background-position: -129px -67px !important;}.userlike-emoji-emoji_shouting { width: 21px !important; height: 21px !important; background-position: -5px -98px !important;}.userlike-emoji-emoji_sleeping { width: 21px !important; height: 21px !important; background-position: -36px -98px !important;}.userlike-emoji-emoji_smile { width: 21px !important; height: 21px !important; background-position: -67px -98px !important;}.userlike-emoji-emoji_smirk { width: 21px !important; height: 21px !important; background-position: -98px -98px !important;}.userlike-emoji-emoji_straight_faced { width: 21px !important; height: 21px !important; background-position: -129px -98px !important;}.userlike-emoji-emoji_tongue { width: 21px !important; height: 21px !important; background-position: -5px -129px !important;}.userlike-emoji-emoji_undecided { width: 21px !important; height: 21px !important; background-position: -36px -129px !important;}.userlike-emoji-emoji_wink { width: 21px !important; height: 21px !important; background-position: -67px -129px !important;}.userlike-emoji-emoji_wink_tongue { width: 21px !important; height: 21px !important; background-position: -98px -129px !important;}.userlike-emoji-icon_emoticon { width: 21px !important; height: 21px !important; background-position: -129px -129px !important;}'},{}],17:[function(C,S,e){var P=function(e,t){for(var i in t){if(B.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},B={}.hasOwnProperty;(function(){var t,i,r,e,n,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x;c=C("./markup.coffee");x=c.userlike_html;w=c.userlike_css;k=C("./global.coffee").isMobile();g=C("./utils/utils.coffee").isIE8;d=C("./utils/utils.coffee").hashCode;u=C("./utils/utils.coffee").adjustFontSize;h=C("./utils/utils.coffee").has_css_animation_support;y=C("./utils/utils.coffee").trim;m=C("./utils/utils.coffee").isAndroid;l=C("./utils/utils.coffee").applyTheme;v=C("./utils/utils.coffee").setBadge;b=C("./utils/favicon.coffee").setBubble;_=C("./utils/utils.coffee").rgbaToRgb;p=C("./global.coffee").get;f=function(){return p("preview")};a=C("./global.coffee")._ullog;s=C("./utils/jq.coffee")._jq;o=C("./views/view.coffee").View;n=C("./position.coffee").Position;i=C("./key_handler.coffee").KeyHandlerFactory;r=C("./key_handler.coffee").KeyHandlerFactoryAndroid;t=C("./views/emoji_popover.coffee").EmojiPopoverView;S.exports.assignCallbacks=function(e){return function(){return this.userlikeCallbackIframeCheck=function(e){var t,i;i="iframe_blacklist_"+d(e.url);t=e.status!=="200"||e.xframe;a("userlikeCallbackIframeCheck: url="+e.url+" status="+e.status+" xframe="+e.xframe+" blacklist="+t);return p("session").set(i,t)}}.call(e)};e=function(e){P(Popup,e);Popup.TIMEOUT=5e3;Popup.FADE=50;Popup.prototype.last_scroll_pos=null;Popup.prototype.is_visible=false;function Popup(e){var t,i,r;Popup.__super__.constructor.call(this,e);this.tab_active=true;i=p("font").get();a("Popup::ctor font="+i);t=w.replace("{{FONT}}",i);t=t.replace(/{{ICON_FONT}}/g,"userlike_"+this.config.theme.symbol_set);r=document.createElement("style");r.type="text/css";document.getElementsByTagName("head")[0].appendChild(r);if(r.styleSheet){r.styleSheet.cssText=t}else{r.appendChild(document.createTextNode(t))}}Popup.prototype.setup=function(){this.setupDomReferences();this.setupEventHandlers();this.position=new n;this.position.update();this.setView(p("idle_view"));if(m()){this.keyhandler=(new r).get(this.$input,p("fsm"))}else{this.keyhandler=(new i).get(this.$input,p("fsm"))}this.emojiPopover=new t;return this.setupLayout()};Popup.prototype.setupDomReferences=function(){this.$popup=s("#userlike-popup");this.$input=s("#userlike-chat-textarea");this.$content=s("#userlike-chat-content");this.$header=s("#userlike-chatHeadline");this.$headerbar_text=s("#userlike-headerbar-headline");this.$data_privacy=s("#userlike-data-privacy");this.$data_privacy_link=s("#userlike-data-privacy a");return this.$message_headline=s("#userlike-message-headline")};Popup.prototype.setConfig=function(e){this.config=s.extend({},this.config,e);return this};Popup.prototype.setHeaderbarText=function(){var e;e=this.view.getHeaderbarText();if(e!=null){this.highlightText(this.$headerbar_text,e);return this.$headerbar_text.text(e)}};Popup.prototype.setupEventHandlers=function(){s("#userlike-close").on("click",function(e){p("fsm").event("closeButton");s.event(e).preventDefault();return s.event(e).stopPropagation()});s("#userlike-minimize").on("click",function(e){p("fsm").event("minimizeButton");s.event(e).preventDefault();return s.event(e).stopPropagation()});s(".userlike-fieldset-wrapper div").on("click",function(e){var t,i;i=s(s.event(e).target);t=i.data("select")||i.parent().data("select");if(t){p("fsm").event("select",t)}s.event(e).preventDefault();return s.event(e).stopPropagation()});s("#userlike-register-form,#userlike-offline-email,#userlike-offline-name,#userlike-feedback-form,#userlike-transcript-form").on("keypress",function(e){var t;t=s.event(e);if(t.which===13){return p("fsm").event("submitButton")}});s.windowOn("resize",function(e){return function(){return e.position.update()}}(this));s.windowOn("focus",function(e){return function(){a("Popup::focus");return e.tab_active=true}}(this));s("body").on("gesturestart",function(e){return function(){return e.position.update()}}(this));s.windowOn("blur",function(e){return function(){a("Popup::blur");return e.tab_active=false}}(this));if(k){return s('textarea, input[type="text"], input[type="email"]').on("focus",function(){return window.setTimeout(function(e){return function(){if(e.scrollIntoViewIfNeeded!=null){return e.scrollIntoViewIfNeeded()}else if(e.scrollIntoView!=null){return e.scrollIntoView()}}}(this),250)})}};Popup.prototype.setupLayout=function(){var e,t;if(this.config.show_data_privacy_link){this.$data_privacy.css("display","block");this.$data_privacy_link.attr("href",this.config.data_privacy_link);this.$data_privacy_link.text(this.config.data_privacy_name)}else{this.$data_privacy.hide()}if(this.config.hide_poweredby){this.$popup.find("#userlike-poweredby").hide()}else{this.$popup.find("#userlike-poweredby").show()}if(((t=this.config.theme)!=null?t.font_custom:void 0)!=null){e=p("font").get();a("Popup::setupLayout font="+e);this.$popup.css("font-family",e)}if(this.view.is_minimizable){s("#userlike-minimize").css("display","inline-block").importize()}else{s("#userlike-minimize").css("display","none").importize()}if(!h&&!s("#userlike").hasClass("userlike-no-css-animation")){return s("#userlike").addClass("userlike-no-css-animation")}};Popup.prototype.setupTheme=function(){var e,t,i,r,n;e=this;if(g()){i=this.config.theme;for(t in i){if(!B.call(i,t))continue;n=i[t];if(typeof n==="string"&&n.indexOf("rgba(")!==-1){this.config.theme[t]=_(n)}}}l(this.config.theme);return(r=this.position)!=null?r.update():void 0};Popup.prototype.isActive=function(){if(!this.$popup){this.setupDomReferences()}return this.tab_active&&this.$popup.css("display")==="block"};Popup.prototype.isVisible=function(){return this.is_visible};Popup.prototype.hideTab=function(e){return s("#userlike-tab").fadeOut(Popup.FADE,e)};Popup.prototype.hide=function(t){var e;if(t==null){t=function(){}}this.is_visible=false;if(!this.$popup){if((e=p("button"))!=null){e.restoreDisplayState()}t();return}return this.$popup.fadeOut(Popup.FADE,function(){var e;p("tracking_event").trigger("window_invisible");if((e=p("button"))!=null){e.restoreDisplayState()}return t()})};Popup.prototype.show=function(e){this.reset();this.is_visible=true;return this.transition(this.view,e)};Popup.prototype.startDisableBodyScroll=function(){if(this.last_scroll_pos==null){this.last_scroll_pos=s("body").scrollTop()}return s("body").addClass("userlike-disable-body-scroll")};Popup.prototype.stopDisableBodyScroll=function(){s("body").removeClass("userlike-disable-body-scroll");if(this.last_scroll_pos!=null){s("body").scrollTop(this.last_scroll_pos);return this.last_scroll_pos=null}};Popup.prototype.reset=function(){p("button").clear();p("chat_view").incoming_messages=0;p("button").setBadge(0);if(this.config.favicon_enabled){return b(0)}};Popup.prototype.close=function(e){if(e==null){e=function(){}}this.reset();if(this.$popup){this.hide(function(e){return function(){e.view.el().hide();e.$content.empty();return e.$input.val("")}}(this))}return e()};Popup.prototype.setView=function(e){this.view=e;if(k){return this.view.height_mobile}return this.view.height};Popup.prototype.transition=function(e,t){var i;a("Popup::transition next="+e.el().attr("id"));this.is_visible=true;if(!this.$popup||!this.position){this.setup()}if(this.view!=null&&this.view.el().get()!==e.el().get()){this.view.el().hide();this.view.destroy()}if(this.$popup.css("display")!=="block"){p("tracking_event").trigger("window_visible")}i=this.setView(e);this.setHeaderbarText();this.$popup.css({height:i});this.position.update();this.reset();this.setupLayout();this.$popup.fadeIn({duration:Popup.FADE,queue:false});this.view.el().fadeIn({duration:Popup.FADE,queue:false,complete:t});return u(this.view.el().find(".userlike-adjust-text"))};Popup.prototype.injectIframe=function(e){var t,i;if(p("session").get("iframe_blacklist_"+d(e))||s.browser.msie){return window.open(e)}i=document.createElement("div");i.id="userlikePushIframe";t=s(i);t.html('<i id="userlikePushIframeClose" class="userlike-symbol userlike-symbol-close userlike-theme-text userlike-theme-headbar-text-color"></i>\n<div id="userlikePushIframeOpen"></div>\n<div id="userlikeSpinnerIframe">\n  <div id="userlikeBounce1"></div>\n  <div id="userlikeBounce2"></div>\n  <div id="userlikeBounce3"></div>\n</div>\n<iframe id="userlikePushIframe" src="'+e+'" style="border:none">');s("#userlikePushIframe").remove();s("body").append(t);s("#userlikePushIframeClose").on("click",function(){return s("#userlikePushIframe").remove()});s("#userlikePushIframeOpen").on("click",function(){window.open(e);return s("#userlikePushIframe").remove()});return setTimeout(function(){return s("#userlikeSpinnerIframe").remove()},5e3)};Popup.prototype.clearInput=function(e,t,i){var r,n,o;r=s(e);t=y(t);n=r.data("default")&&r.data("default")!==t;r.data("default",t);if(!i){i=t}if(!r.val().length&&!r.hasFocus()){r.val(i);r.css({color:this.config.theme.input_default_text_color})}if(n){if((o=f())!=null?o.isActive():void 0){this.highlightText(r,i)}r.val(t);r.css({color:this.config.theme.input_default_text_color})}r.off("focus");r.focus(function(e){return function(){t=r.data("default");r.css({"border-color":e.config.theme.symbol_active_color});if(r.val()===t){r.val("");return r.css({color:e.config.theme.text_default_color})}}}(this));r.off("blur");return r.blur(function(e){return function(){if(r.val()===""){r.val(t).css({color:e.config.theme.input_default_text_color})}return r.css({"border-color":e.config.theme.border_color.replace("1.0","0.4")})}}(this))};return Popup}(o);return S.exports.Popup=e})()},{"./global.coffee":13,"./key_handler.coffee":15,"./markup.coffee":16,"./position.coffee":18,"./utils/favicon.coffee":30,"./utils/jq.coffee":31,"./utils/utils.coffee":36,"./views/emoji_popover.coffee":40,"./views/view.coffee":55}],18:[function(l,c,e){(function(){var e,n,o,s,r,a,i,t,u;n=l("./utils/jq.coffee")._jq;o=l("./global.coffee")._ullog;i=l("./utils/utils.coffee").isElementInViewport;r=l("./utils/utils.coffee").getMousePosition;u=l("./utils/utils.coffee").overlapDiv;t=l("./global.coffee").isMobile();s=l("./global.coffee").get;a=function(){return s("preview")};e=function(){function Position(){var e,t,i,r;this.$button=n(s("button").el());this.$popup=n("#userlike-popup");this.drag=s("session").getDrag()||{};if(!this.drag.snap&&((e=this.drag)!=null?(t=e.pos)!=null?t.top:void 0:void 0)!=null&&((i=this.drag)!=null?(r=i.pos)!=null?r.left:void 0:void 0)!=null){o("Position::ctor use stored position top="+this.drag.pos.top+" left="+this.drag.pos.left+" snap="+this.drag.snap)}else{this.snap();o("Position::ctor use button position")}this.setupEvents()}Position.prototype.snap=function(){o("Position::snap");this.drag.snap=true;this.drag.down=false;return s("session").persistDrag(this.drag)};Position.prototype.update=function(){var e;if(!i(this.$popup.get())&&!this.drag.down){this.snap()}if(this.drag.snap){this.drag.pos=s("button").popupPosition()}try{this.$popup.css(this.drag.pos);if(this.isInDefaultPosition()){return s("button").slideOut()}else{return s("button").show()}}catch(t){e=t;return o("Position:update error=",e," drag=",this.drag)}};Position.prototype.isInDefaultPosition=function(){return this.drag.snap&&s("popup").isVisible()};Position.prototype.setupEvents=function(){var e;if(t){return}e=n(".userlike-drag");e.css({cursor:"move"});e.on("mousedown",function(t){return function(e){t.startDrag(e);return false}}(this)).on("touchstart",function(t){return function(e){t.startDrag(e);return false}}(this));return n(document).on("mouseup",function(t){return function(e){return t.stopDrag(e)}}(this)).on("mousemove",function(t){return function(e){return t.moveDrag(e)}}(this)).on("touchend",function(t){return function(e){return t.stopDrag(e)}}(this)).on("touchmove",function(t){return function(e){return t.moveDrag(e)}}(this))};Position.prototype.getMousePosition=function(e){var t,i,r,n;t=0;i=0;if(!e){e=window.event}if(((r=e.originalEvent)!=null?r.targetTouches:void 0)!=null){n=e.originalEvent.targetTouches[0];t=n.clientX;i=n.clientY}else if(e.pageX||e.pageY){t=e.pageX;i=e.pageY}else if(e.clientX||e.clientY){t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop}return{x:t,y:i}};Position.prototype.startDrag=function(e){var t,i;if(a()!=null&&((t=a())!=null?t.isActive():void 0)){return}if(n(n.event(e).target).hasClass("userlike-symbol")){return}i=this.$popup.position();this.drag={mouse:r(e),start:{left:i.left,top:i.top},down:true,snap:false};return s("session").persistDrag(this.drag)};Position.prototype.stopDrag=function(e){if(!this.drag.down){return}this.drag.down=false;if(u(this.$button,this.$popup)){this.snap()}this.update();return s("session").persistDrag(this.drag)};Position.prototype.moveDrag=function(e){var t;if(!this.drag.down){return}t=r(e);this.drag.pos={left:t.x-this.drag.mouse.x+this.drag.start.left,top:t.y-this.drag.mouse.y+this.drag.start.top};this.update();return s("session").persistDrag(this.drag)};return Position}();return c.exports.Position=e})()},{"./global.coffee":13,"./utils/jq.coffee":31,"./utils/utils.coffee":36}],19:[function(e,P,t){var B={}.hasOwnProperty;(function(){var i,t,r,n,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S;_=e("./utils/jq.coffee")._jq;v=e("./global.coffee")._ullog;w=e("./global.coffee");y=w.get;C=e("./session.coffee").isSessionActive;x=e("./utils/utils.coffee").isIE11;p=e("./fsm.coffee").PreviewState;s=e("./fsm.coffee").Idle;l=e("./fsm.coffee").Offline;f=e("./fsm.coffee").ProactiveSlotReject;c=e("./views/offline_message.coffee").OfflineMessageView;d=e("./views/register.coffee").RegisterView;g=e("./views/survey.coffee").SurveyView;t=e("./views/chat.coffee").ChatView;r=e("./views/disclaimer.coffee").DisclaimerView;o=e("./views/group_select.coffee").GroupSelectView;k=e("./views/transcript.coffee").TranscriptView;h=e("./views/progress.coffee").ProgressView;u=e("./views/message.coffee").MessageView;n=e("./views/feedback_rating_composite.coffee").FeedbackRatingCompositeView;m=e("./views/social_composite.coffee").SocialCompositeView;i=e("./buttons/button_factory.coffee").ButtonFactory;S=null;b=function(){var e;S=this.userlikePreview=e=function(){function UserlikePreview(){}UserlikePreview.has_registered_events=false;UserlikePreview.current_view_index=-1;UserlikePreview.last_config={};UserlikePreview.view_functions=["showChat","showOfflineMessageForm","showRegister","showPreSurvey","showGroupSelect","showPostSurvey","showFeedbackRatingComposite","showTranscript","showDisclaimer","showTransfer","showProgress","showError","showFeedbackOffline","showButton"];UserlikePreview.init=function(e){if(S!=null){S.registerEvents();S.setUIState();S.setOperatorInfo(e);return S.last_config=_.extend({},y("config"),e)}};UserlikePreview.setOperatorInfo=function(e){if(S!=null){S.operator_display_name=e.operator_display_name;return S.operator_url_image=e.operator_url_image}};UserlikePreview.updateSymbols=function(e){return _("#userlike .userlike-symbol-has-active-state").each(function(){if(!_(this).hasClass("userlike-disabled")){return _(this).css({color:e.theme_link_color})}})};UserlikePreview.start=function(){var e,t,i,r,n;t=false;n=[s,p,l,f];for(e=0,i=n.length;e<i;e++){r=n[e];if(y("fsm").state instanceof r){t=true}}if(t){if(!this.isActive()){y("fsm").next(p)}if(S!=null){S.setUIState()}S.resetPosition();return true}else{v("userlikePreview::start: Cannot start preview, not in Idle mode");return false}};UserlikePreview.resetPosition=function(){var e,t,i;return(e=y("popup"))!=null?(t=e.position)!=null?(i=t.drag)!=null?i.snap=true:void 0:void 0:void 0};UserlikePreview.isActive=function(){return y("fsm").state instanceof p};UserlikePreview.stop=function(){var e,t;if(S!=null){S.reset();S.setUIState();S.setButton(y("config"))}if(typeof(e=y("button")).registerEvents==="function"){e.registerEvents()}if(typeof(t=y("button")).fadeOutHoverText==="function"){t.fadeOutHoverText()}return y("fsm").next(s)};UserlikePreview.loaded=function(){var e,t,i;t=y("session");i=t.getState();e=!C(i)&&y("button").el();return e};UserlikePreview.destroy=function(){return S!=null?S.unregisterEvents():void 0};UserlikePreview.reset=function(){var e;this.resetSlogan();if((e=y("popup"))!=null?e.view:void 0){return y("popup").close()}};UserlikePreview.showOfflineMessageForm=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new c({config:e}).showOfflineMessageForm()};UserlikePreview.showOfflineMessageSent=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new c({config:e}).showOfflineMessageSent()};UserlikePreview.showRegister=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new d({config:e}).showRegisterForm()};UserlikePreview.showPreSurvey=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new g({config:e}).showPreSurvey()};UserlikePreview.showPostSurvey=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new g({config:e}).showPostSurvey()};UserlikePreview.showChat=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}e.operator_display_name=S!=null?S.operator_display_name:void 0;e.operator_url_image=S!=null?S.operator_url_image:void 0;return new t({config:e}).showPreview()};UserlikePreview.showDisclaimer=function(e){if(e==null){e=S.last_config}return new r({config:e}).show()};UserlikePreview.showGroupSelect=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}if(e.data==null){e.data={available:[{name:"Operator1",first:{url_image:"//d3upe020n1uosc.cloudfront.net/static/web/images/profile-pictures/default_2.jpg"}},{name:"Operator2",first:{url_image:"//d3upe020n1uosc.cloudfront.net/static/web/images/profile-pictures/default_3.jpg"}},{name:"Operator3",first:{url_image:"//d3upe020n1uosc.cloudfront.net/static/web/images/profile-pictures/default_4.jpg"}}]}}return new o({config:e}).show()};UserlikePreview.showTranscript=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new k({config:e}).show()};UserlikePreview.setHidePoweredBy=function(e){if(!(S!=null?S.start():void 0)){return}return this.last_config.hide_poweredby=e};UserlikePreview.setSlogan=function(e){var t,i;t=_("#userlike-poweredby");if(this.poweredby_original==null){this.poweredby_original=t.html()}if(this.hide_poweredby_original==null){this.hide_poweredby_original=t.css("display")}i=t.find("#userlike-poweredby-link");t.html(e);t.append(i);if(this.last_config.hide_poweredby){return t.hide()}else{return t.show()}};UserlikePreview.resetSlogan=function(){var e;e=_("#userlike-poweredby");e.html(this.poweredby_original);return e.css("display",this.hide_poweredby_original)};UserlikePreview.setButton=function(e){var t;if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}y("button").destroy();return w.set("button",t=new i({config:e}).makeButton().render().show(0))};UserlikePreview.showButton=function(){if(!(S!=null?S.start():void 0)){return}return y("popup").hide()};UserlikePreview.setEyecatcher=function(e){if(e==null){e={}}if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}this.setButton(e);return this.showButton()};UserlikePreview.setTheme=function(e){var t;if(!(S!=null?S.start():void 0)){return}e.theme=S!=null?S.themeGroupedToMerged(e.theme):void 0;if(S!=null){S.setButton(e)}y("popup").setConfig(e).setupTheme();return S!=null?(t=S.last_config)!=null?t.theme=e.theme:void 0:void 0};UserlikePreview.showTransfer=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new u({config:e}).showTransfer()};UserlikePreview.showProgress=function(e){var t;if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}t=new h({config:e});t.show();return t.updateSpinnerColor()};UserlikePreview.showError=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new u({config:e}).showErrorMessage()};UserlikePreview.showFeedbackOffline=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new u({config:e}).showOfflineMessageFeedback()};UserlikePreview.showFeedbackRatingComposite=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new n({config:e}).show()};UserlikePreview.showSocialComposite=function(e){if(!(S!=null?S.start():void 0)){return}if(e==null){e=S.last_config}return new m({config:e}).show()};UserlikePreview.registerEvents=function(){var e;if(!(S!=null?S.has_registered_events:void 0)){_("#userlike-preview-state").on("click",function(){if(S!=null?S.isActive():void 0){if(S!=null){S.stop()}}else{if(S!=null){S.start()}if(S!=null){S.cycleView()}}return S!=null?S.setUIState():void 0});_("#userlike-preview-next").on("click",function(){return S!=null?S.cycleView(1):void 0});_("#userlike-preview-prev").on("click",function(){return S!=null?S.cycleView(-1):void 0});e=x()?"change":"input";_("#userlike-preview-slider").on(e,function(t){return function(e){return t.goToView(parseInt(e.target.value),10)}}(this));return S!=null?S.has_registered_events=true:void 0}};UserlikePreview.unregisterEvents=function(){_("#userlike-preview-state").off("click");_("#userlike-preview-next").off("click");_("#userlike-preview-prev").off("click");_("#userlike-preview-slider").off("input");return S!=null?S.has_registered_events=false:void 0};UserlikePreview.setUIState=function(){_("#userlike-preview-slider").attr("max",(S!=null?S.view_functions.length:void 0)-1);if(S!=null?S.isActive():void 0){_("#userlike-preview-state").removeClass("icon-play").addClass("icon-pause");_(".preview-has-disabled").removeClass("disabled");return _("#userlike-preview-slider").get().disabled=false}else{_("#userlike-preview-state").removeClass("icon-pause").addClass("icon-play");_(".preview-has-disabled").addClass("disabled");return _("#userlike-preview-slider").get().disabled=true}};UserlikePreview.cycleView=function(e){if(e==null){e=1}if(!(S!=null?S.start():void 0)){return}if(!(S!=null?S.isActive():void 0)){return}if(S!=null){S.current_view_index+=e}return S!=null?S.goToView(S!=null?S.current_view_index:void 0):void 0};UserlikePreview.goToView=function(e){var t;if(!(S!=null?S.isActive():void 0)){return}if(S!=null){S.current_view_index=e}if((S!=null?S.current_view_index:void 0)<0){if(S!=null){S.current_view_index=(S!=null?S.view_functions.length:void 0)-1}}if((S!=null?S.current_view_index:void 0)>=(S!=null?S.view_functions.length:void 0)){if(S!=null){S.current_view_index=0}}_("#userlike-preview-slider").val(S!=null?S.current_view_index:void 0);t=S!=null?S.view_functions[S!=null?S.current_view_index:void 0]:void 0;if(S!=null){S.setUIState()}y("popup").setConfig(S.last_config).setupTheme();return S[t]()};UserlikePreview.themeGroupedToMerged=function(e){var t,i,r,n,o,s;s={};for(t in a){if(!B.call(a,t))continue;o=a[t];for(i=0,r=o.length;i<r;i++){n=o[i];s[n]=e[t]}}return s};return UserlikePreview}();return w.set("preview",S)};a={lead_color:["headbar_bg_color","icon_active_color","button_bg_color","input_active_text_color","chat_operator_text color","icon_hover_color"],lead_text_color:["headbar_text_color","headbar_icon_color","button_text_color","button_symbol_color"],text_color:["headline_text_color","text_default_color"],background_color:["window_bg_color"],chat_text_color:["chat_text_color_1","chat_text_color_2"],chat_bg_color_1:["chat_bg_color_1"],chat_bg_color_2:["chat_bg_color_2"],link_color:["link_text_color","icon_default_color","input_default_text_color","border_color"],font:["font"],button_orientation:["button_orientation"],button_offset_x:["button_offset_x"],button_style:["button_style"],button_symbol_online:["button_symbol_online"],button_symbol_offline:["button_symbol_offline"],border_radius:["border_radius"],shadow:["shadow"],icon_set:["icon_set"]};return P.exports={assignPreview:function(e){return b.call(e)},userlikePreview:function(){return y("preview")},MAP:a}})()},{"./buttons/button_factory.coffee":6,"./fsm.coffee":12,"./global.coffee":13,"./session.coffee":24,"./utils/jq.coffee":31,"./utils/utils.coffee":36,"./views/chat.coffee":38,"./views/disclaimer.coffee":39,"./views/feedback_rating_composite.coffee":43,"./views/group_select.coffee":44,"./views/message.coffee":46,"./views/offline_message.coffee":47,"./views/progress.coffee":48,"./views/register.coffee":50,"./views/social_composite.coffee":51,"./views/survey.coffee":52,"./views/transcript.coffee":53}],20:[function(P,B,e){var A=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var r,e,t,i,n,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S;x=P("./global.coffee");y=x.get;v=x._ullog;k=x.UserlikeLS;w=function(){return y("preview")};c=P("./fsm.coffee").FSM;S=P("./utils/utils.coffee").unpack;C=P("./session.coffee");s=C.BackendMemory;o=C.BackendLocalStorage;t=C.BackendCookie;u=C.BackendSessionCookie;e=C.BackendContainerCookie;a=C.BackendSessionContainerCookie;i=C.BackendExpireContainerCookie;n=C.BackendExpireCookie;f=C.SessionFactory;g=C.Storage;p=C.Session;h=C.SessionStorage;d=C.SessionStoragePrivacy;l=P("./utils/cookies.coffee").Cookies;_=P("./utils/jq.coffee")._jq;m=function(){var e;function Singleton(){}e=null;Singleton.get=function(){if(this.instance==null){this.instance=new this}return this.instance};return Singleton}();r=function(e){A(App,e);function App(){return App.__super__.constructor.apply(this,arguments)}App.prototype.run=function(e,t,i,r){var n;n=new c;x.set("fsm",n);return n.start({app_key:e,widget_key:t,config:S(i),router:r})};return App}(m);b=function(){this.userlikeInit=function(e,t,i){return r.get().run(e,t,i)};this.userlikePushState=function(){};this.userlikeMonitorGoal=function(){};this.userlikeQuitChat=function(){return y("fsm").event("receiveQuit")};this.userlikeStartChat=function(e){y("fsm").event("chatButton");if(e!=null){return _.event(e).preventDefault()}};this.userlikeHideButton=function(e){return _(y("button").el()).hide()};this.userlikeShowButton=function(e){return _(y("button").el()).show()};this.userlikeChatButton=function(e){y("fsm").event("chatButton");if(e!=null){return _.event(e).preventDefault()}};this.userlikeCloseButton=function(e){y("fsm").event("closeButton");if(e!=null){return _.event(e).preventDefault()}};this.userlikeUpdateAPI=function(){return y("fsm").event("updateAPI")};this.userlikeInputEnter=function(e){y("fsm").event("inputEnter");if(e!=null){return _.event(e).preventDefault()}};this.userlikeCheckOperatorStatus=function(e){v("#######################################################################");v("# This feature has been removed an please use userlikeCheckSlotStats()#");return v("#######################################################################")};this.userlikeCheckSlotStats=function(e){return y("slot").checkSlotStats(e)};this.userlikeRequestOperatorChat=function(e){return y("fsm").event("directRequest",e)};this.userlikeChatState=function(){return y("session").getState()};this.userlikeSendEvent=function(e,t){return y("fsm").event(e,t)};this.userlikeDeleteCookies=function(e){var t,i;if(e==null){e=1}i=void 0;x.set("session",i);try{v("userlikeDeleteCookies: clear memory");g.memory.removeAllItems()}catch(r){t=r;v("userlikeDeleteCookies: Exception=",t)}try{v("userlikeDeleteCookies: remove expire cookie");l.remove("uslk_e")}catch(r){t=r;v("userlikeDeleteCookies: Exception=",t)}try{v("userlikeDeleteCookies: remove session cookie");l.remove("uslk_s")}catch(r){t=r;v("userlikeDeleteCookies: Exception=",t)}try{v("userlikeDeleteCookies: clear localstorage");k.clear();k.setItem("uslk_debug",true)}catch(r){t=r;v("userlikeDeleteCookies: Exception=",t)}if(e){return window.location.reload()}};this.userlikeGetFsmStateName=function(){return y("fsm").state.getName()};this.userlikeIsFsmStateFrozen=function(){return y("fsm").freeze};this.userlikeEnableDebug=function(){return y("session").set("debug",true)};this.userlikeDisableDebug=function(){return y("session").set("debug",false)};this.userlikeEnableNoState=function(){return y("userlike").nostate=true};this.userlikeDisableNoState=function(){return y("userlike").nostate=false};this.userlikeRemoteApiModeNormal=function(){return y("fsm").event("normal")};this.userlikeRemoteApiModeProactivePassive=function(e,t){return y("fsm").event("proactive_passive",{timeout:e,message:t})};this.userlikeRemoteApiModeProactivePassiveAndRegister=function(e,t){return y("fsm").event("proactive_passive_register",{timeout:e,message:t})};this.userlikeRemoteApiModeRegister=function(){return y("fsm").event("register")};this.userlikeRemoteApiResetState=function(){return y("fsm").event("reset")};this.userlikeFacebookLoginCallback=function(e){return y("fsm").event("facebookLoginResponse",e)};this.userlikeSelectValue=function(e){return y("fsm").event("select",e)};this.userlikeDebugViews=function(){var e;return(e=w())!=null?e.cycleView():void 0};this.userlikeInjectConfig=function(){var e;e=y("config");e.chat_widget_id="37256";e.id="37256";e.customer_id="2";e.operator_group_id="84970";e.widget_key="";y("session").set("inject",JSON.stringify(e));return window.location.reload()};this.userlikeInjectBubble=function(e,t,i,r,n){return y("fsm").event("injectBubble",{body:e,type:t,prefix:i,css_class:r||"injected",extract_callback:typeof n==="function"?n:void 0})};this.userlikeRemoveConfig=function(){y("session")["delete"]("inject");return window.location.reload()};this.userlikeTesting={BackendMemory:s,BackendLocalStorage:o,BackendCookie:t,BackendSessionCookie:u,BackendContainerCookie:e,BackendSessionContainerCookie:a,BackendExpireContainerCookie:i,BackendExpireCookie:n,SessionFactory:f,Storage:g,Session:p,SessionStorage:h,SessionStoragePrivacy:d,Cookies:l,fsm:y("fsm"),config:y("config")};return this.userlikeDebugLivePreview=function(){var e,t;t="a";e=function(){t=t+"a";y("fsm").event("livePreview",t);if(t.length<20){return setTimeout(e,1e3)}else{return y("fsm").event("sendMessage",t)}};return e()}};return B.exports={assignApi:function(e){return b.call(e)},App:r,Singleton:m}})()},{"./fsm.coffee":12,"./global.coffee":13,"./session.coffee":24,"./utils/cookies.coffee":28,"./utils/jq.coffee":31,"./utils/utils.coffee":36}],21:[function(t,i,e){(function(){var e,n,o,s,a,u;o=t("./utils/jq.coffee")._jq;s=t("./global.coffee")._ullog;a=t("./global.coffee").get;n=t("./utils/urlparser.coffee").UrlParser;u=t("./utils/utils.coffee").isIE11;e=function(){function Push(){}Push.prototype.send=function(e,t){var i,r;s("Push::send  url="+e);r=new n(e);if(r.isOffsite()){if(o.browser.msie||u()){return t({action:"not_supported"})}if(r.isInsecure()){s("Push::send offsite failed insecure url="+r.url());return t({action:"insecure"})}s("Push::send offsite url="+r.url());i={url:encodeURIComponent(r.url())};return o.ajaxJsonp({url:"https://api.userlike.com/api/client/iframe/?url="+encodeURIComponent(r.url()),success:function(e){if(e.xframe){return t({action:"xframe"})}else if(e.status!==200){return t({action:"failed"})}else{a("popup").injectIframe(r.url_inherit());return t({action:"open"})}},error:function(e){s("Push::send offsite failed ajax url="+r.url());return t({action:"failed"})}})}else{s("Push::send onsite url="+r.original());if(r.isSame()){s("Push::send onsite failed same url="+r.original());return t({action:"same"})}return o.ajaxGet({url:r.original(),success:function(){s("Push::send onsite navigate url="+r.original());window.location=r.original();return t({action:"navigate"})},error:function(){s("Push::send onsite failed url="+r.original());return t({action:"failed"})}})}};return Push}();return i.exports.Push=e})()},{"./global.coffee":13,"./utils/jq.coffee":31,"./utils/urlparser.coffee":35,"./utils/utils.coffee":36}],22:[function(c,p,e){(function(){var n,e,i,t,r,o,s,a,u,l;u=c("./global.coffee");a=u.get;s=u._ullog;o=c("./utils/jq.coffee")._jq;i=c("./utils/loader.coffee").Loader;e=c("./fsm.coffee").FSM;t=function(){function PropertyStore(){this.cache={}}PropertyStore.prototype.get=function(i,r){if(i in this.cache){return r(this.cache[i])}else{return this.fetch(i,function(t){return function(e){t.cache[i]=e;return r(e)}}(this))}};PropertyStore.prototype.fetch=function(e,t){var i,r;switch(e){case"url":return t(window.location.href);case"language":i=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage;r=i&&i.toLowerCase().split("-")[0];return t(r);case"device":return t(u.isMobile()?"mobile":"desktop");case"user_agent":return t(window.navigator.userAgent);case"geolocation.continent":return this.get("geolocation",function(e){return t(e!=null?e.continent_code:void 0)});case"geolocation.country":return this.get("geolocation",function(e){return t(e!=null?e.country_code:void 0)});case"geolocation":return this.fetchGeolocation(function(e){return t(e)})}};PropertyStore.prototype.fetchGeolocation=function(e){var t;t="userlikeCallbackGeolocation";u.setJsonpCallback(t,e);return i.loadScript("https://api.userlike.com/api/chat/geoip/?callback=userlike."+t,function(){})};return PropertyStore}();n=function(){function Condition(e){var t;this.field=e.field,this.operator=e.operator,this.value=e.value;if(this.field==="geolocation"){t=this.value.split(".");this.field="geolocation."+t[0];this.value=t[1]}}Condition.prototype.match=function(e,i){return e.get(this.field,function(t){return function(e){switch(t.operator){case"equal":return i(e===t.value);case"regex":return i(RegExp(t.value).test(e));default:return i(false)}}}(this))};return Condition}();l=function(t,i,r){var e;if(!(t&&t.length>0)){return r(true)}e=t[0];return new n(e).match(i,function(e){return function(e){if(e){return l(t.slice(1),i,r)}else{return r(false)}}}(this))};r=function(){function Router(e){this.config=e;this.ruleset=this.config.ruleset||[];this.properties=new t}Router.prototype.resolve=function(){if(!this.config.enabled){s("Router::resolve router is disabled");return}return this._resolve(this.ruleset.slice())};Router.prototype._resolve=function(i){var r,e,t,n;if(!(i.length>0)){s("Router::resolve no matching widget found - falling back to default");this.fetchWidgetLoader(this.config.default_widget);return}e=i[0],t=e.rules,n=e.widget,r=e.config;return l(t,this.properties,function(t){return function(e){if(e){return t.fetchWidgetLoader(n,r)}else{return t._resolve(i.slice(1))}}}(this))};Router.prototype.fetchWidgetLoader=function(e,t){if(!e){s("Router::fetchWidgetLoader No widget specified");return}s("Router::fetchWidgetLoader Loading widget "+e.key);a("userlike")._config=void 0;a("userlike")._router=t||{};return i.loadScript(e.url,function(){})};return Router}();return p.exports={Router:r}})()},{"./fsm.coffee":12,"./global.coffee":13,"./utils/jq.coffee":31,"./utils/loader.coffee":32}],23:[function(s,a,e){(function(){var i,e,t,n,r,o;n=s("./utils/jq.coffee")._jq;r=s("./global.coffee")._ullog;t=s("./global.coffee").UserlikeLS;o=s("./global.coffee").isDebugEnabled;i=s("./utils/loader.coffee").Loader;e=function(){var e;function Screenshot(){}e=function(){return init_screenshot()};Screenshot.prototype.load=function(e){var t;if(window.Promise!=null){t={html2canvas:"https://dq4irj27fs462.cloudfront.net/javascripts/html2canvas-production-2014.min.js"}}else{t={es6:"https://dq4irj27fs462.cloudfront.net/javascripts/es6-production-2014.min.js",html2canvas:"https://dq4irj27fs462.cloudfront.net/javascripts/html2canvas-production-2014.min.js"}}return i.loadScripts(t,e)};Screenshot.prototype.unsupported=function(){return n.browser.msie&&parseInt(n.browser.version)<10};Screenshot.prototype.take=function(){n(".userlike").attr("data-html2canvas-ignore","");n("#userlike").attr("data-html2canvas-ignore","");return window.userlike.html2canvas([document.body],{logging:o(),proxy:"https://www.userlike.com/api/proxy/image/"})};Screenshot.prototype.crossDomainPost=function(e,t,i){var r;r=JSON.stringify(t);return n.ajaxPost({url:e,data:r,success:function(e){return i(false,JSON.parse(e))},error:function(){return i(true)}})};return Screenshot}();return a.exports.Screenshot=e})()},{"./global.coffee":13,"./utils/jq.coffee":31,"./utils/loader.coffee":32}],24:[function(T,O,e){var M={}.hasOwnProperty,E=function(e,t){for(var i in t){if(M.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e};(function(){var e,t,i,r,n,o,s,a,u,c,l,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S,P,B,A;S=T("./global.coffee");k=S._ullog;b=S.get;w=T("./utils/utils.coffee").getLocation;m=S.UserlikeLS;c=T("./utils/cookies.coffee").Cookies;g=T("./utils/validator.coffee").Validator;P=T("./utils/utils.coffee").guid;u=T("./utils/utils.coffee").Base64;y=function(){var e,t;try{c.set("_uslk_test","test");t=c.get("_uslk_test")==="test";c.remove("_uslk_test");return t}catch(i){e=i;return false}};O.exports.getCookieSupport=y;C=function(){var e;try{m.setItem("_uslk_test","test");m.removeItem("_uslk_test");return true}catch(t){e=t;return false}};O.exports.getStorageSupport=C;A=function(){var e;e=window.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i);if(e){return"."+e[0]}else{return""}};O.exports.subDomain=A;v=function(){if(b("config").wildcard_cookie){return A()}else{}};O.exports.cookiesDomain=v;_=function(){var e,t,i,r,n,o,s,a,u,l;if(b("config").wildcard_cookie){c.remove("uslk_e");c.remove("uslk_s")}else{c.remove("uslk_e",{domain:A()});c.remove("uslk_s",{domain:A()})}e=d.expireContainerCookie;s={_uslk_uuid:"uuid",_uslk_email:"client_email",_uslk_name:"client_name",_uslk_additional01:"client_additional01_value",_uslk_additional02:"client_additional02_value",_uslk_additional03:"client_additional03_value",_uslk_visits:"visits"};for(o in s){if(!M.call(s,o))continue;n=s[o];l=c.set(o);if(l){e.setItem(n,l)}}a=["widget_config","widget_key","state","app_state","referrer","chat_meta_id","id","ct","co","created","operator_id","operator_name","operator","bootstrapped","active","page_impressions","email","name","uuid","additional01","additional02","additional03","visits"];u=[];for(t=0,i=a.length;t<i;t++){r=a[t];u.push(c.remove("_uslk_"+r,{domain:v()}))}return u};O.exports.cookieCleanup=_;x=function(e){var t,i,r;r=e!=null?e.split(";"):void 0;if(!r){return null}i=r[0];t=parseInt(r[1]);return{state:i,expires:t}};O.exports.getStateData=x;o=function(){function BackendMemory(){}BackendMemory.prototype.data={};BackendMemory.prototype.setItem=function(e,t){return this.data[e]=t};BackendMemory.prototype.getItem=function(e){var t;t=this.data[e];return t};BackendMemory.prototype.removeItem=function(e){return delete this.data[e]};BackendMemory.prototype.removeAllItems=function(){return this.data={}};return BackendMemory}();O.exports.BackendMemory=o;n=function(){function BackendLocalStorage(){}BackendLocalStorage.prototype.prefix="uslk_";BackendLocalStorage.prototype.setItem=function(e,t){if(t===""){return}return m.setItem(""+this.prefix+e,t)};BackendLocalStorage.prototype.getItem=function(e){var t;t=m.getItem(""+this.prefix+e);return t};BackendLocalStorage.prototype.removeItem=function(e){return m.removeItem(""+this.prefix+e)};BackendLocalStorage.prototype.removeAllItems=function(){var e,t;t=[];for(e in m){if(!M.call(m,e))continue;if(e.indexOf(this.prefix)>-1){t.push(m.removeItem(e))}else{t.push(void 0)}}return t};return BackendLocalStorage}();O.exports.BackendLocalStorage=n;t=function(){function BackendCookie(){}BackendCookie.prototype.prefix="uslk_";BackendCookie.prototype.domain=function(){var e;e=window.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i);if(e){return"."+e[0]}else{return""}}();BackendCookie.prototype.setItem=function(e,t,i){return c.set(this.prefix+e,t,{expires:i,domain:v()})};BackendCookie.prototype.getItem=function(e){var t;t=c.get(this.prefix+e);return t};BackendCookie.prototype.removeItem=function(e){return c.remove(this.prefix+e,{domain:v()})};return BackendCookie}();O.exports.BackendCookie=t;a=function(e){E(BackendSessionCookie,e);function BackendSessionCookie(){return BackendSessionCookie.__super__.constructor.apply(this,arguments)}BackendSessionCookie.prototype.setItem=function(e,t){return BackendSessionCookie.__super__.setItem.call(this,e,t)};return BackendSessionCookie}(t);O.exports.BackendSessionCookie=a;e=function(e){E(BackendContainerCookie,e);BackendContainerCookie.prototype.sep="~";function BackendContainerCookie(e){this.map=e;this.data={}}BackendContainerCookie.prototype.escape=function(e){return e};BackendContainerCookie.prototype.unescape=function(e){return e};BackendContainerCookie.prototype.serialize=function(){var e,t,i,r,n,o;n="";r=this.map;for(t=0,i=r.length;t<i;t++){e=r[t];o=this.data[e];if(o!==void 0&&o!==null){n+=""+this.escape(o)+this.sep}else{n+=this.sep}}return n};BackendContainerCookie.prototype.deserialize=function(e){var t,i,r,n,o;if(!e){return}t=e.split(this.sep);n=[];for(i in t){if(!M.call(t,i))continue;o=t[i];r=this.map[i];n.push(this.data[r]=decodeURIComponent(this.unescape(o)))}return n};BackendContainerCookie.prototype.removeItem=function(e){return this.setItem(e,void 0)};BackendContainerCookie.prototype.removeAllItems=function(){var e,t,i;t=this.data;i=[];for(e in t){if(!M.call(t,e))continue;i.push(this.removeItem(e))}return i};return BackendContainerCookie}(t);O.exports.BackendContainerCookie=e;s=function(e){E(BackendSessionContainerCookie,e);function BackendSessionContainerCookie(){this.data={};this.map=["app_state","id","duration","client_terminating","client_originating","chat_meta_id"];this.deserialize(c.get(this.prefix+"s"))}BackendSessionContainerCookie.prototype.getItem=function(e){var t;t=this.data[e];return t};BackendSessionContainerCookie.prototype.setItem=function(e,t){this.data[e]=t;return BackendSessionContainerCookie.__super__.setItem.call(this,"s",this.serialize())};return BackendSessionContainerCookie}(e);O.exports.BackendSessionContainerCookie=s;i=function(e){E(BackendExpireContainerCookie,e);function BackendExpireContainerCookie(){this.data={};this.map=["uuid","blocked","client_name","client_email","client_additional01_value","client_additional02_value","client_additional03_value","visits"];this.deserialize(c.get(this.prefix+"e"))}BackendExpireContainerCookie.prototype.getItem=function(e){var t;t=this.data[e];return t};BackendExpireContainerCookie.prototype.setItem=function(e,t){this.data[e]=t;return BackendExpireContainerCookie.__super__.setItem.call(this,"e",this.serialize(),parseInt(b("config").cookie_expire))};return BackendExpireContainerCookie}(e);O.exports.BackendExpireContainerCookie=i;r=function(e){E(BackendExpireCookie,e);function BackendExpireCookie(){return BackendExpireCookie.__super__.constructor.apply(this,arguments)}BackendExpireCookie.prototype.setItem=function(e,t){return BackendExpireCookie.__super__.setItem.call(this,e,t,parseInt(b("config").cookie_expire))};return BackendExpireCookie}(t);O.exports.BackendExpireCookie=r;p=function(){function SessionFactory(){}SessionFactory.prototype.get=function(){if(b("config").data_privacy){return new h}else{return new f}};return SessionFactory}();O.exports.SessionFactory=p;d=function(){function Storage(){}Storage.memory=new o;Storage.expireCookie=new r;Storage.sessionCookie=new a;Storage.localStorage=new n;Storage.expireContainerCookie=new i;Storage.sessionContainerCookie=new s;return Storage}();O.exports.Storage=d;B=function(e){return e==="Chat"||e==="ChatMinimized"};O.exports.isSessionActive=B;l=function(){function Session(){}Session.is_number=new RegExp("^[-]?[1-9][0-9]*([.][0-9]+)?$");Session.is_bool=new RegExp("^[01]$");Session.prototype.items={widget_key:d.localStorage,config:d.localStorage,app_key:d.localStorage,drag:d.localStorage,operator_binding:d.localStorage,goal_reached:d.localStorage,referrer:d.localStorage,ip:d.localStorage,longitude:d.localStorage,latitude:d.localStorage,operator_display_name:d.localStorage,operator_id:d.localStorage,in_service_time:d.localStorage,chatbutler_start_time:d.localStorage,chatbutler_dialog:d.localStorage,chatbutler_topic:d.localStorage,chatbutler_extra_info:d.localStorage,was_proactive:d.localStorage,inital_url:d.localStorage,chat_meta_id:d.sessionContainerCookie,page_impressions:d.localStorage,locale:d.localStorage,debug:d.localStorage,inject:d.localStorage,uuid:d.expireContainerCookie,blocked:d.expireContainerCookie,client_name:d.expireContainerCookie,client_email:d.expireContainerCookie,client_additional01_value:d.expireContainerCookie,client_additional02_value:d.expireContainerCookie,client_additional03_value:d.expireContainerCookie,visits:d.expireContainerCookie,app_state:d.sessionContainerCookie,id:d.sessionContainerCookie,duration:d.sessionContainerCookie,client_terminating:d.sessionContainerCookie,client_originating:d.sessionContainerCookie};Session.state_map={Chat:"Offline",ChatMinimized:"Offline"};Session.prototype.getCrossDomainSessionState=function(){var e,t,i,r,n;t=["config","inject","blocked"];e={};r=this.items;for(i in r){n=r[i];if(t.indexOf(i)===-1){e[i]=this.get(i)}}return e};Session.prototype.setCrossDomainSessionState=function(e){var t,i,r,n;i=e.session;r=[];for(t in i){n=i[t];if(n){r.push(this.set(t,n))}else{r.push(void 0)}}return r};Session.prototype.lookup=function(e){return this.items[e]||d.memory};Session.prototype.set=function(e,t){return this.lookup(e).setItem(e,t)};Session.prototype.get=function(e){var t;t=this.lookup(e).getItem(e);if(Session.is_number.test(t)){t=parseFloat(t)}else if(Session.is_bool.test(t)){t=parseInt(t)}return t};Session.prototype["delete"]=function(e){return this.lookup(e).removeItem(e)};Session.prototype.setIfEmpty=function(e,t){if(!this.get(e)){return this.set(e,t)}};Session.prototype.reset=function(){this.deleteConfig();this.setState(null);this.resetChatDuration();return this.resetSession()};Session.prototype.resetSession=function(){this["delete"]("id");this["delete"]("chat_meta_id");this["delete"]("was_proactive");this["delete"]("operator_display_name");this["delete"]("operator_id");this["delete"]("chatbutler_start_time");this["delete"]("chatbutler_dialog");this["delete"]("chatbutler_topic");this["delete"]("chatbutler_extra_info");return this["delete"]("chatbutler_minimized")};Session.prototype.resetChatDuration=function(){this.set("duration",0);return this["delete"]("chatbutler_start_time")};Session.prototype.resetStats=function(){this.set("client_terminating",0);return this.set("client_originating",0)};Session.prototype.deleteConfig=function(){this["delete"]("widget_key");this["delete"]("config");return this["delete"]("app_key")};Session.prototype.saveConfig=function(){this.set("widget_key",b("config").widget_key);this.set("app_key",b("config").app_key);return this.set("config",JSON.stringify(b("config")))};Session.prototype.persistDrag=function(e){return this.set("drag",JSON.stringify(e))};Session.prototype.getDrag=function(){var e;e=this.get("drag");if(!e){return}return JSON.parse(e)};Session.prototype.resetDrag=function(){return this["delete"]("drag")};Session.prototype.getConfig=function(){return{widget_key:this.get("widget_key"),app_key:this.get("app_key"),config:JSON.parse(this.get("config"))}};Session.prototype.hasClientTerminating=function(){return this.get("client_terminating")!==0};Session.prototype.hasClientOriginating=function(){return this.get("client_originating")!==0};Session.prototype.incClientTerminating=function(){return this.set("client_terminating",this.get("client_terminating")+1)};Session.prototype.incClientOriginating=function(){return this.set("client_originating",this.get("client_originating")+1)};Session.prototype.setState=function(e,t){if(t){return this.set("app_state",e+";"+(+new Date+t))}else{return this.set("app_state",e+";0")}};Session.prototype.getState=function(){var e,t,i,r,n,o,s;e=this.get("app_state");s=x(e);if(!s){return}o=s.state;t=s.expires;r=+new Date;i=t>0&&t<r;if(i){n=Session.state_map[o];this.setState(n);return n}else{return o}};Session.prototype.updateUserData=function(){var e,t,i,r,n,o;e=window.userlikeData||b("data");if(g.validateName(e!=null?(t=e.user)!=null?t.name:void 0:void 0)){this.set("client_name",e.user.name)}if(g.validateEmail((i=e.user)!=null?i.email:void 0)){this.set("client_email",e.user.email)}if(g.validateAdditional((r=e.user)!=null?r.additional01:void 0)){this.set("client_additional01_value",e.user.additional01)}if(g.validateAdditional((n=e.user)!=null?n.additional02:void 0)){this.set("client_additional02_value",e.user.additional02)}if(g.validateAdditional((o=e.user)!=null?o.additional03:void 0)){return this.set("client_additional03_value",e.user.additional03)}};Session.prototype.addAdditionalRegisterValues=function(e){var t,i,r,n;n=[1,2,3];for(i=0,r=n.length;i<r;i++){t=n[i];if(b("config")["register_additional0"+t+"_enabled"]){e["client_additional0"+t+"_value"]=this.get("client_additional0"+t+"_value");e["client_additional0"+t+"_name"]=b("config")["register_additional0"+t+"_name"]}}return e};Session.prototype.setGoal=function(e){var t;t=this.get("goal_reached");if(t){t=JSON.parse(t)}else{t={}}t[e]=(new Date).getTime();return this.set("goal_reached",JSON.stringify(t))};Session.prototype.getGoal=function(e){var t;t=this.get("goal_reached");if(t){t=JSON.parse(t)}else{t={}}return t[e]};Session.prototype.setOperator=function(e){var t;this.set("operator_display_name",e.display_name);this.set("operator_id",e.id);t=this.get("operator_binding");if(t){t=JSON.parse(t)}else{t={}}t[e.operator_group_id]=e.id;return this.set("operator_binding",JSON.stringify(t))};Session.prototype.getOperatorBinding=function(e){var t;t=this.get("operator_binding");if(t){t=JSON.parse(t)}else{t={}}return t[e]};Session.prototype.startChatDuration=function(){if(this.get("duration")===0){this.set("duration",+new Date);return true}};Session.prototype.getChatDuration=function(){var e;e=this.get("duration");if(e>0){return(+new Date-e)/1e3}};Session.prototype.isActive=function(){return B(this.getState())};Session.prototype.isChatbutlerActive=function(){var e;e=this.getState();return e&&e.match(/^ChatButler/)};Session.prototype.isOffline=function(){return this.getState()==="Offline"};Session.prototype.isRject=function(){return this.getState()==="ProactiveSlotReject"};Session.prototype.isInServiceTime=function(){return parseInt(this.get("in_service_time"))===1};Session.prototype.addMessageFromChatbutler=function(e){var t;this.setIfEmpty("chatbutler_dialog","[]");t=JSON.parse(this.get("chatbutler_dialog"));t.push(["ct",e,+new Date]);if(typeof t.toJSON==="function"){t.toJSON=void 0}return this.set("chatbutler_dialog",JSON.stringify(t))};Session.prototype.addMessageToChatbutler=function(e){var t;this.setIfEmpty("chatbutler_dialog","[]");t=JSON.parse(this.get("chatbutler_dialog"));t.push(["co",e,+new Date]);if(typeof t.toJSON==="function"){t.toJSON=void 0}return this.set("chatbutler_dialog",JSON.stringify(t))};Session.prototype.getChatbutlerDialog=function(){var n,o;n=this.get("chatbutler_dialog");if(n==null){return n}n=function(){var e,t,i,r;i=JSON.parse(n);r=[];for(e=0,t=i.length;e<t;e++){o=i[e];r.push({type:o[0],body:o[1],sent_at:new Date(o[2]).toISOString()})}return r}();return n};return Session}();O.exports.Session=l;f=function(e){E(SessionStorage,e);function SessionStorage(){var e;if(!this.get("uuid")){b("slot").checkSlotUser()}this.setIfEmpty("uuid",u.encode(P()));this.bootstrap();this.updateUserData();e=this.get("page_impressions")||0;this.set("page_impressions",++e)}SessionStorage.prototype.getLocation=function(){return w(function(t){return function(e){if(e){t.set("latitude",e.coords.latitude);t.set("longitude",e.coords.longitude);return b("fsm").event("locationchange")}}}(this))};SessionStorage.prototype.bootstrap=function(){var e;if(this.get("app_state")){return}k("SessionStorage::bootstrap init values");e=this.get("visits")||0;this.set("visits",++e);this.set("page_impressions",0);this.set("referrer",document.referrer);this.set("app_state",null);this.set("inital_url",document.location.href.substring(0,4096));this.resetStats();this.resetChatDuration();return this.resetDrag()};SessionStorage.prototype.packet=function(){var e,t;this.updateUserData();e={client_uuid:this.get("uuid"),client_name:this.get("client_name"),client_email:this.get("client_email"),locale:this.get("locale"),url:document.location.href.substring(0,4096),inital_url:this.get("inital_url"),title:document.title,custom:(t=window.userlikeData||b("data"))!=null?t.custom:void 0,pre_survey_option:this.get("pre_survey_option"),goal:this.get("goal"),page_impressions:this.get("page_impressions"),visits:this.get("visits"),referrer:this.get("referrer"),ip:this.get("ip"),latitude:this.get("latitude"),longitude:this.get("longitude"),duration:this.getChatDuration(),chatbutler_dialog:this.getChatbutlerDialog()};return this.addAdditionalRegisterValues(e)};return SessionStorage}(l);O.exports.SessionStorage=f;h=function(e){E(SessionStoragePrivacy,e);function SessionStoragePrivacy(){if(!this.get("uuid")){b("slot").checkSlotUser()}this.setIfEmpty("uuid",u.encode(P()));this.bootstrap();this.updateUserData()}SessionStoragePrivacy.prototype.packet=function(){var e,t;this.updateUserData();e={client_uuid:this.get("uuid"),client_name:this.get("client_name"),client_email:this.get("client_email"),pre_survey_option:this.get("pre_survey_option"),goal:this.get("goal"),url:document.location.href.substring(0,4096),custom:(t=window.userlikeData||b("data"))!=null?t.custom:void 0,duration:this.getChatDuration(),chatbutler_dialog:this.getChatbutlerDialog()};return this.addAdditionalRegisterValues(e)};SessionStoragePrivacy.prototype.getLocation=function(){};SessionStoragePrivacy.prototype.bootstrap=function(){if(this.get("app_state")){return}k("SessionStoragePrivacy::bootstrap init values");this.set("app_state",null);this.resetChatDuration();return this.resetDrag()};return SessionStoragePrivacy}(l);return O.exports.SessionStoragePrivacy=h})()},{"./global.coffee":13,"./utils/cookies.coffee":28,"./utils/utils.coffee":36,"./utils/validator.coffee":37}],25:[function(t,i,e){(function(){var s,e,o,a;s=t("./utils/loader.coffee").Loader;o=t("./global.coffee")._ullog;a=t("./global.coffee").get;e=function(){function Slot(){this.socket=null;this.requests=[];this.queue_timer=null;this.cache=null;this.timer=null}Slot.prototype.resetCache=function(){o("Slot::resetCache");return this.cache=null};Slot.prototype.setCache=function(e){o("Slot::setCache data=",e);this.cache=e;clearTimeout(this.timer);return this.timer=setTimeout(function(e){return function(){return e.resetCache()}}(this),15*1e3)};Slot.prototype.repairCallback=function(e){if(typeof window.userlike!=="object"){window.userlike={}}if(typeof window.userlike[e]!=="function"){return window.userlike[e]=a("jsonp_callbacks")[e]}};Slot.prototype.checkCache=function(e){if(this.cache){o("Slot::checkCache found callback="+e+" data=",this.cache);window.userlike[e](this.cache);return true}return false};Slot.prototype.checkButton=function(e){var t;this.repairCallback(e);if(this.checkCache(e)){return}t=a("config");return s.loadScript("https://api.userlike.com/api/chat/button/check/?customer_id="+t.customer_id+"&chat_widget_id="+t.chat_widget_id+"&callback=userlike."+e,function(){})};Slot.prototype.checkAvailable=function(e){var t;this.repairCallback(e);t=a("config");return s.loadScript("https://api.userlike.com/api/chat/slot/available/?customer_id="+t.customer_id+"&chat_widget_id="+t.chat_widget_id+"&callback=userlike."+e,function(){})};Slot.prototype.checkAvailableChatbutler=function(e,t){var i,r;this.repairCallback(t);i=a("config");r=a("session");return s.loadScript("https://api.userlike.com/api/chat/slot/available/chatbutler/?customer_id="+i.customer_id+"&chat_widget_id="+i.chat_widget_id+"&notify="+(e?"1":"0")+"&client_name="+encodeURIComponent(r.get("client_name"))+"&topic="+encodeURIComponent(r.get("chatbutler_topic"))+"&callback=userlike."+t,function(){})};Slot.prototype.checkProactive=function(e){var t,i,r,n,o;this.repairCallback(e);t=a("config");i=a("session").getOperatorBinding(t.operator_group_id);o=((r=a("userlike")._router)!=null?r.mode_proactive:void 0)||((n=a("userlike")._router)!=null?n.mode_proactive_registration:void 0)?1:0;if(i){return s.loadScript("https://api.userlike.com/api/chat/slot/proactive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_id="+i)+("&operator_group_id="+t.operator_group_id+"&router_proactive="+o)+("&callback=userlike."+e),function(){})}else{return s.loadScript("https://api.userlike.com/api/chat/slot/proactive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_group_id="+t.operator_group_id)+("&router_proactive="+o+"&callback=userlike."+e),function(){})}};Slot.prototype.checkPassiveConnect=function(e){var t,i,r;this.repairCallback(e);t=a("config");i=a("session").get("group_select_id");if(i){return s.loadScript("https://api.userlike.com/api/chat/slot/passive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_group_id="+i)+("&callback=userlike."+e),function(){})}else{r=a("session").getOperatorBinding(t.operator_group_id);if(r){return s.loadScript("https://api.userlike.com/api/chat/slot/passive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_id="+r)+("&operator_group_id="+t.operator_group_id+"&callback=userlike."+e),function(){})}else{return s.loadScript("https://api.userlike.com/api/chat/slot/passive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_group_id="+t.operator_group_id)+("&callback=userlike."+e),function(){})}}};Slot.prototype.checkSlotStats=function(t){var e,i;this.repairCallback(i);e=a("config");i="userlikeCallback"+ +new Date;window.userlike[i]=function(e){return t(e)};return s.loadScript("https://api.userlike.com/api/chat/slot/stats/?customer_id="+e.customer_id+("&chat_widget_id="+e.chat_widget_id+"&callback=userlike."+i),function(){})};Slot.prototype.checkSlotUser=function(){var e,t,i;e=a("config");i="https://api.userlike.com/api/chat/slot/user/?is_amd_loader="+a("is_amd_loader")+"&is_mobile="+a("is_mobile")+"&locale="+e.locale;t=document.createElement("img");t.setAttribute("src",i);t.setAttribute("width",1);t.setAttribute("height",1);t.style="width: 1px!important; height: 1px!important;";t.className="userlike-tracking-img";return document.body.appendChild(t)};Slot.prototype.checkOperatorStatus=function(t){var e;this.repairCallback(e);e="userlikeCallbackOperatorStatus";window.userlike[e]=function(e){return t(e)};return s.loadScript("https://api.userlike.com/api/chat/operator/status/?customer_id="+a("config").customer_id+("&callback=userlike."+e),function(){})};Slot.prototype.sendTranscript=function(t){var e;this.repairCallback(e);e="userlikeCallbackSendTranscript";window.userlike[e]=function(e){return t(e)};s.loadScript("https://api.userlike.com/api/client/message/chat_meta/email/?customer_id="+a("config").customer_id+("&chat_meta_id="+a("session").get("chat_meta_id"))+("&client_email="+encodeURIComponent(a("session").get("client_email")))+("&client_uuid="+encodeURIComponent(a("session").get("uuid"))+"&callback=userlike."+e),function(){});return s.loadScript("https://api.userlike.com/api/chat/slot/passive/?customer_id="+a("config").customer_id+"&chat_widget_id="+a("config").chat_widget_id+"&operator_group_id="+a("config").operator_group_id+"&callback=userlike."+e,function(){})};Slot.prototype.create=function(e){var t,i,r,n;t=a("config");n=a("session");o("Slot::create data=",JSON.stringify(e));if(e.group_select_id){i="create";r={customer_id:t.customer_id,chat_widget_id:t.chat_widget_id,operator_group_id:e.group_select_id,info:n.packet(),proactive:false}}else if(e.operator_id){i="direct";r={customer_id:t.customer_id,chat_widget_id:t.chat_widget_id,operator_id:e.operator_id,operator_group_id:t.operator_group_id,info:n.packet(),proactive:false}}else{i="create";r={customer_id:t.customer_id,chat_widget_id:t.chat_widget_id,operator_id:n.getOperatorBinding(t.operator_group_id),operator_group_id:t.operator_group_id,info:n.packet(),proactive:e.proactive}}o("Slot::create event="+i+" packet=",JSON.stringify(r));return this.queue("emit",i,r,function(e){return a("fsm").event("slotCreated",e)})};Slot.prototype.restart=function(e){var t,i;i=a("session");t={id:i.get("id"),info:i.packet()};o("Slot::restart packet=",t);return this.queue("emit","restart",t,function(e){return a("fsm").event("slotRestarted",e)})};Slot.prototype["switch"]=function(e){var t,i;i=a("session");t={id:i.get("id"),info:i.packet()};return this.queue("emit","switch",t,function(e){return a("fsm").event("slotSwitched",e)})};Slot.prototype.playback=function(){return this.queue("emit","playback",null,function(e){return a("fsm").event("slotPlayback",e)})};Slot.prototype.urlinfo=function(e,t){return this.queue("emit","urlinfo",e,function(e){return t(e)})};Slot.prototype.wakeup=function(){var e,t;t=a("session");e={id:t.get("id"),info:t.packet()};return this.queue("emit","wakeup",e,function(e){return a("fsm").event("wakeupDone",e)})};Slot.prototype.disconnect=function(){var e;o("Slot::disconnect");clearInterval(this.queue_timer);if(this.socket){try{this.socket.removeAllListeners("disconnect");this.socket.removeAllListeners("connect");this.socket.removeAllListeners("connecting");this.socket.removeAllListeners("reconnect");this.socket.removeAllListeners("reconnecting");this.socket.disconnect()}catch(t){e=t;o("Slot::disconnect raised an exception ",e)}return delete this.socket}};Slot.prototype.queue=function(e,t,i,r){return this.requests.push([e,t,i,r])};Slot.prototype.emit=function(e,t,i){return this.socket.emit(e,t,i)};Slot.prototype.connect=function(){var e;try{this.socket=window.userlike.userlikeIO.connect("https://chat.userlike.com:443",{reconnectionDelay:1e3,reconnectionAttempts:Infinity,reconnectionDelayMax:6e4,timeout:2e4,path:"/chat"})}catch(t){e=t;o("Slot::connect raised an exception ",e);a("fsm").signal("error");return}this.queue_timer=setInterval(function(t){return function(){var e;if(t.requests.length){e=t.requests.shift();return t[e[0]](e[1],e[2],e[3])}}}(this),100);this.socket.on("error",function(){return a("fsm").signal("error")});this.socket.on("connect",function(){return a("fsm").signal("connect")});this.socket.on("connecting",function(e){return a("fsm").signal("connecting",e)});this.socket.on("connect_failed",function(){return a("fsm").signal("connectFailed")});this.socket.on("disconnect",function(){return a("fsm").signal("disconnect")});this.socket.on("reconnect",function(){return a("fsm").signal("reconnect")});this.socket.on("reconnecting",function(e,t){return a("fsm").signal("reconnecting",{delay:e,count:t})});this.socket.on("reconnect_failed",function(){return a("fsm").signal("reconnectFailed")});this.socket.on("chat_message",function(e){return a("fsm").event("receiveMessage",e)});this.socket.on("composing",function(e){return a("fsm").event("receiveComposing",e)});this.socket.on("paused",function(e){return a("fsm").event("receivePaused",e)});this.socket.on("block",function(){return a("fsm").signal("receiveBlock")});this.socket.on("replace",function(e){return a("fsm").event("receiveReplaceText",e)});this.socket.on("name",function(e){return a("fsm").event("receiveName",e)});this.socket.on("email",function(e){return a("fsm").event("receiveEmail",e)});this.socket.on("locale",function(e){return a("fsm").event("receiveLocale",e)});this.socket.on("additional",function(e){return a("fsm").event("receiveAdditional",e)});this.socket.on("offline",function(e){return a("fsm").signal("receiveOffline")});this.socket.on("inactive",function(e){return a("fsm").event("receiveInactive")});this.socket.on("operator_disconnect",function(e){return a("fsm").signal("receiveOperatorDisconnect")});this.socket.on("operator_reconnect",function(e){return a("fsm").signal("receiveOperatorReconnect")});this.socket.on("quit",function(e,t){t();return a("fsm").signal("receiveQuit")});this.socket.on("switch",function(){return a("fsm").signal("receiveSwitch")});this.socket.on("screenshot",function(e,t){return a("fsm").signal("receiveScreenshot",t)});this.socket.on("slot",function(e){return a("fsm").signal("receiveSlot",e)});this.socket.on("forward",function(e){return a("fsm").signal("receiveForward",e)});this.socket.on("push",function(e,t){e.callback=t;return a("fsm").event("receivePush",e)});this.socket.on("download",function(e){return a("fsm").event("receiveDownload",e)});this.socket.on("image",function(e){return a("fsm").event("receiveImage",e)});this.socket.on("video",function(e){return a("fsm").event("receiveVideo",e)});this.socket.on("chips",function(e){return a("fsm").event("receiveChips",e)});this.socket.on("links",function(e){return a("fsm").event("receiveLinks",e)});return this.socket.on("hibernate",function(){return a("fsm").signal("receiveHibernate")})};return Slot}();return i.exports.Slot=e})()},{"./global.coffee":13,"./utils/loader.coffee":32}],26:[function(t,i,e){(function(){var e,n,o,s;s=t("./global.coffee").get;o=t("./global.coffee")._ullog;n=t("./utils/jq.coffee")._jq;e=function(){function Survey(){}Survey.prototype.send=function(e,t){var i,r;r="//api.userlike.com/api/client/survey/";o("Survey::send "+r);i={operator_id:s("session").get("operator_id"),customer_id:s("config").customer_id,chat_meta_id:s("session").get("chat_meta_id"),option:e,index:t};return n.ajaxJsonp({url:r,data:i,error:function(e){return o("Survey::sendError "+e)},success:function(e){return o("Survey::sendSuccess "+e)}})};return Survey}();return i.exports.Survey=e})()},{"./global.coffee":13,"./utils/jq.coffee":31}],27:[function(f,h,e){var d=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var t,e,i,r,n,o,s,a,u,l,c,p;l=f("./global.coffee")._ullog;c=f("./global.coffee").get;p=function(){return f("./global.coffee").get("CONTEXT")};i=function(){function TrackingFactory(e){this.widget=e}TrackingFactory.prototype.get=function(e){l("TrackingFactory type="+c("config").tracking);if(c("config").tracking==="ga"){return new o(e)}else if(c("config").tracking==="matomo"){return new a(e)}else if(c("config").tracking==="kissmetr"){return new s(e)}else if(c("config").tracking==="mixpanel"){return new u(e)}else{return new t}};return TrackingFactory}();t=function(){function TrackingDummy(){}TrackingDummy.prototype.sendOfflineMessage=function(){};TrackingDummy.prototype.offerProactiveChat=function(){};TrackingDummy.prototype.sendMessage=function(){};TrackingDummy.prototype.receiveMessage=function(){};TrackingDummy.prototype.startSlot=function(){};TrackingDummy.prototype.startProactiveSlot=function(){};return TrackingDummy}();o=function(e){d(TrackingGoogleComposite,e);function TrackingGoogleComposite(e){this.trackers=[new r(e),new n(e)]}TrackingGoogleComposite.prototype._executeTrackingFunction=function(e){var t,i,r,n,o,s;try{n=this.trackers;o=[];for(i=0,r=n.length;i<r;i++){s=n[i];o.push(s[e]())}return o}catch(a){t=a;return l("TrackingGoogleComposite::_executeTrackingFunction: exception=",t)}};TrackingGoogleComposite.prototype.sendOfflineMessage=function(){return this._executeTrackingFunction("sendOfflineMessage")};TrackingGoogleComposite.prototype.offerProactiveChat=function(){return this._executeTrackingFunction("offerProactiveChat")};TrackingGoogleComposite.prototype.sendMessage=function(){return this._executeTrackingFunction("sendMessage")};TrackingGoogleComposite.prototype.receiveMessage=function(){return this._executeTrackingFunction("receiveMessage")};TrackingGoogleComposite.prototype.startSlot=function(){return this._executeTrackingFunction("startSlot")};TrackingGoogleComposite.prototype.startProactiveSlot=function(){return this._executeTrackingFunction("startProactiveSlot")};return TrackingGoogleComposite}(t);r=function(e){d(TrackingGA,e);function TrackingGA(){return TrackingGA.__super__.constructor.apply(this,arguments)}TrackingGA.prototype.sendOfflineMessage=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Offline_message_sent",""]):void 0};TrackingGA.prototype.offerProactiveChat=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Proactive_chat_offered_to_webuser","Operator_"+c("session").get("operator_display_name"),void 0,true]):void 0};TrackingGA.prototype.sendMessage=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Webuser_sent_message","Operator_"+c("session").get("operator_display_name")]):void 0};TrackingGA.prototype.receiveMessage=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Webuser_received_message","Operator_"+c("session").get("operator_display_name"),void 0,true]):void 0};TrackingGA.prototype.startSlot=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Chat_session_started","Operator_"+c("session").get("operator_display_name")]):void 0};TrackingGA.prototype.startProactiveSlot=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Proactive_chat_session_started","Operator_"+c("session").get("operator_display_name")]):void 0};return TrackingGA}(t);n=function(e){d(TrackingGAUniversal,e);function TrackingGAUniversal(){return TrackingGAUniversal.__super__.constructor.apply(this,arguments)}TrackingGAUniversal.prototype.sendOfflineMessage=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Offline_message_sent",""):void 0:void 0};TrackingGAUniversal.prototype.offerProactiveChat=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Proactive_chat_offered_to_webuser","Operator_"+c("session").get("operator_display_name"),{nonInteraction:true}):void 0:void 0};TrackingGAUniversal.prototype.sendMessage=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Webuser_sent_message","Operator_"+c("session").get("operator_display_name")):void 0:void 0};TrackingGAUniversal.prototype.receiveMessage=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Webuser_received_message","Operator_"+c("session").get("operator_display_name"),{nonInteraction:true}):void 0:void 0};TrackingGAUniversal.prototype.startSlot=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Chat_session_started","Operator_"+c("session").get("operator_display_name")):void 0:void 0};TrackingGAUniversal.prototype.startProactiveSlot=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Proactive_chat_session_started","Operator_"+c("session").get("operator_display_name")):void 0:void 0};return TrackingGAUniversal}(t);a=function(e){d(TrackingMatomo,e);function TrackingMatomo(){return TrackingMatomo.__super__.constructor.apply(this,arguments)}TrackingMatomo.prototype.sendOfflineMessage=function(){if(typeof _paq!=="undefined"&&_paq!==null){_paq.push(["setCustomVariable",1,"Offline_message_sent",""])}return typeof _paq!=="undefined"&&_paq!==null?_paq.push(["trackPageView"]):void 0};TrackingMatomo.prototype.offerProactiveChat=function(){if(typeof _paq!=="undefined"&&_paq!==null){_paq.push(["setCustomVariable",2,"Proactive_chat_offered_to_webuser","Operator_"+c("session").get("operator_display_name")])}return typeof _paq!=="undefined"&&_paq!==null?_paq.push(["trackPageView"]):void 0};TrackingMatomo.prototype.startProactiveSlot=function(){if(typeof _paq!=="undefined"&&_paq!==null){_paq.push(["setCustomVariable",3,"Proactive_chat_session_started","Operator_"+c("session").get("operator_display_name")])}return typeof _paq!=="undefined"&&_paq!==null?_paq.push(["trackPageView"]):void 0};TrackingMatomo.prototype.startSlot=function(){if(typeof _paq!=="undefined"&&_paq!==null){_paq.push(["setCustomVariable",4,"Chat_session_started","Operator_"+c("session").get("operator_display_name")])}return typeof _paq!=="undefined"&&_paq!==null?_paq.push(["trackPageView"]):void 0};TrackingMatomo.prototype.sendMessage=function(){};TrackingMatomo.prototype.receiveMessage=function(){};return TrackingMatomo}(t);s=function(e){d(TrackingKissMetrics,e);function TrackingKissMetrics(){if(typeof _kmq!=="undefined"&&_kmq!==null){_kmq.push(["identify",c("session").get("uuid")])}}TrackingKissMetrics.prototype.sendOfflineMessage=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Offline_message_sent",operator:""}]):void 0};TrackingKissMetrics.prototype.offerProactiveChat=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Proactive_chat_offered_to_webuser",operator:c("session").get("operator_display_name")}]):void 0};TrackingKissMetrics.prototype.startProactiveSlot=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Proactive_chat_session_started",operator:c("session").get("operator_display_name")}]):void 0};TrackingKissMetrics.prototype.startSlot=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Chat_session_started",operator:c("session").get("operator_display_name")}]):void 0};TrackingKissMetrics.prototype.sendMessage=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Webuser_sent_message",operator:c("session").get("operator_display_name")}]):void 0};TrackingKissMetrics.prototype.receiveMessage=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Webuser_received_message",operator:c("session").get("operator_display_name")}]):void 0};return TrackingKissMetrics}(t);u=function(e){d(TrackingMixpanel,e);function TrackingMixpanel(){if(typeof mixpanel!=="undefined"&&mixpanel!==null){mixpanel.identify(c("session").get("uuid"))}}TrackingMixpanel.prototype.sendOfflineMessage=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Offline_message_sent",operator:""}):void 0};TrackingMixpanel.prototype.offerProactiveChat=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Proactive_chat_offered_to_webuser",operator:c("session").get("operator_display_name")}):void 0};TrackingMixpanel.prototype.startProactiveSlot=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Proactive_chat_session_started",operator:c("session").get("operator_display_name")}):void 0};TrackingMixpanel.prototype.startSlot=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Chat_session_started",operator:c("session").get("operator_display_name")}):void 0};TrackingMixpanel.prototype.sendMessage=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Webuser_sent_message",operator:c("session").get("operator_display_name")}):void 0};TrackingMixpanel.prototype.receiveMessage=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Webuser_received_message",operator:c("session").get("operator_display_name")}):void 0};return TrackingMixpanel}(t);e=function(){function TrackingEvent(){}TrackingEvent.prototype.events_chat={rating_show:true,rating_cancel:true,rating_submit:true,feedback_show:true,feedback_cancel:true,feedback_submit:true,post_survey_show:true,post_survey_cancel:true,post_survey_submit:true,facebook_like_show:true,facebook_like_cancel:true,twitter_tweet_show:true,twitter_tweet_tweeted:true,twitter_tweet_cancel:true,chat_connected:true,chat_connected_proactive:true,chat_started:true,chat_started_proactive:true,chat_quit:true,chat_window_minimzed:true,chat_window_maximized:true,chat_reconnect:true,message_operator_terminating:true,message_client_terminating:true,message_client_terminating_first:true,proactive_offer:true,proactive_reject:true};TrackingEvent.prototype.events={chat_passive_connect:true,register_show:true,register_cancel:true,register_submit:true,group_select_show:true,group_select_cancel:true,group_select_submit:true,pre_survey_show:true,pre_survey_cancel:true,pre_survey_submit:true,button_hidden:true,button_displayed:true,chat_requested:true,proactive_timer:true,proactive_unavailable:true,slot_check:true,slot_available:true,slot_unavailable:true,slot_connect:true,error_message:true,chatbutler:true,chatbutler_cancel:true,chatbutler_connect:true,chatbutler_offline_submit:true,offline_mode:true,offline_form_show:true,offline_view_show:true,offline_form_submit:true,facebook_login_timeout:true,facebook_login_status_response:true,facebook_login_success:true,facebook_login_failure:true,facebook_me_response:true,window_visible:true,window_invisible:true};TrackingEvent.prototype.globalCTX=function(){var e;e={widget_id:c("config").chat_widget_id,widget_lang:c("config").lang,operator_group_id:c("config").operator_group_id,client_uuid:c("session").get("uuid")};return e};TrackingEvent.prototype.sessionCTX=function(e){var t,i;i={client_name:c("session").get("client_name"),client_email:c("session").get("client_email"),session_id:c("session").get("id"),chat_id:void 0,custom_data:((t=window.userlikeData||c("data"))!=null?t.custom:void 0)!=null,duration:c("session").getChatDuration(),operator_id:void 0,operator_name:void 0};if(this.events_chat[e]!=null){i.operator_id=c("session").get("operator_id");i.operator_name=c("session").get("operator_display_name");i.chat_id=c("session").get("chat_meta_id")}return i};TrackingEvent.prototype.trigger=function(e){var t,i;i=window.userlikeTrackingEvent||p().userlikeTrackingEvent;if(!c("config").tracking_external){return}if(typeof i!=="function"){return}try{return i(e,this.globalCTX(),c("session").addAdditionalRegisterValues(this.sessionCTX(e)))}catch(r){t=r;return l("TrackingEvent::trigger exception=",t)}};return TrackingEvent}();return h.exports={TrackingFactory:i,TrackingDummy:t,TrackingGoogleComposite:o,TrackingGA:r,TrackingGAUniversal:n,TrackingMatomo:a,TrackingKissMetrics:s,TrackingMixpanel:u,TrackingEvent:e}})()},{"./global.coffee":13}],28:[function(e,t,i){var n={}.hasOwnProperty;(function(){return t.exports.Cookies=function(){var m,e;m=function(){var e,t,i,r;t=0;r={};while(t<arguments.length){e=arguments[t];for(i in e){if(!n.call(e,i))continue;r[i]=e[i]}t++}return r};e=function(h){var d;d=function(e,t,i){var r,n,o,s,a,u,l,c,p;p=void 0;if(arguments.length>1){i=m({path:"/"},d.defaults,i);if(typeof i.expires==="number"){s=new Date;s.setMilliseconds(s.getMilliseconds()+i.expires*864e5);i.expires=s}try{p=JSON.stringify(t);if(/^[\{\[]/.test(p)){t=p}}catch(f){o=f}if(!h.write){t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)}else{t=h.write(t,e)}e=encodeURIComponent(String(e));e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);e=e.replace(/[\(\)]/g,escape);return document.cookie=[e,"=",t,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}if(!e){p={}}n=document.cookie?document.cookie.split("; "):[];c=/(%[0-9A-Z]{2})+/g;a=0;while(a<n.length){l=n[a].split("=");u=l[0].replace(c,decodeURIComponent);r=l.slice(1).join("=");if(r.charAt(0)==='"'){r=r.slice(1,-1)}try{r=h.read?h.read(r,u):h(r,u)||r.replace(c,decodeURIComponent);if(this.json){try{r=JSON.parse(r)}catch(f){o=f}}if(e===u){p=r;break}if(!e){p[u]=r}}catch(f){o=f}a++}return p};d.get=d.set=d;d.getJSON=function(){return d.apply({json:true},[].slice.call(arguments))};d.defaults={};d.remove=function(e,t){d(e,"",m(t,{expires:-1}))};d.withConverter=e;return d};return e(function(){})}()})()},{}],29:[function(i,r,e){var h={}.hasOwnProperty;(function(){var e,t;e=i("../global.coffee").UL_EMOTICONS;t=function(){var c,p,f;t=void 0;c=void 0;p={};f=[];t=function(e,s){s=s||function(e,t,i,r){var n;t=(t+", "+i).replace(/"/g,"&quot;").replace(/</g,"&lt;");n=e.substr(0,e.indexOf(".png"));return'<div class="userlike-emoji userlike-emoji-'+n+'"></div>'};return e.replace(c,function(e,t,i){var r,n,o;o=0;n=i;r=p[i];if(!r){while(o<f.length&&!f[o].regexp.test(i)){o++}n=f[o].name;r=p[n]}if(r){return t+s(r[0],r[1],n,i)}else{return e}})};t.emoticons=function(){var e,t,i,r,n,o,s,a,u,l;t=Array.prototype.slice.call(arguments);r=typeof t[0]==="string"?t.shift():"";l=t[0];n=void 0;i=[];e=void 0;o=void 0;u=void 0;for(s=0,a=l.length;s<a;s++){n=l[s];p[n.code]=[r+n.image,n.name].concat(n.equivalents)}for(n in p){if(!h.call(p,n))continue;if(p[n].length>2){e=p[n].slice(2).concat(n);o=e.length;while(o--){e[o]=e[o].replace(/(\W)/g,"\\$1")}u=e.join("|");f.push({name:n,regexp:new RegExp("^"+u+"$")})}else{u=n.replace(/(\W)/g,"\\$1")}i.push(u)}c=new RegExp("(^|\\s)("+i.join("|")+")(?=(?:$|\\s))","g");return p};return t}();t.emoticons(e);return r.exports.emotify=t})()},{"../global.coffee":13}],30:[function(S,P,e){(function(r){var e,n,p,f,t,i,o,s,a,u,l,c,h,d,m,g,k,_,v,b,y,w,x,C;n=S("../global.coffee")._ullog;e={};i=null;d=null;m=document.title;a=null;t=null;g=window.devicePixelRatio||1;w=16*g;h={width:7,height:9,font:10*g+"px arial",colour:"#ffffff",background:"#F00",fallback:true,crossOrigin:true,abbreviate:true};x=function(){var t;t=navigator.userAgent.toLowerCase();return function(e){return t.indexOf(e)!==-1}}();f={ie:x("msie")||x("trident/7.0"),chrome:x("chrome"),webkit:x("chrome")||x("safari"),safari:x("safari")&&!x("chrome"),mozilla:x("mozilla")&&!x("chrome")&&!x("safari")};c=function(){var e,t,i,r,n,o;n=document.getElementsByTagName("link");t=0;i=n.length;e=false;while(t<i){r=n[t];o=r.getAttribute("rel")||"";if(o.match(/\bicon\b/)&&o.match(/\bshortcut\b/)){e=r}t++}if(e){return e}t=0;while(t<i){r=n[t];o=r.getAttribute("rel")||"";if(o.match(/\bicon\b/)){e=r}t++}return e};_=function(){var e,t,i,r,n,o;n=document.getElementsByTagName("link");t=document.getElementsByTagName("head")[0];i=0;r=n.length;o=[];while(i<r){e=typeof n[i]!=="undefined";if(e&&(n[i].getAttribute("rel")||"").match(/\bicon\b/)){t.removeChild(n[i])}o.push(i++)}return o};l=function(){var e;if(!d||!i){e=c();d=i=e?e.getAttribute("href"):"/favicon.ico"}return i};u=function(){if(!t){t=document.createElement("canvas");t.width=w;t.height=w}return t};y=function(e){var t;_();t=document.createElement("link");t.type="image/x-icon";t.rel="icon";t.href=e;return document.getElementsByTagName("head")[0].appendChild(t)};s=function(e,t){var i;if(!u().getContext||f.ie||f.safari){return C(e)}r=u().getContext("2d");t=t||"#000000";i=l();a=document.createElement("img");a.onload=function(){r.clearRect(0,0,w,w);r.drawImage(a,0,0,a.width,a.height,0,0,w,w);if((e+"").length>0){o(r,e,t)}return k()};if(!i.match(/^data/)&&h.crossOrigin){a.crossOrigin="anonymous"}return a.src=i};C=function(e){if(h.fallback){if((e+"").length>0){return document.title="("+e+") "+m}else{return document.title=m}}};o=function(e,t,i){var r,n,o,s,a,u,l,c;if(typeof t==="number"&&t>99&&h.abbreviate){t=p(t)}s=(t+"").length-1;c=h.width*g+6*g*s;n=h.height*g;l=w-n;o=w-c-g;r=16*g;u=16*g;a=2*g;e.font=(f.webkit?"bold ":"")+h.font;e.fillStyle=h.background;e.strokeStyle=h.background;e.lineWidth=g;e.beginPath();e.moveTo(o+a,l);e.quadraticCurveTo(o,l,o,l+a);e.lineTo(o,r-a);e.quadraticCurveTo(o,r,o+a,r);e.lineTo(u-a,r);e.quadraticCurveTo(u,r,u,r-a);e.lineTo(u,l+a);e.quadraticCurveTo(u,l,u-a,l);e.closePath();e.fill();e.beginPath();e.strokeStyle="rgba(0,0,0,0.3)";e.moveTo(o+a/2,r);e.lineTo(u-a/2,r);e.stroke();e.fillStyle=h.colour;e.textAlign="right";e.textBaseline="top";return e.fillText(t,g===2?29:15,f.mozilla?7*g:6*g)};k=function(){if(!u().getContext){return}return y(u().toDataURL())};p=function(e){var t,i;i=[["G",1e9],["M",1e6],["k",1e3]];t=0;while(t<i.length){if(e>=i[t][1]){e=v(e/i[t][1])+i[t][0];break}++t}return e};v=function(e,t){var i;i=new Number(e);return i.toFixed(t)};b=function(e,t){var i;e=e||"";try{s(e,t)}catch(r){i=r;n("Favicon::setBubble drawFavicon failed",i)}return this};return P.exports={setBubble:function(e,t){return b.call(this,e,t)}}})(this)},{"../global.coffee":13}],31:[function(e,n,t){var p={}.hasOwnProperty;(function(){var e,r,u,t,i;u=function(e,t){var i;if(t==null){t=window.document}if(typeof e==="string"){i=t.querySelectorAll(e);if(i.length===1){i=i[0]}if(i.length===0){i=null}return new r(i)}else if((e!=null?e.nodeType:void 0)!=null){return new r(e)}else{return e}};u.uaMatch=function(e){var t;e=e.toLowerCase();t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}};if(!u.browser){i=u.uaMatch(navigator.userAgent);t={};if(i.browser){t[i.browser]=true;t.version=i.version}if(t.chrome){t.webkit=true}else if(t.webkit){t.safari=true}u.browser=t}u.ajaxGet=function(e){var t;t=new XMLHttpRequest;t.open("GET",e.url,true);t.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){e.success(this.responseText)}else{e.error(this.responseText)}}};return t.send()};u.ajaxPost=function(e){var t;if(u.browser.msie&&parseInt(u.browser.version)<10){t=new XDomainRequest;t.open("POST",e.url,true);t.onload=function(){return e.success(this.responseText)}}else{t=new XMLHttpRequest;t.open("POST",e.url,true);t.setRequestHeader("Content-Type","application/json; charset=UTF-8")}t.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){e.success(this.responseText)}else{e.error(this.responseText)}}};t.onerror=function(){return e.error(t.responseText)};return t.send(e.data)};u.ajaxJsonp=function(t){e.init({error:t.error});return e.get(t.url,t.data,function(e){return t.success(e)})};u.windowOn=function(e,t){if(window.addEventListener!=null){return window.addEventListener(e,t)}else{return window.attachEvent("on"+e,function(){return t.call(window)})}};u.windowOff=function(e,t){if(window.removeEventListener!=null){return window.removeEventListener(e,t)}else{return window.detachEvent("on"+e,function(){return t.call(window)})}};u.windowSize=function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}};u.event=function(e){var t;t=e;if(t.preventDefault==null){t.preventDefault=function(){return e.returnValue=false}}if(t.stopPropagation==null){t.stopPropagation=function(){return e.returnValue=false}}if(t.target==null){t.target=window.event.target||window.event.srcElement}if(t.which==null){t.which=e.keyCode}return t};u.extend=function(e){var t,i,r;e=e||{};t=1;while(t<arguments.length){if(!arguments[t]){t++;continue}r=arguments[t];for(i in r){if(!p.call(r,i))continue;if(arguments[t].hasOwnProperty(i)){e[i]=arguments[t][i]}}t++}return e};r=function(){function UserlikeJqObj(e){this.el=e}UserlikeJqObj.prototype.get=function(e){if(this.el==null){return this}if(!e){return this.el}return this.el[e]};UserlikeJqObj.prototype.find=function(e){if(this.el==null){return this}return u(e,this.el)};UserlikeJqObj.prototype.contains=function(e){if(this.el==null){return false}e=u(e);return this.el.contains(e.el)};UserlikeJqObj.prototype._getStyle=function(e){if(getComputedStyle!=="undefined"){return getComputedStyle(this.el,null).getPropertyValue(e)}else{return this.el.currentStyle[e]}};UserlikeJqObj.prototype._toJSAttribute=function(e){var t;t=e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});return t};UserlikeJqObj.prototype._addPxSuffix=function(e){if(typeof e!=="string"){e+="px"}return e};UserlikeJqObj.prototype.each=function(e){var t,i,r,n,o,s,a;if(this.el!=null&&!this.el.length){return e.call(this,0,this)}if(!((o=this.el)!=null?o.length:void 0)){return this}s=this.el;a=[];for(i=r=0,n=s.length;r<n;i=++r){t=s[i];a.push(e.call(this,i,u(t)))}return a};UserlikeJqObj.prototype.width=function(e){var t;if(this.el==null){return this}if(e){return this.css("width",e)}else{}t=this._getStyle("width");t.replace("px","");return parseInt(t,10)};UserlikeJqObj.prototype.outerWidth=function(){if(this.el==null){return this}return this.el.offsetWidth};UserlikeJqObj.prototype.height=function(e){var t;if(this.el==null){return this}if(e){return this.css("height",e)}else{t=this._getStyle("height");t.replace("px","");return parseInt(t,10)}};UserlikeJqObj.prototype.outerHeight=function(){if(this.el==null){return this}return this.el.offsetHeight};UserlikeJqObj.prototype.attr=function(i,r){if(this.el==null){return this}if(this.el.length){this.each(function(e,t){return t.attr(i,r)});return this}if(r==null){return this.el.getAttribute(i)}else{this.el.setAttribute(i,r)}return this};UserlikeJqObj.prototype.removeAttr=function(e){if(this.el==null){return this}if(this.el!=null){this.el.removeAttribute(e)}return this};UserlikeJqObj.prototype.css=function(i,r){var e,t;if(this.el==null){return this}if(this.el.length){this.each(function(e,t){return t.css(i,r)});return this}if(i==null){return window.getComputedStyle(this.el)}if(typeof i==="string"){if(r!=null){this.unimportize();this.el.style[this._toJSAttribute(i)]=this._addPxSuffix(r)}else{return window.getComputedStyle(this.el)[this._toJSAttribute(i)]}}if(typeof i==="object"){for(e in i){if(!p.call(i,e))continue;t=i[e];try{this.unimportize();this.el.style[this._toJSAttribute(e)]=this._addPxSuffix(t)}catch(n){}}}return this};UserlikeJqObj.prototype.offset=function(){var e;if(this.el==null){return this}e=this.el.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}};UserlikeJqObj.prototype.position=function(){if(this.el==null){return this}return{left:this.el.offsetLeft,top:this.el.offsetTop}};UserlikeJqObj.prototype.removeClass=function(i){if(this.el==null){return this}if(this.el.length){this.each(function(e,t){return t.removeClass(i)});return this}if(this.el.classList){this.el.classList.remove(i)}else{this.el.className=this.el.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")}return this};UserlikeJqObj.prototype.addClass=function(i){if(this.el==null){return this}if(this.el.length){this.each(function(e,t){return t.addClass(i)});return this}if(this.el.classList){this.el.classList.add(i)}else{this.el.className+=" "+i}return this};UserlikeJqObj.prototype.hasClass=function(e){if(this.el==null){return this}if(this.el.classList){return this.el.classList.contains(e)}else{return new RegExp("(^| )"+e+"( |$)","gi").test(this.el.className)}};UserlikeJqObj.prototype.hasFocus=function(){if(this.el==null){return this}if(this.el.matches!=null){return this.el.matches(":focus")}else{return document.activeElement===this.el}};UserlikeJqObj.prototype.nodeName=function(){if(this.el==null){return this}return this.el.nodeName.toLowerCase()};UserlikeJqObj.prototype.unimportize=function(){var e,t;if(t=this.el.getAttribute("style")){e=RegExp(/! ?important/g);this.el.setAttribute("style",t.replace(e,""))}return this};UserlikeJqObj.prototype.importize=function(){var e,t;if(t=this.el.getAttribute("style")){this.unimportize();e=RegExp(/;/g);this.el.setAttribute("style",t.replace(e,"!important;"))}return this};UserlikeJqObj.prototype.on=function(i,r){if(this.el==null){return this}if(this.el.length){this.each(function(e,t){return u(t).on(i,r)});return this}if(this.el.addEventListener){this.el.addEventListener(i,r)}else{this.el.attachEvent("on"+i,function(t){return function(e){return r.call(t.el,e)}}(this))}return this};UserlikeJqObj.prototype.off=function(i,r){var e,t,n,o;if(r==null){r=null}if(this.el==null){return this}if(this.el.length){this.each(function(e,t){return t.off(i,r)});return this}if(this.el.length){o=this.el;for(t=0,n=o.length;t<n;t++){e=o[t];new UserlikeJqObj(e).off(i)}return this}if(this.el.removeEventListener){this.el.removeEventListener(i,r)}else{this.el.detachEvent("on"+i,r)}return this};UserlikeJqObj.prototype.scrollTop=function(e){if(this.el==null){return this}if(e!=null){return this.el.scrollTop=e}else{return this.el.scrollTop}};UserlikeJqObj.prototype.val=function(e){if(this.el==null){return this}if(e==null){return this.el.value}else if(typeof e==="function"){this.el.value=e(this.el.value)}else{this.el.value=e}return this};UserlikeJqObj.prototype.html=function(e){if(this.el==null){return this}if(e==null){return this.el.innerHTML}else{this.el.innerHTML=e}return this};UserlikeJqObj.prototype.text=function(i){var e;if(this.el==null){return this}if(this.el.length){this.each(function(e,t){return u(t).text(i)});return this}e=this.el.textContent!=null?"textContent":"innerText";if(i==null){return this.el[e]}else{this.el[e]=i}return this};UserlikeJqObj.prototype.focus=function(e){if(this.el==null){return this}if(e==null){this.el.focus()}else{this.on("focus",e)}return this};UserlikeJqObj.prototype.blur=function(e){if(this.el==null){return this}this.on("blur",e);return this};UserlikeJqObj.prototype.parent=function(){if(this.el==null){return this}return u(this.el.parentNode)};UserlikeJqObj.prototype.first=function(){if(this.el==null||!this.el.length){return this}return u(this.el[0])};UserlikeJqObj.prototype.after=function(e){if(this.el==null){return this}this.el.insertAdjacentHTML("afterend",e.get().outerHTML);return this};UserlikeJqObj.prototype.append=function(e){if(this.el==null){return this}e=u(e);this.el.appendChild(e.get());return this};UserlikeJqObj.prototype.prepend=function(e){if(this.el==null){return this}e=u(e);this.el.insertBefore(e.get(),this.el.firstChild);return this};UserlikeJqObj.prototype.remove=function(){if(this.el==null){return this}if(this.el.length){this.each(function(e,t){return u(t).remove()});return this}if(this.el instanceof NodeList&&!this.el.length){return}else if(this.el.parentNode!=null){this.el.parentNode.removeChild(this.el)}return this};UserlikeJqObj.prototype.empty=function(){if(this.el==null){return this}while(this.el.firstChild){this.el.removeChild(this.el.firstChild)}return this};UserlikeJqObj.prototype.last=function(){if(this.el==null){return this}if(this.el.length){return u(this.el[this.el.length-1])}else{return this}};UserlikeJqObj.prototype.data=function(e,t){var i,r,n,o,s,a,u,l,c;if(typeof e==="object"){for(o in e){if(!p.call(e,o))continue;c=e[o];this.data(o,c)}return}if(this.el==null){return this}if(!this.el.dataset){if(e&&t){return this.attr("data-"+e,t)}else if(e){return this.attr("data-"+e)}else{a="data-";i={};l=this.el.attributes;for(n=0,s=l.length;n<s;n++){r=l[n];u=r.name.indexOf(a);if(u===0){i[r.name.substr(a.length)]=this.attr(r.name)}}return i}}else{if(e!=null){e=this._toJSAttribute(e)}if(e==null){return this.el.dataset}if(t==null){return this.el.dataset[e]}else{this.el.dataset[e]=t}}return this};UserlikeJqObj.prototype.size=function(){var e;if((e=this.el)!=null?e.length:void 0){return this.el.length}else if(this.el!=null){return 1}else{return 0}};UserlikeJqObj.prototype.show=function(){if(this.el==null){return this}this.el.style.display="";return this};UserlikeJqObj.prototype.hide=function(e){var t;if(this.el==null){return this}if((t=this.el.style)!=null){t.display="none"}return this};UserlikeJqObj.prototype.fadeIn=function(t){var i,r,n;if(this.el==null){return this}r=1;this.el.style.display="";if(t.complete!=null){t.complete()}return;r=0;this.el.style.display="block";this.el.style.opacity=0;this.el.style.filter="";i=+new Date;n=function(e){return function(){r+=(new Date-i)/400;e.el.style.opacity=r;e.el.style.filter="alpha(opacity="+100*r|0+")";i=+new Date;if(r<1){window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16)}else{if((t!=null?t.complete:void 0)!=null){t.complete()}}}}(this);n();return this};UserlikeJqObj.prototype.fadeOut=function(e,t){var i,r,n;if(this.el==null){return this}r=0;this.el.style.display="none";if(t!=null){t()}return this;r=1;this.el.style.opacity=r;this.el.style.filter="";i=+new Date;n=function(e){return function(){r-=(new Date-i)/400;e.el.style.opacity=r;e.el.style.filter="alpha(opacity="+100*r|0+")";i=+new Date;if(r<1){window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16)}else{e.el.style.display="none";if(t!=null){t()}}}}(this);n();return this};return UserlikeJqObj}();!("getComputedStyle"in this)&&(this.getComputedStyle=function(){var t,i,u,l;u=function(e,t,i){var r,n,o,s;s=e.document&&e.currentStyle[t].match(/([\d\.]+)(%|cm|em|in|mm|pc|pt|)/)||[0,0,""];n=s[1];o=s[2];r=void 0;i=!i?i:/%|em/.test(o)&&e.parentElement?u(e.parentElement,"fontSize",null):16;r=t=="fontSize"?i:/width/i.test(t)?e.clientWidth:e.clientHeight;if(o=="%"){return n/100*r}else if(o=="cm"){return n*.3937*96}else if(o=="em"){return n*i}else if(o=="in"){return n*96}else if(o=="mm"){return n*.3937*96/10}else if(o=="pc"){return n*12*96/72}else if(o=="pt"){return n*96/72}else{return n}};l=function(e,t){var i,r,n,o,s;r=t=="border"?"Width":"";s=t+"Top"+r;o=t+"Right"+r;i=t+"Bottom"+r;n=t+"Left"+r;e[t]=(e[s]==e[o]&&e[s]==e[i]&&e[s]==e[n]?[e[s]]:e[s]==e[i]&&e[n]==e[o]?[e[s],e[o]]:e[n]==e[o]?[e[s],e[o],e[i]]:[e[s],e[o],e[i],e[n]]).join(" ")};t=function(e){var t,i,r,n,o,s;o=this;t=e.currentStyle;r=u(e,"fontSize");s=function(e){return"-"+e.toLowerCase()};n=void 0;for(n in t){n=n;Array.prototype.push.call(o,n=="styleFloat"?"float":n.replace(/[A-Z]/,s));if(n=="width"){o[n]=e.offsetWidth+"px"}else if(n=="height"){o[n]=e.offsetHeight+"px"}else if(n=="styleFloat"){o["float"]=t[n]}else if(/margin.|padding.|border.+W/.test(n)&&o[n]!="auto"){o[n]=Math.round(u(e,n,r))+"px"}else if(/^outline/.test(n)){try{o[n]=t[n]}catch(a){i=a;o.outlineColor=t.color;o.outlineStyle=o.outlineStyle||"none";o.outlineWidth=o.outlineWidth||"0px";o.outline=[o.outlineColor,o.outlineWidth,o.outlineStyle].join(" ")}}else{o[n]=t[n]}}l(o,"margin");l(o,"padding");l(o,"border");o.fontSize=Math.round(r)+"px"};t.prototype={constructor:t,getPropertyPriority:function(){throw new Error("NotSupportedError: DOM Exception 9")},getPropertyValue:function(e){return this[e.replace(/-\w/g,function(e){return e[1].toUpperCase()})]},item:function(e){return this[e]},removeProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},setProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},getPropertyCSSValue:function(){throw new Error("NotSupportedError: DOM Exception 9")}};i=function i(e){return new t(e)};return i}(this));e=function(){var a,u,l,o,e,c,t,p;u=0;o=void 0;p=this;a={};c=function(t,e){var i,r,n;n=document.createElement("script");i=false;n.src=t;n.async=true;r=e||a.error;if(typeof r=="function"){n.onerror=function(e){r({url:t,event:e})}}n.onload=n.onreadystatechange=function(){if(!i&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){i=true;n.onload=n.onreadystatechange=null;if(n&&n.parentNode){n.parentNode.removeChild(n)}}};if(!o){o=document.getElementsByTagName("head")[0]}o.appendChild(n)};l=function(e){return encodeURIComponent(e)};e=function(e,t,r,i){var n,o,s;o=(e||"").indexOf("?")==-1?"?":"&";n=void 0;i=i||a["callbackName"]||"callback";s=i+"_json"+ ++u;t=t||{};for(n in t){n=n;if(t.hasOwnProperty(n)){o+=l(n)+"="+l(t[n])+"&"}}p[s]=function(e){var t;r(e);try{delete p[s]}catch(i){t=i}p[s]=null};c(e+o+i+"="+s);return s};t=function(e){a=e};return{get:e,init:t}}();return n.exports._jq=u})()},{}],32:[function(o,s,e){var u={}.hasOwnProperty;(function(){var e,l,t,n,c,i,r,p;l=o("../global.coffee")._ullog;c=o("../global.coffee").get;t=o("../markup.coffee");n=o("./utils.coffee").ensureValidUrl;i=o("../global.coffee").isDebugEnabled;p=t.userlike_html;r=t.userlike_css;e=function(){function Loader(){}Loader.loadLib=function(e){var t;t={userlikelib:"https://dq4irj27fs462.cloudfront.net/javascripts/userlikelib-production-2014.min.js"};if(window.JSON==null){t.json="https://dq4irj27fs462.cloudfront.net/javascripts/json3-production-2014.min.js"}return Loader.loadScripts(t,function(){return e()})};Loader.loadPostRobot=function(t){var e;e={userlikelib:"https://dq4irj27fs462.cloudfront.net/javascripts/post-robot.ie-production-2014.min.js"};return Loader.loadScripts(e,function(){var e;e=i()?"debug":"error";if(typeof postRobot!=="undefined"&&postRobot!==null){postRobot.CONFIG.LOG_LEVEL=e}return t()})};Loader.loadScripts=function(e,t){var i,r,n,o,s,a;a=[];for(n in e){if(!u.call(e,n))continue;if(!(n in window)){a.push(e[n])}}i=a.length;if(i===0){t()}r=0;o=[];while(r<a.length){s=a[r];Loader.loadScript(s,function(){if(--i===0){return t()}});o.push(r++)}return o};Loader.loadScript=function(e,t){var i,r;r=n(e);l("loadScript: "+e+" -> "+r);i=document.createElement("script");i.setAttribute("charset","UTF-8");i.setAttribute("type","text/javascript");i.setAttribute("src",r);i.onload=i.onreadystatechange=function(){var e;e=i.readyState;if(!t.done&&(!e||/loaded|complete/.test(e))){t.done=true;return t()}};return document.getElementsByTagName("head")[0].appendChild(i)};Loader.loadFont=function(e){var t,i,r;try{window.WebFontConfig={google:{families:[e]}};r=document.createElement("script");r.src="https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";r.type="text/javascript";r.async="true";i=document.getElementsByTagName("script")[0];return i.parentNode.insertBefore(r,i)}catch(n){t=n;return l("Error loading font ",t)}};Loader.loadTheme=function(){var e;e=document.createElement("style");e.type="text/css";if(e.styleSheet){e.styleSheet.cssText=c("config").theme_css}else{e.appendChild(document.createTextNode(c("config").theme_css))}return document.getElementsByTagName("head")[0].appendChild(e)};Loader.loadCustomCss=function(){var e;e=document.createElement("style");e.type="text/css";if(e.styleSheet){e.styleSheet.cssText=c("config").custom_css}else{e.appendChild(document.createTextNode(c("config").custom_css))}return document.getElementsByTagName("head")[0].appendChild(e)};Loader.injectMarkup=function(e){var t,i,r,n,o,s,a,u;if(e==null){e=function(){}}t=document.createElement("div");t.className="userlike";t.innerHTML=p.replace(/{{POWEREDBY_LINK}}/g,c("config").poweredby_link).replace(/{{POWEREDBY_SLOGAN}}/g,c("config").poweredby_slogan);s=["body","frameset","head"];for(r=0,n=s.length;r<n;r++){o=s[r];i=document.getElementsByTagName(o);if(i[0]){i[0].appendChild(t);break}}a=100;u=function(){if((!document.getElementById("userlike")||!document.getElementById("userlike-offline-message-submit")||!document.getElementById("userlike-register-submit"))&&a--){l("Popup::inject wait");return window.setTimeout(u,300)}else{return e(!document.getElementById("userlike")&&!document.getElementById("userlike-offline-message-submit")&&!document.getElementById("userlike-register-submit"))}};return u()};return Loader}();return s.exports.Loader=e})()},{"../global.coffee":13,"../markup.coffee":16,"./utils.coffee":36}],33:[function(e,t,i){(function(){var e;e=function(){function MessageParser(){}MessageParser.words_yes={en_US:["yes","yeah","yep","sure","ya"],ar:[],cs_CZ:["ano"],da_DK:["ja"],nl_NL:["ja"],fi_FI:["kyllä","kylla"],fr_FR:["oui"],ks_KS:["jo","ja"],de_DE:["jo","ja"],id_ID:["ya"],is_IS:["já","ja"],it_IT:["sì","si"],ja_JP:["はい","hai"],ko_KR:["예","ye","네","ne","응","eung","어","eo"],no_NO:["ja"],es_ES:["no"],ru_RU:["да","da"],pl_PL:["tak"],pt_BR:["sim","o sim"],pt_PT:["sim","o sim"],sv_SE:["ja"],th_TH:["ใช่","chai","châi","ครับ","kráp","krap","ค่ะ","kâ","ka"],tr_TR:["evet"],zh_CN:["是","shì","shi"]};MessageParser.words_no={en_US:["no","nope","nah"],ar:[],cs_CZ:["ne"],da_DK:["nej"],nl_NL:["nee"],fi_FI:["ei"],fr_FR:["non"],ks_KS:["nä","enä","nein"],de_DE:["nein","nee","nö"],id_ID:["tidak"],is_IS:["nei"],it_IT:["no"],ja_JP:["いいえ","īe"],ko_KR:["아니요","aniyo","아니","ani"],no_NO:["nei"],es_ES:["si","sí"],ru_RU:["нет","net","nyet","не́ту"],pl_PL:["nie"],pt_BR:["não","nao"],pt_PT:["não","nao"],sv_SE:["nej"],th_TH:["ไม่ใช่","mai chai","mâi châi"],tr_TR:["hayır","hayir"],zh_CN:["没有","méi yŏu","mei you","不是的","bù shì de","bu shi de","不要","bù yào","bu yao"]};MessageParser.interpunction="!.,¡?¿:;…–-";MessageParser.setLocale=function(e){return this.locale=e};MessageParser.checkMatch=function(e,t){var i,r;i=t[this.locale];if(!i){i=t["en_US"]}r=new RegExp("^[s"+this.interpunction+"]*("+t[this.locale].join("|")+")[s"+this.interpunction+"]*$","i");return r.test(e)};MessageParser.checkYes=function(e){return this.checkMatch(e,this.words_yes)};MessageParser.checkNo=function(e){return this.checkMatch(e,this.words_no)};return MessageParser}();return t.exports.MessageParser=e})()},{}],34:[function(o,s,e){(function(){var t,i,e,r,n;n=o("../global.coffee").get;r=o("../global.coffee")._ullog;e=function(){function SoundFactory(){}SoundFactory.prototype.get=function(){var e;e=n("config");if(e.audio_message_received||e.audio_message_sent){return new t}else{return new i}};return SoundFactory}();i=function(){function SoundDummy(){}SoundDummy.prototype.play=function(){};SoundDummy.prototype.load=function(){};return SoundDummy}();t=function(){function Sound(){}Sound.prototype.load=function(){var e;this.audio={message_received:document.createElement("audio"),message_sent:document.createElement("audio")};try{this.audio.message_received.setAttribute("src","//dq4irj27fs462.cloudfront.net/sounds/message_received.mp3");return this.audio.message_sent.setAttribute("src","//dq4irj27fs462.cloudfront.net/sounds/message_sent.mp3")}catch(t){e=t;return r("Sound::load raised an exception ",e)}};Sound.prototype.play=function(e){var t;try{if(n("config")["audio_"+e]){return this.audio[e].play()}}catch(i){t=i;return r("Sound::play raised an exception ",t)}};return Sound}();return s.exports={SoundFactory:e,SoundDummy:i,Sound:t}})()},{"../global.coffee":13}],35:[function(e,t,i){(function(){var e;e=function(){function UrlParser(e,t){this.source=e;this.force_absolute=t!=null?t:false;if(this.isAbsolute()){this.addHttp()}this.loc=window.location;this.e=document.createElement("a");this.e.href=this.source}UrlParser.prototype.original=function(){return this.source};UrlParser.prototype.url=function(){var e;e=document.createElement("a");e.href=this.source;return e.href};UrlParser.prototype.url_inherit=function(){var e;e=document.createElement("a");e.href=this.source;e.protocol=this.loc.protocol;return e.href};UrlParser.prototype.url_http=function(){var e;e=document.createElement("a");e.href=this.source;e.protocol="http:";return e.href};UrlParser.prototype.url_https=function(){var e;e=document.createElement("a");e.href=this.source;e.protocol="https:";return e.href};UrlParser.prototype.isSame=function(){return this.loc.href===this.e.href};UrlParser.prototype.isInsecure=function(){return this.e.protocol==="http:"&&this.loc.protocol==="https:"};UrlParser.prototype.isOffsite=function(){return this.loc.hostname!==this.e.hostname&&this.e.hostname.length>0};UrlParser.prototype.isAbsolute=function(){var e;return this.force_absolute||((e=this.source.match(/(www\.|https?:\/\/)/))!=null?e.length:void 0)>0};UrlParser.prototype.addHttp=function(){if(!/^(?:f|ht)tps?\:\/\//.test(this.source)){return this.source="http://"+this.source}};return UrlParser}();return i.UrlParser=e})()},{}],36:[function(ie,re,e){var ne={}.hasOwnProperty;(function(){var i,u,s,e,t,r,n,o,a,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S,P,B,A,T,O,M,E,j,R,F,I,V,q,D,z,U,L,N,W,H,G,J,Q,K,Y,X,$,Z,ee,te;h=ie("../global.coffee").get;u=ie("./jq.coffee")._jq;s=ie("../global.coffee")._ullog;i=function(){function Base64(){}Base64.key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Base64.encode=function(e){var t,i,r,n,o,s,a,u,l;l="";t=void 0;i=void 0;r=void 0;n=void 0;o=void 0;s=void 0;a=void 0;u=0;e=Base64._utf8_encode(e);while(u<e.length){t=e.charCodeAt(u++);i=e.charCodeAt(u++);r=e.charCodeAt(u++);n=t>>2;o=(t&3)<<4|i>>4;s=(i&15)<<2|r>>6;a=r&63;if(isNaN(i)){s=a=64}else{if(isNaN(r)){a=64}}l=l+Base64.key.charAt(n)+Base64.key.charAt(o)+Base64.key.charAt(s)+Base64.key.charAt(a)}return l};Base64.decode=function(e){var t,i,r,n,o,s,a,u,l;l="";u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(u<e.length){n=Base64.key.indexOf(e.charAt(u++));o=Base64.key.indexOf(e.charAt(u++));s=Base64.key.indexOf(e.charAt(u++));a=Base64.key.indexOf(e.charAt(u++));t=n<<2|o>>4;i=(o&15)<<4|s>>2;r=(s&3)<<6|a;l=l+String.fromCharCode(t);if(s!==64){l=l+String.fromCharCode(i)}if(a!==64){l=l+String.fromCharCode(r)}}l=Base64._utf8_decode(l);return l};Base64._utf8_encode=function(e){var t,i,r;e=e.replace(/\r\n/g,"\n");r="";i=0;while(i<e.length){t=e.charCodeAt(i);if(t<128){r+=String.fromCharCode(t)}else if(t>127&&t<2048){r+=String.fromCharCode(t>>6|192);r+=String.fromCharCode(t&63|128)}else{r+=String.fromCharCode(t>>12|224);r+=String.fromCharCode(t>>6&63|128);r+=String.fromCharCode(t&63|128)}i++}return r};Base64._utf8_decode=function(e){var t,i,r,n,o,s;s="";o=0;t=i=r=0;while(o<e.length){t=e.charCodeAt(o);if(t<128){s+=String.fromCharCode(t);o++}else if(t>191&&t<224){r=e.charCodeAt(o+1);s+=String.fromCharCode((t&31)<<6|r&63);o+=2}else{r=e.charCodeAt(o+1);n=e.charCodeAt(o+2);s+=String.fromCharCode((t&15)<<12|(r&63)<<6|n&63);o+=3}}return s};return Base64}();w=function(e){var t,i,r;i=0;if(e.length===0){return i}r=0;while(r<e.length){t=e.charCodeAt(r);i=(i<<5)-i+t;i=i&i;r++}return i};ee=function(e){var t;t=i.decode(e);return JSON.parse(t)};n=function(e){if(e==null){e=""}if(typeof e!=="string"){e=e.toString()}return e.charAt(0).toUpperCase()+e.slice(1)};P=function(e,t,i){var r;r=e;if(t>0){r=e.substring(0,t)+i+e.substring(t,e.length)}else{r=i+e}return r};g=function(e){var t,i;t=0;i=0;if(!e){e=window.event}if(e.pageX||e.pageY){t=e.pageX;i=e.pageY}else if(e.clientX||e.clientY){t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop}return{x:t,y:i}};I=function(){var n,o;o=function(e){var t,i,r,n;r=void 0;n=void 0;i=void 0;t=u(e);r=t.offset();n=t.width();i=t.height();return[[r.left,r.left+n],[r.top,r.top+i]]};n=function(e,t){var i,r;i=void 0;r=void 0;i=e[0]<t[0]?e:t;r=e[0]<t[0]?t:e;return i[1]>r[0]||i[0]===r[0]};return function(e,t){var i,r;i=o(e);r=o(t);return n(i[0],r[0])&&n(i[1],r[1])}}();c=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};A=function(e){var t,i;try{i=e.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}catch(r){t=r;return true}};W=function(e){var t,i;try{t=/rgba\( *(\d+)[^,]*, *(\d+)[^,]*, *(\d+)[^,]*,.*\)/.exec(e);return"rgb("+t[1]+","+t[2]+","+t[3]+")"}catch(r){i=r;s("rgb: parse error",i);return"rgb(0,174,239)"}};J=function(e){var t,i;i=[];for(t in e){if(e.hasOwnProperty(t)&&e[t]){i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]))}}return i.join("&")};L=new RegExp("(?:\\s|^)"+"(?:(?:https?|ftps?)://)?"+"(?:"+"(?!(?:10|127)(?:\\.\\d{1,3}){3})"+"(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})"+"(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})"+"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])"+"(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}"+"(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))"+"|"+"(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)"+"(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+"(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))"+")"+"(?::\\d{2,5})?"+"(?:/\\S*)?"+"(?!\\S)","i");U=/(?:\s|^)(([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,})+)(?!\S)/gi;E=function(e){var t;t=new RegExp("^"+L.source);return t.test($(e))};T=function(){var e,t;if(navigator.appName==="Netscape"){e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");if(e.exec(navigator.userAgent)!==null){t=parseInt(parseFloat(RegExp.$1));return t===11}}return false};O=function(){return u.browser.msie&&parseInt(u.browser.version,10)<9};B=function(){return navigator.userAgent.toLowerCase().indexOf("android")>-1};M=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;S=M&&((D=/OS ((\d+_?){2,3})\s/.exec(navigator.userAgent))!=null?(z=D[1])!=null?z.replace("_","."):void 0:void 0);C=parseFloat(S,10);Y=C&&C>=11;b=function(){var e,t,i,r,n,o;r=navigator.userAgent.toLowerCase();n={msie:7,android:4.2,applewebkit:534.24};for(e in n){o=n[e];i=new RegExp(e+"(?:\\s|/)(\\d+(?:\\.\\d+)?)");t=i.exec(r);if((t!=null?t.length:void 0)>1&&parseFloat(t[1])<=o){s("hasIconFontSupport=false");return false}}s("hasIconFontSupport=true");return true};y=false;t="animation";j="";o="Webkit Moz O ms Khtml".split(" ");V="";a=document.createElement("div");if(a.style.animationName!==void 0){y=true}if(y===false){x=0;while(x<o.length){if(a.style[o[x]+"AnimationName"]!==void 0){V=o[x];t=V+"Animation";j="-"+V.toLowerCase()+"-";y=true;break}x++}}d=function(e){var t;t=u(e);if(t.val()===t.data("default")){return void 0}else{return t.val()}};e=function(e){var t,i,r,n,o,s;n=10;s=0;t=e;i=-1;o=t.parent().outerHeight();r=parseInt(t.css("font-size"));while(s<n){if(t.outerHeight()>o){r--;t.css({"font-size":r+"px"}).importize()}else if(t.outerHeight()<o){i=r;r++;t.css({"font-size":r+"px"}).importize()}else{s=n}s++}if(i>0){return t.css({"font-size":i-1+"px"}).importize()}};r=function(t,e){var i,r,n,o,s,a;if(e==null){e="#userlike"}if(t==null){t=h("config").theme}if(typeof e==="string"){e=u(e)}for(n in t){if(!ne.call(t,n))continue;a=t[n];s=n.replace(/_/g,"-");e.find(".userlike-theme-"+s+".userlike-theme-bg").css({"background-color":a});e.find(".userlike-theme-"+s+".userlike-theme-text").css({color:a});o=/(rgba)\(([0-9]+),\s{0,}([0-9]+),\s{0,}([0-9]+),\s{0,}([.0-9]+)\)/;if(typeof a==="string"){r=a.replace(o,"rgba($2,$3,$4,1.0)");i=a.replace(o,"rgba($2,$3,$4,0.0)");e.find(".userlike-theme-"+s+".userlike-theme-gradient").css({background:"-webkit-linear-gradient("+i+" 0%, "+r+" 100%)"})}}return e.find(".userlike-symbol-has-active-state").on("mouseenter",function(e){if(!u(this).hasClass("userlike-disabled")){return u(this).css({color:t.icon_active_color})}}).on("mouseleave",function(e){if(!u(this).hasClass("userlike-disabled")){return u(this).css({color:t.icon_default_color})}})};_=function(e){var t,i;i=new RegExp(/rgba?\(\s?(\d+)\s?,\s?(\d+)\s?,\s?(\d+)\s?(?:,\s?([0-9\.]+)\s?)?/i);t=i.exec(e);return Math.round((parseInt(t[1])*299+parseInt(t[2])*587+parseInt(t[3])*114)/1e3)};K=function(e,t){var i,r;r="userlike-symbol-fallback-";i=_(t);if(i>200&&i<240){return e.addClass(r+"black")}else if(i<80||i>=240){return e.addClass(r+"gray")}else{return e.addClass(r+"white")}};H=function(e){var t,i;t=void 0;i=void 0;e=e.replace(" ","");if(e.indexOf("rgba(")!==0){return e}t=/(.*?)rgba\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]+\.[0-9]+|\d)\s*\)/;i=t.exec(e);if(!i){return e}return"rgb("+i.splice(2,3).join(",")+")"};m=function(t){if(navigator.geolocation){s("getLocation request");return navigator.geolocation.getCurrentPosition(function(e){s("SessionStorage::getLocation response=",e);return t(e)})}else{return s("getLocation not supported")}};Q=function(e){if(e>0){u("#userlike-message-badge-count").text(e);return u("#userlike-message-badge").addClass("userlike-show")}else{return u("#userlike-message-badge").removeClass("userlike-show")}};te=function(e){var t,i;i="iframe_blacklist_"+w(e.url);t=e.status!=="200"||e.xframe;s("userlikeCallbackIframeCheck: url="+e.url+" status="+e.status+" xframe="+e.xframe+" blacklist="+t);return h("session").set(i,t)};k=function(){if(window.orientation!=null){if(window.orientation===0){return"portrait"}else{return"landscape"}}if(window.innerHeight>window.innerWidth){return"portrait"}else{return"landscape"}};F=function(t,i){var r,e;e=u.windowSize();r=e.width+e.height;return u.windowOn("resize",function(){var e;e=u.windowSize();if(e.width+e.height!==r){s("onKeyboardStateChange: showFunction");return t()}else{s("onKeyboardStateChange: hideFunction");return i()}})};$=function(e){if(e.trim!=null){return e.trim()}return e.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};Z=function(e){var t;if(typeof e==="string"){t=e.indexOf("px");return parseInt(e.substr(0,t),10)}return e};p=function(e){return(""+e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};X=function(e){return(""+e).replace(/(<([^>]+)>)/gi,"")};f=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};N=function(e){return(""+e).replace(/(?:\r\n|\r|\n)/g,"<br />")};q=function(){var e,t,i,r,n;i={};r=window.location.search.substring(1);n=r.split("&");x=0;while(x<n.length){t=n[x].split("=");e=t[0];if(e.indexOf("_uslk_")===0){i[e.replace("_uslk_","")]=decodeURIComponent(t[1])}x++}return i};v=function(){return G()+G()+"-"+G()+"-"+G()+"-"+G()+"-"+G()+G()+G()};G=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};R=function(e,t){var i,r,n;r=[];for(i in t){if(!ne.call(t,i))continue;n=t[i];if(typeof e[i]==="object"&&typeof n==="object"){r.push(R(e[i],n))}else{r.push(e[i]=n)}}return r};l=function(e){e=e.trim().replace(/\s/g,"");if(/^(:\/\/)/.test(e)){return"https"+e}if(/^(\/\/)/.test(e)){return"https:"+e}if(!/^(f|ht)tps?:\/\//i.test(e)){return"https://"+e}return e};return re.exports={Base64:i,hashCode:w,unpack:ee,capitalize:n,insertStringAtIndex:P,getMousePosition:g,overlapDiv:I,escapeRegExp:c,isElementInViewport:A,rgb:W,serialize:J,regex_url_full:L,regex_email:U,isURL:E,isIE11:T,isIE8:O,isIOS:M,shouldRenderIOSPreviewBubble:Y,isAndroid:B,hasIconFontSupport:b,has_css_animation_support:y,getInput:d,adjustFontSize:e,applyTheme:r,getRgbBrightness:_,setIconClassByColor:K,rgbaToRgb:H,getLocation:m,setBadge:Q,userlikeCallbackIframeCheck:te,getOrientation:k,onKeyboardStateChange:F,trim:$,trimPxSuffix:Z,escapeTag:p,stripTag:X,escapeUrl:f,replaceNewlines:N,queryString:q,guid:v,mergeObjects:R,ensureValidUrl:l}})()},{"../global.coffee":13,"./jq.coffee":31}],37:[function(e,t,i){(function(){var e;e=function(){function Validator(){}Validator.validateEmail=function(e){var t;if(!e||e.length>100){return false}t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,})+$/i;return t.test(e)};Validator.validateName=function(e){if(!e||e.length>100){return false}return true};Validator.validateAdditional=function(e){if(!e||e.length>100){return false}return true};return Validator}();return t.exports.Validator=e})()},{}],38:[function(y,w,e){var x=function(e,t){return function(){return e.apply(t,arguments)}},C=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,l,t,c,n,u,a,p,f,h,i,r,o,s,d,m,g,k,_,v,b;t=y("./view.coffee").View;l=y("../utils/urlparser.coffee").UrlParser;u=y("../utils/utils.coffee").applyTheme;s=y("../utils/utils.coffee").isURL;h=y("../utils/utils.coffee").getInput;i=y("../utils/utils.coffee").getOrientation;_=y("../utils/favicon.coffee").setBubble;o=y("../utils/utils.coffee").has_css_animation_support;f=y("../global.coffee").get;d=y("../global.coffee").isMobile();v=y("../utils/utils.coffee").shouldRenderIOSPreviewBubble;a=y("../utils/emotify.coffee").emotify;r=function(){return f("preview")};m=y("../utils/utils.coffee").onKeyboardStateChange;k=y("../utils/utils.coffee").rgb;c=y("../utils/jq.coffee")._jq;n=y("../global.coffee")._ullog;p=y("../utils/utils.coffee").escapeTag;g=y("../utils/utils.coffee").replaceNewlines;b=y("../utils/utils.coffee").trim;e=function(e){C(ChatView,e);ChatView.preview_connecting_timeout=null;ChatView.prototype.height=568;ChatView.prototype.is_minimizable=true;ChatView.prototype.update_timestamps_interval=null;ChatView.prototype.chat_state_message=null;ChatView.prototype.incoming_messages=0;function ChatView(e){this.onChipSelected=x(this.onChipSelected,this);this.scrollDownDelayed=x(this.scrollDownDelayed,this);this.onKeyboardShow=x(this.onKeyboardShow,this);this.destroyPreviewBubble=x(this.destroyPreviewBubble,this);this.removePreviewBubble=x(this.removePreviewBubble,this);this.renderPreviewBubble=x(this.renderPreviewBubble,this);this.onFocusOutMobile=x(this.onFocusOutMobile,this);this.onFocusInMobile=x(this.onFocusInMobile,this);ChatView.__super__.constructor.call(this,e)}ChatView.prototype.el=function(){return c("#userlike-chat")};ChatView.prototype.setupDomReferences=function(){this.$popup=c("#userlike-popup");this.$input=c("#userlike-chat-textarea");this.$content=c("#userlike-chat-content");return this.$};ChatView.prototype.scrollDown=function(e){var t;if(e==null){e=0}t=2e7;if(e){return setTimeout(function(e){return function(){return e.$content.scrollTop(t)}}(this),e)}else{return this.$content.scrollTop(t)}};ChatView.prototype._hasChangedPreviewText=function(e){var t,i,r;if(((t=userlike.preview)!=null?(i=t.last_config)!=null?i[e]:void 0:void 0)==null){return false}return((r=userlike.preview)!=null?r.last_config[e]:void 0)!==this.config[e]};ChatView.prototype.showPreview=function(){var e,t,i;if(!this.$popup){this.setupDomReferences()}this.setMomentLocale();this.reset();i=false;t=true;if(this._hasChangedPreviewText("connect_message")){this.showConnectView();t=false}else if(this._hasChangedPreviewText("quit_message")){this.setOperatorInfo(this.config.operator_display_name,true,this.config.quit_message);t=false}else if(this._hasChangedPreviewText("default_message")){this.sendWelcomeMessage(this.config.operator_display_name)}else if(this._hasChangedPreviewText("status_message")){i=true}else if(this._hasChangedPreviewText("inactivity_message")){this.sendInactivityMessage(this.config.operator_display_name)}else if(this._hasChangedPreviewText("forward_message")){this.sendForwardMessage(this.config.operator_display_name)}else if(this._hasChangedPreviewText("proactive_message")){this.sendProactiveMessage(this.config.operator_display_name)}else if(this._hasChangedPreviewText("feedback_download_link")){this.receiveDownload(null,"https://s3.eu-central-1.amazonaws.com/userlike-downloads/userlike-logo-800px-transparent.png","Userlike")}else{i=true}if(t){this.displaySlot(this.config.operator_display_name,this.config.operator_url_image,this.config.status_message)}if(i){this.sendWelcomeMessage(this.config.operator_display_name);this.addMessage("co","Hello, I have a Question");this.addMessage("ct","Hey, how can i help you?")}this.show();if((e=userlike.preview)!=null){e.last_config=this.config}return this};ChatView.prototype.reset=function(){if(this.$content!=null){return this.$content.html("")}};ChatView.prototype.show=function(t){var e;if(t==null){t=function(){}}this.setMomentLocale();if(!this.$popup){this.setupDomReferences()}if(this.update_timestamps_interval==null){this.startTimstampUpdate()}e=f("popup");e.clearInput("#userlike-chat-textarea",b(this.config.default_textarea));e.transition(this,function(e){return function(){e.scrollDown();return t()}}(this));if(d){m(this.onKeyboardShow,this.onKeyboardHide);this.$input.on("focusin",this.onFocusInMobile);this.$input.on("focusout",this.onFocusOutMobile);c(document).on("focusout",this.onKeyboardHide)}else{this.registerOperatorZoom()}c(document).on("webkitfullscreenchange",function(e){return function(){return e.scrollDown(1)}}(this));c(document).on("mozfullscreenchange",function(e){return function(){return e.scrollDown(1)}}(this));return c(document).on("fullscreenChange",function(e){return function(){return e.scrollDown(1)}}(this))};ChatView.prototype.onFocusInMobile=function(){var e,t;e="1px solid "+this.config.theme.symbol_active_color;this.$input.css({"border-top":e,"border-bottom":e});t=this.$input.get(0);if(t!=null){if(typeof t.scrollIntoViewIfNeeded==="function"){t.scrollIntoViewIfNeeded()}}if(v){this.renderPreviewBubble();return this.$input.on("input",this.renderPreviewBubble)}};ChatView.prototype.onFocusOutMobile=function(){this.$input.css("border","none");if(v){return this.destroyPreviewBubble()}};ChatView.prototype.renderPreviewBubble=function(){var e,t,i,r,n,o,s;s=h("#userlike-chat-textarea");o=s;s=s.replace(/\r/g,"");r=this.createMessageContainer("preview",s);this.removePreviewBubble();this.$content.prepend(r);i=r.position().top;t=i+r.height();e=this.$content.height()/2;n=t-e;return this.$content.scrollTop(n)};ChatView.prototype.removePreviewBubble=function(){var e;e=this.$content.find(".userlike-message-container-preview");return e.remove()};ChatView.prototype.destroyPreviewBubble=function(){this.removePreviewBubble();this.$input.off("input",this.renderPreviewBubble);return this.scrollDown()};ChatView.prototype.onKeyboardShow=function(){this.scrollDownDelayed();if(i()==="landscape"){return c("#userlike").addClass("userlike-chat-textarea-fullscreen")}else{return c("#userlike").removeClass("userlike-chat-textarea-fullscreen")}};ChatView.prototype.onKeyboardHide=function(){return c("#userlike").removeClass("userlike-chat-textarea-fullscreen")};ChatView.prototype.scrollDownDelayed=function(){return window.setTimeout(function(t){return function(){var e;t.scrollDown();if(d){e=t.$input.get(0);return e!=null?typeof e.scrollIntoViewIfNeeded==="function"?e.scrollIntoViewIfNeeded():void 0:void 0}}}(this),250)};ChatView.prototype.registerOperatorZoom=function(){var t,i,r;r=null;t=c("#userlike-subheader-operator-image-zoomed");i=function(e){clearTimeout(r);r=null;if(e){return t.addClass("userlike-zoom")}else{return t.removeClass("userlike-zoom")}};c("#userlike-subheader-operator-image-zoomed").on("click",function(){var e;e=!t.hasClass("userlike-zoom");return i(e)});c("#userlike-subheader-operator-image-zoomed").on("mouseenter",function(){if(r===null){return r=setTimeout(function(){return i(true)},500)}});return c("#userlike-subheader-operator-image-zoomed").on("mouseleave",function(){return i(false)})};ChatView.prototype.setMomentLocale=function(){userlike.moment.locale(this.config.locale.replace("_","-"));return this.updateTimestamps()};ChatView.prototype.startTimstampUpdate=function(){return this.update_timestamps_interval=window.setInterval(this.updateTimestamps,1e4)};ChatView.prototype.updateTimestamps=function(){var e;e=c(".userlike-message-timestamp");if(e.size()){return e.each(function(e,t){var i;i=t.data("timestamp");if(i!=null){return t.text(userlike.moment(parseInt(i,10)).fromNow())}})}};ChatView.prototype.stopTimstampUpdate=function(){return window.clearInterval(this.update_timestamps_interval)};ChatView.prototype.isEmptyMessage=function(e){if(e==null){return false}return e.charCodeAt(0)===10};ChatView.prototype.isValidMessage=function(e){var t,i;if(e==null){return false}t=e.length>0;i=e.length<=5e3;return t&&i};ChatView.prototype.sendMessage=function(){var e,t,i;i=h("#userlike-chat-textarea");if(this.isEmptyMessage(i)){c("#userlike-chat-textarea").val("");i=h("#userlike-chat-textarea")}if(!this.isValidMessage(i)){return}this.checkAndRequestURLInfo(i,"co");e=i;this.$input.val("");i=i.replace(/\r/g,"");this.addMessage("co",i);if(d){if((t=this.$input.get())!=null){if(typeof t.blur==="function"){t.blur()}}this.scrollDownDelayed()}return e};ChatView.prototype.onChipSelected=function(e){return f("fsm").event("chipSelected",e.currentTarget.getAttribute("data-message"))};ChatView.prototype.sendChipMessage=function(e){this.addMessage("co",e);return e};ChatView.prototype.sendWelcomeMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.default_message,t);i=this.replaceInfo(i);return this.addMessage("ct",i)};ChatView.prototype.sendProactiveMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.proactive_message,t);i=this.replaceInfo(i);return this.addMessage("ct",i)};ChatView.prototype.sendForwardMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.forward_message,t);i=this.replaceInfo(i);return this.addMessage("ct",i)};ChatView.prototype.sendQuitMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.quit_message,t);i=this.replaceInfo(i);return this.addMessage("ct",i)};ChatView.prototype.sendInactivityMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.quit_message,t);i=this.replaceInfo(i);return this.addMessage("ct",this.config.inactivity_message)};ChatView.prototype.sendChatbutlerMessage=function(e){var t;t=this.replaceName(f("config")["chatbutler_"+e],this.config.chatbutler_name);t=this.replaceInfo(t);this.addMessage("ct",t);return f("session").addMessageFromChatbutler(t)};ChatView.prototype.sendChatbutlerMessageDelayed=function(t,e,i){return setTimeout(function(e){return function(){e.sendChatbutlerMessage(t);return i()}}(this),e)};ChatView.prototype.setOperatorInfo=function(e,t,i){if(e&&i){return this.setInfoBar({text:this.replaceName(i,e),url:t})}};ChatView.prototype.showOperatorQuitInfo=function(){this.setOperatorInfo(f("session").get("operator_display_name"),true,f("config").quit_message);return this.removeChatState()};ChatView.prototype.setProactiveMessage=function(e){if(e!=null){return this.config.proactive_message=e}};ChatView.prototype.checkAndRequestURLInfo=function(e,i){var t;if(!e){return}if(s(e)){e=b(e).split("#")[0];t=new l(e,true);return f("fsm").event("requestUrlInfo",{url:t.url(),callback:function(t){return function(e){return t.addUrlInfo(e,i)}}(this)})}};ChatView.prototype.addUrlInfo=function(n,e){var t,i,r,o,s,a,u;if(n==null){return}s="";t="";if(n.title){s='<br><br><div class="userlike-url-info-title">'+n.title+"</div><br>"}if(n.description){t=n.description+"<br>"}r=this.replaceUrls(n.url);a=r+"\n"+s+"\n"+t+'\n<a style="color: '+k(this.config.theme.link_text_color)+'" href="'+n.url+'" target="_blank" rel="noopener">\n<img class="userlike-url-info-image "src="'+n.screenshot_url+'" alt="'+n.url+'">\n</a>';u=this.createMessageContainer(e,a);o=null;i=c(".userlike-message-container-"+e);i.each(function(e,t){var i,r;i=b(t.find(".userlike-chat-message-text").text());r=new l(i,true);if(r.url()===n.url){return t.html(u.html())}});this.scrollDown(2e3);return this.scrollDown(5e3)};ChatView.prototype.replaceName=function(e,t){var i;i=new RegExp("{{name}}","g");t=t||"";return e.replace(i,t)};ChatView.prototype.replaceInfo=function(e){var t,i,r,n,o,s;o=["client_name","client_email","loc_city","loc_country"];for(r=0,n=o.length;r<n;r++){i=o[r];t=new RegExp("{{"+i+"}}","g");s=f("session").get(i)||"";e=e.replace(t,s)}return e};ChatView.prototype.replaceText=function(e){var t,i;i=this.$content.find(".userlike-message-bubble-ct").get();if(i.length){if(this.chat_state_message!=null){t=c(i[i.length-2])}else{t=c(i[i.length-1])}}else if(i!=null){t=c(i)}return t!=null?t.find(".userlike-chat-message-text").text(t.text().replace(e[1],e[2])):void 0};ChatView.prototype.checkIframe=function(e){if(f("session").get("iframe_blacklist_"+hashCode(e))!==void 0){return}return Loader.loadScript("https://api.userlike.com/api/client/iframe/?url="+encodeURIComponent(e)+"&callback=userlikeCallbackIframeCheck",function(){})};ChatView.prototype.addMessage=function(e,t,i){var r;t=p(t);t=a(t.replace(/&gt;/g,">"));t=this.replaceLinks(t);t=g(t);this.addToContent(e,t,i);if(e==="co"||((r=userlike.preview)!=null?r.isActive():void 0)){this.incoming_messages=0}else{this.incoming_messages++}f("button").setBadge(this.incoming_messages);if(this.config.favicon_enabled){return _(this.incoming_messages)}};ChatView.prototype.resetIncomingMessages=function(){this.incoming_messages=0;f("button").setBadge(this.incoming_messages);if(this.config.favicon_enabled){return _(this.incoming_messages)}};ChatView.prototype.createMessageContainer=function(e,t,i){var r,n,o,s,a;n=c(document.createElement("div")).addClass("userlike-message-container").addClass("userlike-message-container-"+e);r=c(document.createElement("div")).addClass("userlike-message-bubble").addClass("userlike-message-bubble-"+e).addClass("userlike-theme-bg");o=c(document.createElement("span")).addClass("userlike-chat-message-text").addClass("userlike-theme-text").addClass("userlike-theme-chat-text-color-1").html(t);r.append(o);if(e==="co"||e==="preview"){r.addClass("userlike-theme-chat-bg-color-2")}else if(e==="ct"){r.addClass("userlike-theme-chat-bg-color-1")}if(i==null){i=+new Date}a=userlike.moment(i);s=c(document.createElement("div")).addClass("userlike-message-timestamp").addClass("userlike-message-timestamp-"+e).addClass("userlike-theme-text").addClass("userlike-theme-link-text-color").data("timestamp",+a).text(a.fromNow());n.append(r).append(s);u(this.config.theme,n);return n};ChatView.prototype.addToContent=function(e,t,i){var r,n;if(e==="ct"){this.removeChatState()}n=this.createMessageContainer(e,t,i);this.$content.append(n);r=this.$content.find(".userlike-message-container-preview").size();if(!r){this.scrollDown()}return n};ChatView.prototype.injectInContent=function(e){var t;if(e.type==="ct"){this.removeChatState()}t=this.createMessageContainer(e.type,e.body);t.addClass(e.css_class);this.$content.append(t);this.scrollDown();return t};ChatView.prototype.showChatState=function(e){var t;this.removeChatState();t=null;if(o){t='<div id="userlike-spinner">\n  <div id="userlike-bounce-1" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n  <div id="userlike-bounce-2" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n  <div id="userlike-bounce-3" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n</div>'}else{t='<img id="userlike-spinner" src="//dq4irj27fs462.cloudfront.net/images/spinner.gif"/>'}this.chat_state_message=this.addToContent("ct",t);return window.setTimeout(function(e){return function(){return e.removeChatState()}}(this),6e4)};ChatView.prototype.removeChatState=function(){if(this.chat_state_message!=null){this.chat_state_message.remove();return this.chat_state_message=null}};ChatView.prototype.showInfoMessage=function(e){this.removeChatState();this.addToContent("ct",e);return this.scrollDown()};ChatView.prototype.receiveDownload=function(e,t,i){return this.addToContent("ct",this.config.feedback_download_link+(' <a style="color: '+k(this.config.theme.link_text_color)+'" href="'+t+'" target="_blank" rel="noopener">'+i+"</a>"))};ChatView.prototype.receiveImage=function(e,t,i,r){var n,o,s;t=p(t);i=i!=null?p(i):t;if(r!=null){n=p(r);o='<a href="'+t+'" target="_blank" rel="noopener noreferrer"><img class="userlike-command-image" src="'+i+'" alt="'+n+'"/></a><br>'+g(n)}else{o='<a href="'+t+'" target="_blank" rel="noopener noreferrer"><img class="userlike-command-image" src="'+i+'"/></a>'}s=this.addToContent("ct",o);return s.find("img").el.onload=function(e){return function(){return e.scrollDown(1)}}(this)};ChatView.prototype.receiveVideo=function(e,t,i,r){var n,o,s;t=p(t);o=i!=null?' poster="'+p(i)+'"':"";n='<video controls class="userlike-command-video" width="100%" src="'+t+'"'+o+"></video>";if(r!=null){r=g(p(r));n=n+"<br>"+r}s=this.addToContent("ct",n);return s.find("video").el.onloadeddata=function(e){return function(){return e.scrollDown(1)}}(this)};ChatView.prototype.receiveChips=function(r,e){var n,t,i,o,s;s=function(r){return function(e){var t,i;i=p(e.title);i=a(i.replace(/&gt;/g,">"));i=r.replaceLinks(i);i=g(i);t=e.message!=null?p(e.message):i;return'<li class="userlike-command-chips-choice">\n   <button class="userlike-theme-bg\n                  userlike-theme-chat-bg-color-2"\n           data-message="'+t+'">\n     <span class="userlike-theme-text\n                  userlike-theme-chat-text-color-1">'+i+"</span>\n  </button>\n</li>"}}(this);i='<ul class="userlike-command-chips">'+function(){var e,t,i;i=[];for(e=0,t=r.length;e<t;e++){n=r[e];i.push(s(n))}return i}().join("")+"</ul>";if(e!=null){t=g(p(e));i=t+"<br><br>"+i}o=this.addToContent("ct",i);return o.find("button").on("click",function(t){return function(e){return t.onChipSelected(e)}}(this))};ChatView.prototype.receiveLinks=function(r){var e,t,n;e=function(){var e,t,i;i=[];for(e=0,t=r.length;e<t;e++){n=r[e];i.push(this.replaceLinkOffsite(n.target,n.title))}return i}.call(this);t=e.join("<br>");if(t){return this.addToContent("ct",t)}};ChatView.prototype.receiveMessage=function(e,t,i){this.checkAndRequestURLInfo(t,"ct");return this.addMessage("ct",t,i)};ChatView.prototype.stateComposing=function(e){return this.showChatState()};ChatView.prototype.statePaused=function(e){return this.removeChatState()};ChatView.prototype.showConnectView=function(t){if(t==null){t=function(){}}c("#userlike-subheader-operator-image-zoomed").hide();return this.show(function(e){return function(){e.setInfoBar({text:e.config.connect_message});e.scrollDown();return t()}}(this))};ChatView.prototype.displaySlot=function(e,t,i,r){if(r==null){r=function(){}}if(!this.$popup){this.setupDomReferences()}if(i){this.setOperatorInfo(e,t,i)}n("displaySlot name="+e+" status_text="+i+" url="+t);this.scrollDown();this.enable();return r()};ChatView.prototype.setInfoBar=function(e){if(e.text){c("#userlike-subheader-operator-info-text").text(e.text)}if(e.url){c(".userlike-operator-connect-spinner").hide();if(typeof e.url==="string"){c("#userlike-subheader-operator-image").attr("src",e.url);c("#userlike-subheader-operator-image-zoomed").attr("src",e.url);c("#userlike-subheader-operator-image-zoomed").show()}return c("#userlike-subheader-operator-image").show()}else{if(o){c("#userlike-subheader-operator-image").hide();return c(".userlike-operator-connect-spinner").show()}else{c("#userlike-subheader-operator-image").show();return c("#userlike-subheader-operator-image").attr("src","//dq4irj27fs462.cloudfront.net/images/spinner.gif")}}};ChatView.prototype.playbackSlot=function(e){var t,i,r,n;this.reset();n=[];for(i=0,r=e.length;i<r;i++){t=e[i];if(t.type==="co"){this.checkAndRequestURLInfo(t.body,"co");n.push(this.addMessage("co",t.body,t.sent_at))}else if(t.type==="ct"){this.checkAndRequestURLInfo(t.body,"ct");n.push(this.addMessage("ct",t.body,t.sent_at))}else if(t.type==="op"){n.push(this.displaySlot(f("session").get("operator_display_name"),t.url,f("config").status_message))}else if(t.type==="command"){if(t.command_type==="image"){n.push(this.receiveImage(t.from,t.data.url,t.data.thumbnail_url,t.data.title))}else if(t.command_type==="chips"){n.push(this.receiveChips(t.data.choices,t.data.title))}else if(t.command_type==="video"){n.push(this.receiveVideo(t.from,t.data.url,t.data.thumbnail_url,t.data.title))}else if(t.command_type==="links"){n.push(this.receiveLinks(t.data.links))}else{n.push(void 0)}}else{n.push(void 0)}}return n};ChatView.prototype.disable=function(){return c("#userlikeTextarea").attr("disabled","disabled")};ChatView.prototype.enable=function(){return c("#userlikeTextarea").removeAttr("disabled")};ChatView.prototype.destroy=function(){c("#userlike-subheader-operator-image-zoomed").hide();return this.stopTimstampUpdate()};return ChatView}(t);return w.exports.ChatView=e})()},{"../global.coffee":13,"../utils/emotify.coffee":29,"../utils/favicon.coffee":30,"../utils/jq.coffee":31,"../utils/urlparser.coffee":35,"../utils/utils.coffee":36,"./view.coffee":55}],39:[function(n,o,e){var s=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,i,r;t=n("./view.coffee").View;r=n("../global.coffee").get;i=n("../utils/jq.coffee")._jq;e=function(e){s(DisclaimerView,e);function DisclaimerView(){return DisclaimerView.__super__.constructor.apply(this,arguments)}DisclaimerView.prototype.el=function(){return i("#userlike-disclaimer")};DisclaimerView.prototype.setupEventHandlers=function(){return i("#userlike-disclaimer-submit").on("click",function(e){r("fsm").event("submitButton");i.event(e).preventDefault();return i.event(e).stopPropagation()})};DisclaimerView.prototype.show=function(e){this.setupEventHandlers();this.highlightText("#userlike-disclaimer-headline",this.config.disclaimer_headline);this.highlightText("#userlike-disclaimer-text",this.config.disclaimer_text);i("#userlike-disclaimer-headline").text(this.config.disclaimer_headline);i("#userlike-disclaimer-text").text(this.config.disclaimer_text);return r("popup").transition(this,e)};DisclaimerView.prototype.destroy=function(){return i("#userlike-disclaimer-submit").off("click")};return DisclaimerView}(t);return o.exports.DisclaimerView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],40:[function(r,n,e){var o=function(e,t){return function(){return e.apply(t,arguments)}},c=function(e,t){for(var i in t){if(s.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},s={}.hasOwnProperty;(function(){var e,s,t,a,i,u,l;t=r("./view.coffee").View;i=r("../utils/utils.coffee").applyTheme;u=r("../utils/utils.coffee").insertStringAtIndex;a=r("../utils/jq.coffee")._jq;l=r("../utils/utils.coffee").trim;s=r("../global.coffee").UL_EMOTICONS;e=function(e){c(EmojiPopoverView,e);EmojiPopoverView.prototype.el_id="userlike-emoji-button";EmojiPopoverView.prototype.is_visible=false;EmojiPopoverView.prototype.textarea_caret_postion=null;EmojiPopoverView.prototype.template='<span style="cursor:pointer" data-code="$$code">\n  <div title="$$name" class="userlike-emoji userlike-emoji-$$class_name"></div>\n</span>';function EmojiPopoverView(e){if(e==null){e={}}this.onDocumentClick=o(this.onDocumentClick,this);this.onEmojiClick=o(this.onEmojiClick,this);this.onPopupButtonClick=o(this.onPopupButtonClick,this);EmojiPopoverView.__super__.constructor.call(this,e);this.$el=a("#"+this.el_id);this.$el.on("click",this.onPopupButtonClick);this.$emoji_list=null}EmojiPopoverView.prototype.onPopupButtonClick=function(){if(this.is_visible){return this.hide()}else{return this.show()}};EmojiPopoverView.prototype.onEmojiClick=function(e){var o;e=a.event(e);o=a(e.target).parent().data("code");if(o==null){return}a("#userlike-chat-textarea").val(function(n){return function(e){var t,i,r;t=e.replace(l(n.config.default_textarea),"");i=" "+o+" ";r=u(t,n.textarea_caret_postion,i);n.textarea_caret_postion+=i.length;return r}}(this));return this.hide()};EmojiPopoverView.prototype.onDocumentClick=function(e){var t,i;e=a.event(e);i=a(e.target);t=a(".userlike-drag");if(!i.contains(this.$emoji_list)&&!i.contains(this.$el)&&!i.hasClass("userlike-drag")){return this.hide()}};EmojiPopoverView.prototype.show=function(){this.textarea_caret_postion=document.querySelector("#userlike-chat-textarea").selectionStart;if(this.$emoji_list!=null){a("#userlike-emoji-list").addClass("show")}else{this.compileTemplate();a("#userlike-chat-scroll-textarea").append(this.$emoji_list);i(null,"#userlike-chat-scroll-textarea");a("#userlike-emoji-list .userlike-emoji").on("click",this.onEmojiClick)}a(document).on("click",this.onDocumentClick);return this.is_visible=true};EmojiPopoverView.prototype.hide=function(){a("#userlike-emoji-list").removeClass("show");a("#userlike-chat-textarea").focus();document.querySelector("#userlike-chat-textarea").selectionStart=this.textarea_caret_postion;document.querySelector("#userlike-chat-textarea").selectionEnd=this.textarea_caret_postion;a(document).off("click",this.onDocumentClick);return this.is_visible=false};EmojiPopoverView.prototype.compileTemplate=function(){var e,t,i,r,n,o;i=document.createElement("div");i.id="userlike-emoji-list";i.className="show userlike-theme-bg userlike-theme-window-bg-color";o="";for(r=0,n=s.length;r<n;r++){t=s[r];e=t.image.substr(0,t.image.indexOf(".png"));o+=this.template.replace("$$code",t.code).replace("$$name",t.name).replace("$$class_name",e)}i.innerHTML=o;this.$emoji_list=a(i);return this.$emoji_list};return EmojiPopoverView}(t);return n.exports.EmojiPopoverView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],41:[function(i,r,e){var n=function(e,t){for(var i in t){if(o.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},o={}.hasOwnProperty;(function(){var e,t,c,p,f;t=i("./view.coffee").View;f=i("../global.coffee").isMobile();p=i("../global.coffee")._ullog;c=i("../utils/jq.coffee")._jq;e=function(e){n(FacebookView,e);function FacebookView(){return FacebookView.__super__.constructor.apply(this,arguments)}FacebookView.prototype.el=function(){return c("#userlike-facebook-like")};FacebookView.prototype.show=function(e){var r,t,i,n,o,s,a,u;c("#userlike-facebook-like-headline").text(this.config.facebook_like_headline);if(f){o="button"}else{o=this.config.facebook_like_layout}if(c("#userlike-facebook-like-button").size()===0){t='<div id="userlike-facebook-like-button" class="fb-like" ';t+='data-send="false" data-width="200" ';t+='data-show-faces="'+this.config.facebook_like_show_faces+'" ';t+='data-action="'+this.config.facebook_like_verb+'" ';if((a=this.config.facebook_like_href)!=null?a.length:void 0){t+='data-href="'+this.config.facebook_like_href+'" '}t+='data-layout="'+o+'">';c("#userlike-facebook-like-wrapper").html(t);p("Popup::showFacebookLikeView: b="+t);try{FB.XFBML.parse(c("#userlike").get());n=16;s=100;u=0;r=function(){var e,t,i;u++;t=c("#userlike-facebook-like-button > span").width();if(t>0){e=c("#userlike-facebook-like").width();i=c("#userlike-facebook-like-headline").width();if(e-i<t){return c(".userlike-facebook-like").addClass("userlike-break-facebook-line")}else{c("#userlike-facebook-like-headline").css("max-width","100%");return c("#userlike-facebook-like-headline").css("width",e-t-n).importize()}}else if(u<s){return window.setTimeout(r,100)}};r()}catch(l){i=l;p("showFacebookLikeView: err=",i)}}return this.el().show()};return FacebookView}(t);return r.exports.FacebookView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],42:[function(o,s,e){var a=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,i,r,n;t=o("./view.coffee").View;n=o("../utils/utils.coffee").getInput;r=o("../global.coffee").get;i=o("../utils/jq.coffee")._jq;e=function(e){a(FeedbackView,e);function FeedbackView(){return FeedbackView.__super__.constructor.apply(this,arguments)}FeedbackView.prototype.el=function(){return i("#userlike-feedback")};FeedbackView.prototype.setupEventHandlers=function(){i("#userlike-feedback-textarea").on("keyup",function(e){return function(){if(n("#userlike-feedback-textarea")){return e.enableSubmit()}}}(this));return i("#userlike-feedback-submit").on("click",function(e){if(!i("#userlike-feedback-submit").hasClass("userlike-disabed")){r("fsm").event("submitButton");i.event(e).preventDefault();return i.event(e).stopPropagation()}})};FeedbackView.prototype.show=function(e){this.el().show();this.setupEventHandlers();return r("popup").clearInput("#userlike-feedback-textarea",this.config.feedback_default_textarea,this.config.feedback_default_textarea)};FeedbackView.prototype.hasInputValue=function(){var e;e=i("#userlike-feedback-textarea");return e.val()!==e.data("default")&&e.val()!==""};FeedbackView.prototype.isValid=function(){return this.validateFeedback()};FeedbackView.prototype.validateFeedback=function(){var e;e=n("#userlike-feedback-textarea");if(!e){return false}if(e.length>1e4){i("#userlike-feedback-textarea").focus();return false}return true};FeedbackView.prototype.getFeedback=function(){return n("#userlike-feedback-textarea")};FeedbackView.prototype.enableSubmit=function(){return i("#userlike-feedback-submit").removeClass("userlike-disabled")};FeedbackView.prototype.destroy=function(){i("#userlike-feedback-submit").off("click");return i("#userlike-feedback-textarea").on("keyup")};return FeedbackView}(t);return s.exports.FeedbackView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],43:[function(r,u,e){var l=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var e,n,o,t,i,s,a;t=r("./view.coffee").View;o=r("./rating.coffee").RatingView;n=r("./feedback.coffee").FeedbackView;a=r("../global.coffee");s=r("../global.coffee").get;i=r("../utils/jq.coffee")._jq;e=function(e){l(FeedbackRatingCompositeView,e);function FeedbackRatingCompositeView(){return FeedbackRatingCompositeView.__super__.constructor.apply(this,arguments)}FeedbackRatingCompositeView.prototype.el=function(){return i("#userlike-feedback-rating-composite")};FeedbackRatingCompositeView.prototype.show=function(r){if(r==null){r=function(){}}return s("popup").transition(this,function(i){return function(){var e,t;a.set("rating_view",t=new o({config:i.config}));s("rating_view").show();a.set("feedback_view",e=new n({config:i.config}));s("feedback_view").show();return r()}}(this))};FeedbackRatingCompositeView.prototype.isValid=function(){return s("rating_view").isValid()||s("feedback_view").isValid()};return FeedbackRatingCompositeView}(t);return u.exports.FeedbackRatingCompositeView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./feedback.coffee":42,"./rating.coffee":49,"./view.coffee":55}],44:[function(r,n,e){var o=function(e,t){for(var i in t){if(s.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},s={}.hasOwnProperty;(function(){var e,t,s,i;t=r("./view.coffee").View;i=r("../global.coffee").get;s=r("../utils/jq.coffee")._jq;e=function(e){o(GroupSelectView,e);function GroupSelectView(){return GroupSelectView.__super__.constructor.apply(this,arguments)}GroupSelectView.prototype.el=function(){return s("#userlike-group-select")};GroupSelectView.prototype.show=function(o,e){var t;if(o==null){o=this.config.data}t=this.el();this.highlightText("#userlike-group-select-headline",this.config.group_select_headline);s("#userlike-group-select-headline").text(this.config.group_select_headline);t.find(".userlike-fieldset-wrapper>div").each(function(e,t){var i,r,n;i=s(t);if(e<o.available.length){r=o.available[e];i.find("input").removeAttr("checked");i.find(".userlike-label").text(r.name);if((n=r.first)!=null?n.url_image:void 0){i.find(".userlike-group-select-operator-image").attr("src",r.first.url_image);i.find("input").hide()}else{i.find(".userlike-group-select-operator-image").hide();i.find("input").show()}return i.show()}else{return i.hide()}});return i("popup").transition(this,e)};return GroupSelectView}(t);return n.exports.GroupSelectView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],45:[function(n,o,e){var s=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,i,r;t=n("./view.coffee").View;r=n("../global.coffee").get;i=n("../utils/jq.coffee")._jq;e=function(e){s(IdleView,e);function IdleView(){return IdleView.__super__.constructor.apply(this,arguments)}IdleView.prototype.height=216;IdleView.prototype.el=function(){return i("#userlike-idle")};IdleView.prototype.show=function(e){return r("popup").transition(this,e)};return IdleView}(t);return o.exports.IdleView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],46:[function(s,a,e){var u=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,r,n,i,o;t=s("./view.coffee").View;o=s("../global.coffee").get;r=s("../utils/jq.coffee")._jq;n=s("../global.coffee")._ullog;i=s("../utils/utils.coffee").escapeTag;e=function(e){u(MessageView,e);function MessageView(){return MessageView.__super__.constructor.apply(this,arguments)}MessageView.prototype.height=216;MessageView.prototype.el=function(){return r("#userlike-message")};MessageView.prototype.show=function(e,t,i){n("Popup::showMessageView "+e);this.highlightText("#userlike-message-headline",e);if(i){r("#userlike-message-headline").html(e)}else{r("#userlike-message-headline").text(e)}return o("popup").transition(this,t)};MessageView.prototype.showTransfer=function(e){o("popup").reset();return this.show(this.config.feedback_transfer,e)};MessageView.prototype.showExpiredWarning=function(e){o("popup").reset();return this.show(this.config.feedback_expired,e)};MessageView.prototype.showNoCookiesMessage=function(e){o("popup").reset();return this.show(this.config.feedback_no_cookies,e)};MessageView.prototype.showErrorMessage=function(e){o("popup").reset();return this.show(this.config.feedback_error,e)};MessageView.prototype.showOfflineMessageFeedback=function(e){var t;o("popup").reset();t=this.replaceLinks(i(this.config.feedback_offline));return this.show(t,e,true)};MessageView.prototype.destroy=function(){return r("#userlike-message-headline").text("")};return MessageView}(t);return a.exports.MessageView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],47:[function(r,h,e){var d=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var e,o,n,t,u,l,s,c,p,i,a,f;t=r("./view.coffee").View;n=r("../utils/validator.coffee").Validator;o=r("../screenshot.coffee").Screenshot;c=r("../global.coffee").get;a=r("../global.coffee").isMobile();l=r("../global.coffee")._ullog;u=r("../utils/jq.coffee")._jq;p=r("../utils/utils.coffee").getInput;f=r("../utils/utils.coffee").onKeyboardStateChange;i=r("../utils/utils.coffee").getOrientation;s=r("../utils/utils.coffee").escapeTag;e=function(e){d(OfflineMessageView,e);function OfflineMessageView(e){if(e==null){e={}}OfflineMessageView.__super__.constructor.call(this,e)}OfflineMessageView.prototype.height=568;OfflineMessageView.prototype.el=function(){return u("#userlike-offline-message")};OfflineMessageView.prototype.showOfflineMessageSent=function(e){var t;c("popup").reset();t=this.replaceLinks(s(this.config.offline_message_response));return c("message_view").show(t,e,true)};OfflineMessageView.prototype.setupEventHandlers=function(){return u("#userlike-offline-message-submit").on("click",function(e){c("fsm").event("submitButton");u.event(e).preventDefault();return u.event(e).stopPropagation()})};OfflineMessageView.prototype.showOfflineMessageForm=function(e){var t,i,r,n;n=c("session");i=c("popup");i.reset();this.highlightText("#userlike-screenshot-label",this.config.offline_message_send_screenshot);u("#userlike-screenshot-label").text(this.config.offline_message_send_screenshot);i.clearInput("#userlike-offline-email",this.config.offline_message_enter_email,n.get("client_email"));i.clearInput("#userlike-offline-name",this.config.offline_message_enter_name,n.get("client_name"));i.clearInput("#userlike-offline-textarea",this.config.offline_message_default_textarea,this.config.offline_message_default_textarea);this.setupEventHandlers();this.highlightText("#userlike-offline-message-headline",this.config.offline_message_header);t=this.replaceLinks(s(this.config.offline_message_body));this.highlightText("#userlike-offline-message-text",t);u("#userlike-offline-message-headline").text(this.config.offline_message_header);u("#userlike-offline-message-text").html(t);r=new o;if(this.config.screenshot_enabled&&!r.unsupported()){u("#userlike-screenshot-wrapper").show()}else{u("#userlike-screenshot-wrapper").hide()}i.transition(this,e);if(a){f(this.onKeyboardShow,this.onKeyboardHide);return u(document).on("focusout",this.onKeyboardHide)}};OfflineMessageView.prototype.onKeyboardShow=function(){if(i()==="landscape"){return u("#userlike").addClass("userlike-chat-textarea-fullscreen")}else{return u("#userlike").removeClass("userlike-chat-textarea-fullscreen")}};OfflineMessageView.prototype.onKeyboardHide=function(){return u("#userlike").removeClass("userlike-chat-textarea-fullscreen")};OfflineMessageView.prototype.setTextareaVal=function(e){var t,i;t=u("#userlike-offline-textarea");i=t.val().replace(this.config.offline_message_default_textarea,"");return t.val(i+e+"\n")};OfflineMessageView.prototype.appendTextareaVal=function(e){var t;t=u("#userlike-offline-textarea");return t.val(t.val()+e+"\n")};OfflineMessageView.prototype.validateOfflineMessage=function(){var e,t,i,r;e=p("#userlike-offline-email");i=p("#userlike-offline-name");t=p("#userlike-offline-textarea");if(!n.validateName(i)){u("#userlike-offline-name").focus();return false}if(!n.validateEmail(e)){u("#userlike-offline-email").focus();return false}if(!t){u("#userlike-offline-textarea").focus();return false}if(t.length>1e4){u("#userlike-offline-textarea").focus();return false}r=c("session");r.set("client_email",e);r.set("client_name",i);return true};OfflineMessageView.prototype.requestedScreenshot=function(){return u("#userlike-screenshot-checkbox").get().checked};OfflineMessageView.prototype.sendOfflineMessage=function(e){var t,i,r,n,o,s;n=e;if(n==null){n=p("#userlike-offline-textarea")}u("#userlike-offline-textarea").val("");r=c("session").packet();try{t=JSON.stringify(r.custom)}catch(a){i=a;t=void 0}s=c("session");o={chat_widget_id:this.config.chat_widget_id,customer_id:this.config.customer_id,client_name:r.client_name,client_email:r.client_email,client_uuid:s.get("uuid"),visits:r.visits,page_impressions:r.page_impressions,url:r.url,message:n,custom:t,latitude:s.get("latitude"),longitude:s.get("longitude")};l("OfflineMessage::send");return u.ajaxJsonp({url:"https://api.userlike.com/api/client/message/offline_message/",data:o,error:function(e){l("OfflineMessage::sendError "+e);return c("fsm").event("error",e)},success:function(e){l("OfflineMessage::sendSuccess "+e);return c("fsm").event("success",e)}})};OfflineMessageView.prototype.destroy=function(){return u("#userlike-offline-message-submit").off("click")};return OfflineMessageView}(t);return h.exports.OfflineMessageView=e})()},{"../global.coffee":13,"../screenshot.coffee":23,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"../utils/validator.coffee":37,"./view.coffee":55}],48:[function(o,s,e){var a=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,i,r,n;t=o("./view.coffee").View;n=o("../utils/utils.coffee").has_css_animation_support;r=o("../global.coffee").get;i=o("../utils/jq.coffee")._jq;e=function(e){a(ProgressView,e);function ProgressView(){return ProgressView.__super__.constructor.apply(this,arguments)}ProgressView.prototype.height=216;ProgressView.prototype.el=function(){return i("#userlike-progress")};ProgressView.prototype.show=function(e){if(!n){i("#userlike-spinner-gif").show()}i("#userlike-close").on("click",this.onCloseClick);return r("popup").transition(this,e)};ProgressView.prototype.updateSpinnerColor=function(){return i("#userlike-spinner div").css("background-color",this.config.theme_lead_color)};ProgressView.prototype.onCloseClick=function(){return r("popup").hide()};ProgressView.prototype.destroy=function(){i("#userlike-close").off("click",this.onCloseClick);return ProgressView.__super__.destroy.call(this)};return ProgressView}(t);return s.exports.ProgressView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],49:[function(i,r,e){var o=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var e,t,n;t=i("./view.coffee").View;n=i("../utils/jq.coffee")._jq;e=function(e){o(RatingView,e);function RatingView(){return RatingView.__super__.constructor.apply(this,arguments)}RatingView.prototype.el=function(){return n("#userlike-rating")};RatingView.prototype.show=function(e){this.highlightText("#userlike-rating-headline",this.config.feedback_header);n("#userlike-rating-headline").text(this.config.feedback_header);this.resetStar();this.setupStarHover();this.setupStarClick();return this.el().show()};RatingView.prototype.selectedRating=null;RatingView.prototype.isValid=function(){return this.selectedRating!==null};RatingView.prototype.setupStarClick=function(){return n("#userlike-star-rating .userlike-symbol").on("click",function(r){return function(e){var t,i;t=n(n.event(e).target);i=t.data("rating");r.selectedRating=i;r.setStarsHighlight(r.selectedRating);return r.enableSubmit()}}(this))};RatingView.prototype.setupStarHover=function(){var e;e=n("#userlike-star-rating .userlike-rating");e.on("mouseenter",function(r){return function(e){var t,i;t=n(n.event(e).target);i=t.data("rating");i=parseInt(i,10);return r.setStarsHighlight(i)}}(this));return n("#userlike-star-rating").on("mouseleave",function(e){return function(){if(e.selectedRating){return e.setStarsHighlight(e.selectedRating)}else{return e.setStarsHighlight(0)}}}(this))};RatingView.prototype.resetStar=function(){var e;e=n("#userlike-star-rating .userlike-rating");return e.each(function(i){return function(e,t){return t.addClass("userlike-symbol-rating-inactive").css({color:i.config.theme.symbol_default_color})}}(this))};RatingView.prototype.setStarsHighlight=function(r){var e;e=n("#userlike-star-rating .userlike-rating");return e.each(function(i){return function(e,t){if(e+1<=r){return t.removeClass("userlike-symbol-rating-inactive").addClass("userlike-symbol-rating").css({color:i.config.theme.symbol_active_color})}else{return t.removeClass("userlike-symbol-rating").addClass("userlike-symbol-rating-inactive").css({color:i.config.theme.symbol_default_color})}}}(this))};RatingView.prototype.getRating=function(){return this.selectedRating};RatingView.prototype.enableSubmit=function(){return n("#userlike-feedback-submit").removeClass("userlike-disabled")};RatingView.prototype.destroy=function(){n("#userlike-star-rating .userlike-symbol").off("mouseenter");return n("#userlike-star-rating .userlike-symbol").off("click")};return RatingView}(t);return r.exports.RatingView=e})()},{"../utils/jq.coffee":31,"./view.coffee":55}],50:[function(i,r,e){var o=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var e,n,t,a,u,s;t=i("./view.coffee").View;n=i("../utils/validator.coffee").Validator;s=i("../utils/utils.coffee").getInput;u=i("../global.coffee").get;a=i("../utils/jq.coffee")._jq;e=function(e){o(RegisterView,e);function RegisterView(){return RegisterView.__super__.constructor.apply(this,arguments)}RegisterView.prototype.height=568;RegisterView.prototype.el=function(){return a("#userlike-register")};RegisterView.prototype.setupEventHandlers=function(){a("#userlike-register-submit").on("click",function(e){u("fsm").event("submitButton");a.event(e).preventDefault();return a.event(e).stopPropagation()});return a("#userlike-facebook-connect-submit").on("click",function(e){FB.login(function(e){return u("fsm").event("facebookLoginResponse",e)},{scope:"email"});a.event(e).preventDefault();return a.event(e).stopPropagation()})};RegisterView.prototype.showRegisterFormFacebook=function(e){a("#userlike-facebook-connect-submit").show();return this.show(e)};RegisterView.prototype.showRegisterForm=function(e){a("#userlike-facebook-connect-submit").hide();return this.show(e)};RegisterView.prototype.show=function(e){var t,i,r,n,o,s;n=u("popup");s=u("session");this.setupEventHandlers();n.clearInput("#userlike-register-email",this.config.register_enter_email,s.get("client_email"));n.clearInput("#userlike-register-name",this.config.register_enter_name,s.get("client_name"));this.highlightText("#userlike-register-headline",this.config.register_header);this.highlightText("#userlike-register-text",this.config.register_body);a("#userlike-register-headline").text(this.config.register_header);a("#userlike-register-text").text(this.config.register_body);o=[1,2,3];for(i=0,r=o.length;i<r;i++){t=o[i];if(this.config["register_additional0"+t+"_enabled"]){a("#userlike-register-additional0"+t).show();n.clearInput("#userlike-register-additional0"+t,this.config["register_additional0"+t+"_default"],s.get("client_additional0"+t+"_value"))}else{a("#userlike-register-additional0"+t).hide()}}return n.transition(this,e)};RegisterView.prototype.validateRegisterForm=function(){var e,t,i,r;i=u("session");r=function(o){return function(){var e,t,i,r,n;r=[1,2,3];for(t=0,i=r.length;t<i;t++){e=r[t];if(o.config["register_additional0"+e+"_enabled"]){n=s("#userlike-register-additional0"+e);if(!o.config["register_additional0"+e+"_optional"]){if(!n||n.length>100){a("#userlike-register-additional0"+e).focus();return false}}if(o.config["register_additional0"+e+"_optional"]){if(n&&n.length>100){a("#userlike-register-additional0"+e).focus();return false}}if(n){u("session").set("client_additional0"+e+"_value",n)}}}return true}}(this);t=s("#userlike-register-name");e=s("#userlike-register-email");if(this.config.optional_registration){if(!t&&!e){i["delete"]("client_name");i["delete"]("client_email")}else if(!e){i.set("client_name",t);i["delete"]("client_email")}else if(!n.validateEmail(e)){a("#userlike-register-email").focus();return false}else if(!n.validateName(t)){i["delete"]("client_name");i.set("client_email",e)}else{i.set("client_name",t);i.set("client_email",e)}}else{if(!n.validateName(t)){a("#userlike-register-name").focus();return false}if(!n.validateEmail(e)){a("#userlike-register-email").focus();return false}i.set("client_email",e);i.set("client_name",t)}return r()};return RegisterView}(t);return r.exports.RegisterView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"../utils/validator.coffee":37,"./view.coffee":55}],51:[function(o,s,e){var a=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,i,r,n;n=o("../utils/utils.coffee").isIE8;t=o("./view.coffee").View;r=o("../global.coffee").get;i=o("../utils/jq.coffee")._jq;e=function(e){a(SocialCompositeView,e);function SocialCompositeView(){return SocialCompositeView.__super__.constructor.apply(this,arguments)}SocialCompositeView.prototype.el=function(){return i("#userlike-social-composite")};SocialCompositeView.prototype.show=function(t){if(t==null){t=function(){}}return r("popup").transition(this,function(e){return function(){if(r("facebook")&&e.config.facebook_like_enabled){r("facebook_view").show()}if(!n()&&r("twitter")&&e.config.twitter_integration){r("twitter_view").show()}return t()}}(this))};return SocialCompositeView}(t);return s.exports.SocialCompositeView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],52:[function(r,n,e){var o=function(e,t){for(var i in t){if(s.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},s={}.hasOwnProperty;(function(){var e,t,s,i;t=r("./view.coffee").View;i=r("../global.coffee").get;s=r("../utils/jq.coffee")._jq;e=function(e){o(SurveyView,e);function SurveyView(){return SurveyView.__super__.constructor.apply(this,arguments)}SurveyView.prototype.el=function(){return s("#userlike-survey")};SurveyView.prototype.show=function(o,e){var t;t=this.el();this.highlightText("#userlike-survey-headline",this.config[o+"_survey_question"]);s("#userlike-survey-headline").text(this.config[o+"_survey_question"]);t.find(".userlike-fieldset-wrapper>div").each(function(n){return function(e,t){var i,r;i=s(t);if((r=n.config[o+"_survey_option0"+(e+1)])!=null?r.length:void 0){n.highlightText(i.find(".userlike-label"),n.config[o+"_survey_option0"+(e+1)]);i.find(".userlike-label").text(n.config[o+"_survey_option0"+(e+1)]);i.find("input").removeAttr("checked");return i.show()}else{return i.hide()}}}(this));return i("popup").transition(this,e)};SurveyView.prototype.showPreSurvey=function(e){return this.show("pre",e)};SurveyView.prototype.showPostSurvey=function(e){return this.show("post",e)};SurveyView.prototype.destroy=function(){this.el().find(".userlike-label").text("");return this.el().find("#userlike-survey-headline").text("")};return SurveyView}(t);return n.exports.SurveyView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],53:[function(s,a,e){var u=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},r={}.hasOwnProperty;(function(){var e,t,i,r,n,o;i=s("./view.coffee").View;n=s("../global.coffee").get;r=s("../utils/jq.coffee")._jq;o=s("../utils/utils.coffee").getInput;t=s("../utils/validator.coffee").Validator;e=function(e){u(TranscriptView,e);function TranscriptView(){return TranscriptView.__super__.constructor.apply(this,arguments)}TranscriptView.prototype.el=function(){return r("#userlike-transcript")};TranscriptView.prototype.setupEventHandlers=function(){return r("#userlike-transcript-submit").on("click",function(e){n("fsm").event("submitButton");r.event(e).preventDefault();return r.event(e).stopPropagation()})};TranscriptView.prototype.show=function(e){this.setupEventHandlers();n("popup").clearInput("#userlike-transcript-email",this.config.register_enter_email,n("session").get("client_email"));r("#userlike-transcript-headline").text(this.config.transcript_header);r("#userlike-transcript-text").text(this.config.transcript_body);return n("popup").transition(this,e)};TranscriptView.prototype.validateTranscriptForm=function(){var e;e=o("#userlike-transcript-email");if(!t.validateEmail(e)){r("#userlike-transcript-email").focus();return false}n("session").set("client_email",e);return true};TranscriptView.prototype.destroy=function(){return r("#userlike-transcript-submit").off("click")};return TranscriptView}(i);return a.exports.TranscriptView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"../utils/validator.coffee":37,"./view.coffee":55}],54:[function(i,r,e){var n=function(e,t){for(var i in t){if(o.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},o={}.hasOwnProperty;(function(){var e,t,o,s,a;t=i("./view.coffee").View;a=i("../global.coffee").get;s=i("../global.coffee")._ullog;o=i("../utils/jq.coffee")._jq;e=function(e){n(TwitterView,e);function TwitterView(){return TwitterView.__super__.constructor.apply(this,arguments)}TwitterView.prototype.el=function(){return o("#userlike-twitter-tweet")};TwitterView.prototype.show=function(e){var t,i,r;o("#userlike-twitter-tweet-headline").text(this.config.twitter_headline);o("#userlike-twitter-tweetButton").remove();t="";if(this.config.twitter_type==="share"){t+='<a href="https://twitter.com/share" ';t+='data-size="large" ';t+='data-lang="'+this.config.lang+'" ';t+='class="twitter-share-button" ';t+='data-text="'+this.config.twitter_share_text+'" ';t+='data-via="'+this.config.twitter_share_via+'" ';t+='data-hashtags="'+this.config.twitter_share_hashtag+'" ';if(!this.config.twitter_share_show_count){t+='data-count="none" '}t+="></a>"}else if(this.config.twitter_type==="follow"){t+='<a href="https://twitter.com/'+this.config.twitter_follow_user+'" ';t+='data-size="large" ';t+='data-show-count="false" ';t+='data-lang="'+this.config.lang+'" ';t+='class="twitter-follow-button" ';if(!this.config.twitter_follow_show_username){t+='data-show-screen-name="false" '}t+="></a>"}else if(this.config.twitter_type==="mention"){t+='<a href="https://twitter.com/intent/tweet?screen_name='+this.config.twitter_mention_user+"&text="+this.config.twitter_mention_text+'" ';t+='data-size="large" ';t+='data-lang="'+this.config.lang+'" ';t+='class="twitter-mention-button" ';t+="></a>"}s("Popup::showTwitterTweetView: b="+t);r=document.createElement("div");r.id="userlike-twitter-tweetButton";r=o(r);o("#userlike-twitter-tweet-wrapper").append(r);r.html(t);try{twttr.widgets.load();twttr.events.bind("tweet",function(){return a("tracking_event").trigger("twitter_tweet_tweeted")})}catch(n){i=n;s("showTwitterTweetView: err=",i)}return this.el().show()};return TwitterView}(t);return r.exports.TwitterView=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],55:[function(s,l,e){(function(){var r,e,a,t,u,i,n,o,c;a=s("../utils/jq.coffee")._jq;t=s("../global.coffee").get;u=function(){return t("preview")};i=s("../utils/utils.coffee").regex_email;n=s("../utils/utils.coffee").regex_url_full;c=s("../utils/utils.coffee").trim;o=s("../utils/utils.coffee").rgb;r=s("../utils/urlparser.coffee").UrlParser;e=function(){function View(e){if(e==null){e={}}this.config=a.extend({},t("config"),e.config)}View.prototype.height=352;View.prototype.is_minimizable=false;View.prototype.height_mobile="100%";View.current_hightlight_timeout=null;View.prototype.getHeaderbarText=function(){return this.config.custom_header||""};View.prototype.el=function(){return _ullog("View::el must be implemented by child class")};View.prototype.destroy=function(){};View.prototype.highlightText=function(t,e){var i,r,n,o,s;i=a(t);n=i.nodeName();r=n==="input"||n==="textarea";o=r?i.val():i.text();if(!((s=u())!=null?s.isActive():void 0)||!o||!e||o===e){return}if(r&&i.data("default")===e){return}if(View.current_hightlight_timeout){return}this._removeAllHighlights(t);i.addClass("bounceIn");i.addClass("animated");return View.current_hightlight_timeout=window.setTimeout(function(e){return function(){e._removeAllHighlights(t);return View.current_hightlight_timeout=null}}(this),2e3)};View.prototype._removeAllHighlights=function(e){a(".animate").removeClass("animated");return a(".bounceIn").removeClass("bounceIn")};View.prototype.replaceLinkOffsite=function(e,t){return'<a style="color: '+o(this.config.theme.link_text_color)+'" href="'+e+'" target="_blank" rel="noopener">'+(t||e)+"</a>"};View.prototype.replaceLinkOnsite=function(e){return'<a style="color: '+o(this.config.theme.link_text_color)+'" href="'+e+'">'+e+"</a>"};View.prototype.replaceEmails=function(e){return'<a style="color: '+o(this.config.theme.link_text_color)+'" href="mailto:'+e+'">'+e+"</a>"};View.prototype.replaceUrls=function(e){var t,i;i=new r(e,true);if(i.isOffsite()){if(this.config.links_offsite==="new"){t=this.replaceLinkOffsite(i.original())}else{t=this.replaceLinkOnsite(i.original())}}else{if(this.config.links_onsite==="new"){t=this.replaceLinkOffsite(i.original())}else{t=this.replaceLinkOnsite(i.original())}}return t};View.prototype.replaceLinks=function(e){e=this.regex_replace(e,i,this.replaceEmails);return e=this.regex_replace(e,n,this.replaceUrls)};View.prototype.regex_replace=function(e,t,i){var r,n,o,s,a,u,l;t=new RegExp(t.source,"i");while(true){o=t.exec(e);if(o){a=o.index;r=a+o[0].length;n=o[0];if(/^\s/.test(n)){a+=1;n=c(n)}s=i.apply(this,[n]);if(s){l=e.substr(0,a);u=e.substr(r);e=l+s+u;continue}}break}return e};return View}();return l.exports.View=e})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/urlparser.coffee":35,"../utils/utils.coffee":36}]},{},[1]);